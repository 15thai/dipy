
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>DIPY &#8212; dipy 0.16.0 documentation</title>
    <link rel="stylesheet" href="../_static/dipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="viz" href="dipy.viz.html" />
  <meta name="keywords" content="DIPY, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head><body>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <a href="../index.html">
  <img src="../_static/dipy-banner.png" alt="DIPY logo"  border="0" />
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dipy.viz.html" title="viz"
             accesskey="P">previous</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">API Reference</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h4> Site Navigation </h4>
  <ul>
    <li><a href="../documentation.html">Documentation</a></li>
    <li><a href="../devel/index.html">Development</a></li>
  </ul>

<h4> NIPY Community </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://nipy.org/">Community Home</a></li>
    <li><a class="reference external"
	href="http://nipy.org/">NIPY Projects</a></li>
    <li><a class="reference external"
	href="https://mail.python.org/mailman/listinfo/neuroimaging">Mailing List</a></li>
    <li><a class="reference external"
	href="http://nipy.org/nipy/license.html">License</a></li>
  </ul>


  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">workflows</span></code></a><ul>
<li><a class="reference internal" href="#module-dipy.workflows.align">Module: <code class="docutils literal notranslate"><span class="pre">workflows.align</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.base">Module: <code class="docutils literal notranslate"><span class="pre">workflows.base</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.combined_workflow">Module: <code class="docutils literal notranslate"><span class="pre">workflows.combined_workflow</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.denoise">Module: <code class="docutils literal notranslate"><span class="pre">workflows.denoise</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.docstring_parser">Module: <code class="docutils literal notranslate"><span class="pre">workflows.docstring_parser</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.flow_runner">Module: <code class="docutils literal notranslate"><span class="pre">workflows.flow_runner</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.io">Module: <code class="docutils literal notranslate"><span class="pre">workflows.io</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.mask">Module: <code class="docutils literal notranslate"><span class="pre">workflows.mask</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.multi_io">Module: <code class="docutils literal notranslate"><span class="pre">workflows.multi_io</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.reconst">Module: <code class="docutils literal notranslate"><span class="pre">workflows.reconst</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.segment">Module: <code class="docutils literal notranslate"><span class="pre">workflows.segment</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.stats">Module: <code class="docutils literal notranslate"><span class="pre">workflows.stats</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.tracking">Module: <code class="docutils literal notranslate"><span class="pre">workflows.tracking</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.viz">Module: <code class="docutils literal notranslate"><span class="pre">workflows.viz</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.workflows.workflow">Module: <code class="docutils literal notranslate"><span class="pre">workflows.workflow</span></code></a><ul>
<li><a class="reference internal" href="#affinemap"><code class="docutils literal notranslate"><span class="pre">AffineMap</span></code></a></li>
<li><a class="reference internal" href="#affineregistration"><code class="docutils literal notranslate"><span class="pre">AffineRegistration</span></code></a></li>
<li><a class="reference internal" href="#affinetransform3d"><code class="docutils literal notranslate"><span class="pre">AffineTransform3D</span></code></a></li>
<li><a class="reference internal" href="#applytransformflow"><code class="docutils literal notranslate"><span class="pre">ApplyTransformFlow</span></code></a></li>
<li><a class="reference internal" href="#ccmetric"><code class="docutils literal notranslate"><span class="pre">CCMetric</span></code></a></li>
<li><a class="reference internal" href="#diffeomorphicmap"><code class="docutils literal notranslate"><span class="pre">DiffeomorphicMap</span></code></a></li>
<li><a class="reference internal" href="#emmetric"><code class="docutils literal notranslate"><span class="pre">EMMetric</span></code></a></li>
<li><a class="reference internal" href="#imageregistrationflow"><code class="docutils literal notranslate"><span class="pre">ImageRegistrationFlow</span></code></a></li>
<li><a class="reference internal" href="#mutualinformationmetric"><code class="docutils literal notranslate"><span class="pre">MutualInformationMetric</span></code></a></li>
<li><a class="reference internal" href="#resliceflow"><code class="docutils literal notranslate"><span class="pre">ResliceFlow</span></code></a></li>
<li><a class="reference internal" href="#rigidtransform3d"><code class="docutils literal notranslate"><span class="pre">RigidTransform3D</span></code></a></li>
<li><a class="reference internal" href="#ssdmetric"><code class="docutils literal notranslate"><span class="pre">SSDMetric</span></code></a></li>
<li><a class="reference internal" href="#slrwithqbxflow"><code class="docutils literal notranslate"><span class="pre">SlrWithQbxFlow</span></code></a></li>
<li><a class="reference internal" href="#symmetricdiffeomorphicregistration"><code class="docutils literal notranslate"><span class="pre">SymmetricDiffeomorphicRegistration</span></code></a></li>
<li><a class="reference internal" href="#synregistrationflow"><code class="docutils literal notranslate"><span class="pre">SynRegistrationFlow</span></code></a></li>
<li><a class="reference internal" href="#translationtransform3d"><code class="docutils literal notranslate"><span class="pre">TranslationTransform3D</span></code></a></li>
<li><a class="reference internal" href="#workflow"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#check-dimensions">check_dimensions</a></li>
<li><a class="reference internal" href="#load-nifti">load_nifti</a></li>
<li><a class="reference internal" href="#load-trk">load_trk</a></li>
<li><a class="reference internal" href="#reslice">reslice</a></li>
<li><a class="reference internal" href="#save-nifti">save_nifti</a></li>
<li><a class="reference internal" href="#save-qa-metric">save_qa_metric</a></li>
<li><a class="reference internal" href="#slr-with-qbx">slr_with_qbx</a></li>
<li><a class="reference internal" href="#transform-centers-of-mass">transform_centers_of_mass</a></li>
<li><a class="reference internal" href="#transform-streamlines">transform_streamlines</a></li>
<li><a class="reference internal" href="#introspectiveargumentparser"><code class="docutils literal notranslate"><span class="pre">IntrospectiveArgumentParser</span></code></a></li>
<li><a class="reference internal" href="#numpydocstring"><code class="docutils literal notranslate"><span class="pre">NumpyDocString</span></code></a></li>
<li><a class="reference internal" href="#get-args-default">get_args_default</a></li>
<li><a class="reference internal" href="#combinedworkflow"><code class="docutils literal notranslate"><span class="pre">CombinedWorkflow</span></code></a></li>
<li><a class="reference internal" href="#id23"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#iteritems">iteritems</a></li>
<li><a class="reference internal" href="#nlmeansflow"><code class="docutils literal notranslate"><span class="pre">NLMeansFlow</span></code></a></li>
<li><a class="reference internal" href="#id24"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#estimate-sigma">estimate_sigma</a></li>
<li><a class="reference internal" href="#id25">load_nifti</a></li>
<li><a class="reference internal" href="#nlmeans">nlmeans</a></li>
<li><a class="reference internal" href="#id27">save_nifti</a></li>
<li><a class="reference internal" href="#id28"><code class="docutils literal notranslate"><span class="pre">NumpyDocString</span></code></a></li>
<li><a class="reference internal" href="#reader"><code class="docutils literal notranslate"><span class="pre">Reader</span></code></a></li>
<li><a class="reference internal" href="#dedent-lines">dedent_lines</a></li>
<li><a class="reference internal" href="#warn">warn</a></li>
<li><a class="reference internal" href="#id29"><code class="docutils literal notranslate"><span class="pre">IntrospectiveArgumentParser</span></code></a></li>
<li><a class="reference internal" href="#get-level">get_level</a></li>
<li><a class="reference internal" href="#id30">iteritems</a></li>
<li><a class="reference internal" href="#run-flow">run_flow</a></li>
<li><a class="reference internal" href="#ioinfoflow"><code class="docutils literal notranslate"><span class="pre">IoInfoFlow</span></code></a></li>
<li><a class="reference internal" href="#id31"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#id32">load_nifti</a></li>
<li><a class="reference internal" href="#maskflow"><code class="docutils literal notranslate"><span class="pre">MaskFlow</span></code></a></li>
<li><a class="reference internal" href="#id33"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#id34">load_nifti</a></li>
<li><a class="reference internal" href="#id35">save_nifti</a></li>
<li><a class="reference internal" href="#ioiterator"><code class="docutils literal notranslate"><span class="pre">IOIterator</span></code></a></li>
<li><a class="reference internal" href="#basename-without-extension">basename_without_extension</a></li>
<li><a class="reference internal" href="#common-start">common_start</a></li>
<li><a class="reference internal" href="#concatenate-inputs">concatenate_inputs</a></li>
<li><a class="reference internal" href="#connect-output-paths">connect_output_paths</a></li>
<li><a class="reference internal" href="#id36">get_args_default</a></li>
<li><a class="reference internal" href="#glob">glob</a></li>
<li><a class="reference internal" href="#io-iterator">io_iterator</a></li>
<li><a class="reference internal" href="#id37">io_iterator_</a></li>
<li><a class="reference internal" href="#slash-to-under">slash_to_under</a></li>
<li><a class="reference internal" href="#constrainedsphericaldeconvmodel"><code class="docutils literal notranslate"><span class="pre">ConstrainedSphericalDeconvModel</span></code></a></li>
<li><a class="reference internal" href="#csaodfmodel"><code class="docutils literal notranslate"><span class="pre">CsaOdfModel</span></code></a></li>
<li><a class="reference internal" href="#diffusionkurtosismodel"><code class="docutils literal notranslate"><span class="pre">DiffusionKurtosisModel</span></code></a></li>
<li><a class="reference internal" href="#reconstcsaflow"><code class="docutils literal notranslate"><span class="pre">ReconstCSAFlow</span></code></a></li>
<li><a class="reference internal" href="#reconstcsdflow"><code class="docutils literal notranslate"><span class="pre">ReconstCSDFlow</span></code></a></li>
<li><a class="reference internal" href="#reconstdkiflow"><code class="docutils literal notranslate"><span class="pre">ReconstDkiFlow</span></code></a></li>
<li><a class="reference internal" href="#reconstdtiflow"><code class="docutils literal notranslate"><span class="pre">ReconstDtiFlow</span></code></a></li>
<li><a class="reference internal" href="#reconstivimflow"><code class="docutils literal notranslate"><span class="pre">ReconstIvimFlow</span></code></a></li>
<li><a class="reference internal" href="#reconstmapmriflow"><code class="docutils literal notranslate"><span class="pre">ReconstMAPMRIFlow</span></code></a></li>
<li><a class="reference internal" href="#tensormodel"><code class="docutils literal notranslate"><span class="pre">TensorModel</span></code></a></li>
<li><a class="reference internal" href="#id75"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#ivimmodel">IvimModel</a></li>
<li><a class="reference internal" href="#auto-response">auto_response</a></li>
<li><a class="reference internal" href="#axial-diffusivity">axial_diffusivity</a></li>
<li><a class="reference internal" href="#color-fa">color_fa</a></li>
<li><a class="reference internal" href="#fractional-anisotropy">fractional_anisotropy</a></li>
<li><a class="reference internal" href="#geodesic-anisotropy">geodesic_anisotropy</a></li>
<li><a class="reference internal" href="#get-mode">get_mode</a></li>
<li><a class="reference internal" href="#get-sphere">get_sphere</a></li>
<li><a class="reference internal" href="#gradient-table">gradient_table</a></li>
<li><a class="reference internal" href="#literal-eval">literal_eval</a></li>
<li><a class="reference internal" href="#id93">load_nifti</a></li>
<li><a class="reference internal" href="#lower-triangular">lower_triangular</a></li>
<li><a class="reference internal" href="#mean-diffusivity">mean_diffusivity</a></li>
<li><a class="reference internal" href="#peaks-from-model">peaks_from_model</a></li>
<li><a class="reference internal" href="#peaks-to-niftis">peaks_to_niftis</a></li>
<li><a class="reference internal" href="#radial-diffusivity">radial_diffusivity</a></li>
<li><a class="reference internal" href="#read-bvals-bvecs">read_bvals_bvecs</a></li>
<li><a class="reference internal" href="#id98">save_nifti</a></li>
<li><a class="reference internal" href="#save-peaks">save_peaks</a></li>
<li><a class="reference internal" href="#split-dki-param">split_dki_param</a></li>
<li><a class="reference internal" href="#id99">warn</a></li>
<li><a class="reference internal" href="#labelsbundlesflow"><code class="docutils literal notranslate"><span class="pre">LabelsBundlesFlow</span></code></a></li>
<li><a class="reference internal" href="#medianotsuflow"><code class="docutils literal notranslate"><span class="pre">MedianOtsuFlow</span></code></a></li>
<li><a class="reference internal" href="#recobundles"><code class="docutils literal notranslate"><span class="pre">RecoBundles</span></code></a></li>
<li><a class="reference internal" href="#recobundlesflow"><code class="docutils literal notranslate"><span class="pre">RecoBundlesFlow</span></code></a></li>
<li><a class="reference internal" href="#id106"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#id107">load_nifti</a></li>
<li><a class="reference internal" href="#id108">load_trk</a></li>
<li><a class="reference internal" href="#median-otsu">median_otsu</a></li>
<li><a class="reference internal" href="#id113">save_nifti</a></li>
<li><a class="reference internal" href="#time">time</a></li>
<li><a class="reference internal" href="#bundleanalysispopulationflow"><code class="docutils literal notranslate"><span class="pre">BundleAnalysisPopulationFlow</span></code></a></li>
<li><a class="reference internal" href="#linearmixedmodelsflow"><code class="docutils literal notranslate"><span class="pre">LinearMixedModelsFlow</span></code></a></li>
<li><a class="reference internal" href="#snrinccflow"><code class="docutils literal notranslate"><span class="pre">SNRinCCFlow</span></code></a></li>
<li><a class="reference internal" href="#id115"><code class="docutils literal notranslate"><span class="pre">TensorModel</span></code></a></li>
<li><a class="reference internal" href="#id126"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#binary-dilation">binary_dilation</a></li>
<li><a class="reference internal" href="#bounding-box">bounding_box</a></li>
<li><a class="reference internal" href="#bundle-analysis">bundle_analysis</a></li>
<li><a class="reference internal" href="#id132">gradient_table</a></li>
<li><a class="reference internal" href="#id133">load_nifti</a></li>
<li><a class="reference internal" href="#id134">median_otsu</a></li>
<li><a class="reference internal" href="#optional-package">optional_package</a></li>
<li><a class="reference internal" href="#id137">read_bvals_bvecs</a></li>
<li><a class="reference internal" href="#id138">save_nifti</a></li>
<li><a class="reference internal" href="#segment-from-cfa">segment_from_cfa</a></li>
<li><a class="reference internal" href="#simple-plot">simple_plot</a></li>
<li><a class="reference internal" href="#closestpeakdirectiongetter"><code class="docutils literal notranslate"><span class="pre">ClosestPeakDirectionGetter</span></code></a></li>
<li><a class="reference internal" href="#cmctissueclassifier"><code class="docutils literal notranslate"><span class="pre">CmcTissueClassifier</span></code></a></li>
<li><a class="reference internal" href="#deterministicmaximumdirectiongetter"><code class="docutils literal notranslate"><span class="pre">DeterministicMaximumDirectionGetter</span></code></a></li>
<li><a class="reference internal" href="#localfibertrackingpamflow"><code class="docutils literal notranslate"><span class="pre">LocalFiberTrackingPAMFlow</span></code></a></li>
<li><a class="reference internal" href="#localtracking"><code class="docutils literal notranslate"><span class="pre">LocalTracking</span></code></a></li>
<li><a class="reference internal" href="#pftrackingpamflow"><code class="docutils literal notranslate"><span class="pre">PFTrackingPAMFlow</span></code></a></li>
<li><a class="reference internal" href="#particlefilteringtracking"><code class="docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a></li>
<li><a class="reference internal" href="#probabilisticdirectiongetter"><code class="docutils literal notranslate"><span class="pre">ProbabilisticDirectionGetter</span></code></a></li>
<li><a class="reference internal" href="#thresholdtissueclassifier"><code class="docutils literal notranslate"><span class="pre">ThresholdTissueClassifier</span></code></a></li>
<li><a class="reference internal" href="#tractogram"><code class="docutils literal notranslate"><span class="pre">Tractogram</span></code></a></li>
<li><a class="reference internal" href="#id145"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#id146">load_nifti</a></li>
<li><a class="reference internal" href="#load-peaks">load_peaks</a></li>
<li><a class="reference internal" href="#save">save</a></li>
<li><a class="reference internal" href="#horizonflow"><code class="docutils literal notranslate"><span class="pre">HorizonFlow</span></code></a></li>
<li><a class="reference internal" href="#id148"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#horizon">horizon</a></li>
<li><a class="reference internal" href="#id150">load_nifti</a></li>
<li><a class="reference internal" href="#load-tractogram">load_tractogram</a></li>
<li><a class="reference internal" href="#pjoin">pjoin</a></li>
<li><a class="reference internal" href="#id153"><code class="docutils literal notranslate"><span class="pre">Workflow</span></code></a></li>
<li><a class="reference internal" href="#id154">io_iterator_</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="dipy.viz.html"
                        title="previous chapter"><code class="docutils literal notranslate"><span class="pre">viz</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/dipy.workflows.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-dipy.workflows">
<span id="workflows"></span><h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows</span></code><a class="headerlink" href="#module-dipy.workflows" title="Permalink to this headline">¶</a></h1>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
<div class="section" id="module-dipy.workflows.align">
<span id="module-workflows-align"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.align</span></code><a class="headerlink" href="#module-dipy.workflows.align" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.AffineMap" title="dipy.workflows.align.AffineMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AffineMap</span></code></a>(affine[,&nbsp;domain_grid_shape,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.AffineRegistration" title="dipy.workflows.align.AffineRegistration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AffineRegistration</span></code></a>([metric,&nbsp;level_iters,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.AffineTransform3D" title="dipy.workflows.align.AffineTransform3D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AffineTransform3D</span></code></a></td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.ApplyTransformFlow" title="dipy.workflows.align.ApplyTransformFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ApplyTransformFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.CCMetric" title="dipy.workflows.align.CCMetric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCMetric</span></code></a>(dim[,&nbsp;sigma_diff,&nbsp;radius])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap" title="dipy.workflows.align.DiffeomorphicMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DiffeomorphicMap</span></code></a>(dim,&nbsp;disp_shape[,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric" title="dipy.workflows.align.EMMetric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EMMetric</span></code></a>(dim[,&nbsp;smooth,&nbsp;inner_iter,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.ImageRegistrationFlow" title="dipy.workflows.align.ImageRegistrationFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ImageRegistrationFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td>The registration workflow is organized as a collection of different functions.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.MutualInformationMetric" title="dipy.workflows.align.MutualInformationMetric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MutualInformationMetric</span></code></a>([nbins,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.ResliceFlow" title="dipy.workflows.align.ResliceFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ResliceFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.RigidTransform3D" title="dipy.workflows.align.RigidTransform3D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RigidTransform3D</span></code></a></td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.SSDMetric" title="dipy.workflows.align.SSDMetric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SSDMetric</span></code></a>(dim[,&nbsp;smooth,&nbsp;inner_iter,&nbsp;step_type])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.SlrWithQbxFlow" title="dipy.workflows.align.SlrWithQbxFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SlrWithQbxFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration" title="dipy.workflows.align.SymmetricDiffeomorphicRegistration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SymmetricDiffeomorphicRegistration</span></code></a>(metric[,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.SynRegistrationFlow" title="dipy.workflows.align.SynRegistrationFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SynRegistrationFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.TranslationTransform3D" title="dipy.workflows.align.TranslationTransform3D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TranslationTransform3D</span></code></a></td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.Workflow" title="dipy.workflows.align.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.check_dimensions" title="dipy.workflows.align.check_dimensions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_dimensions</span></code></a>(static,&nbsp;moving)</td>
<td>Check the dimensions of the input images.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.load_nifti" title="dipy.workflows.align.load_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_nifti</span></code></a>(fname[,&nbsp;return_img,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.load_trk" title="dipy.workflows.align.load_trk"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_trk</span></code></a>(filename[,&nbsp;lazy_load])</td>
<td>Loads tractogram files (<a href="#id1"><span class="problematic" id="id2">*</span></a>.tck)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.reslice" title="dipy.workflows.align.reslice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reslice</span></code></a>(data,&nbsp;affine,&nbsp;zooms,&nbsp;new_zooms[,&nbsp;…])</td>
<td>Reslice data with new voxel resolution defined by <code class="docutils literal notranslate"><span class="pre">new_zooms</span></code></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.save_nifti" title="dipy.workflows.align.save_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_nifti</span></code></a>(fname,&nbsp;data,&nbsp;affine[,&nbsp;hdr])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.save_qa_metric" title="dipy.workflows.align.save_qa_metric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_qa_metric</span></code></a>(fname,&nbsp;xopt,&nbsp;fopt)</td>
<td>Save Quality Assurance metrics.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.slr_with_qbx" title="dipy.workflows.align.slr_with_qbx"><code class="xref py py-obj docutils literal notranslate"><span class="pre">slr_with_qbx</span></code></a>(static,&nbsp;moving[,&nbsp;x0,&nbsp;…])</td>
<td>Utility function for registering large tractograms.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.transform_centers_of_mass" title="dipy.workflows.align.transform_centers_of_mass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform_centers_of_mass</span></code></a>(static,&nbsp;…)</td>
<td>Transformation to align the center of mass of the input images</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.transform_streamlines" title="dipy.workflows.align.transform_streamlines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform_streamlines</span></code></a>(streamlines,&nbsp;mat[,&nbsp;…])</td>
<td>Apply affine transformation to streamlines</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.base">
<span id="module-workflows-base"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.base</span></code><a class="headerlink" href="#module-dipy.workflows.base" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.base.IntrospectiveArgumentParser" title="dipy.workflows.base.IntrospectiveArgumentParser"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IntrospectiveArgumentParser</span></code></a>([prog,&nbsp;usage,&nbsp;…])</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Attributes:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.base.NumpyDocString" title="dipy.workflows.base.NumpyDocString"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NumpyDocString</span></code></a>(docstring[,&nbsp;config])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.base.get_args_default" title="dipy.workflows.base.get_args_default"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_args_default</span></code></a>(func)</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.combined_workflow">
<span id="module-workflows-combined-workflow"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.combined_workflow</span></code><a class="headerlink" href="#module-dipy.workflows.combined_workflow" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.CombinedWorkflow" title="dipy.workflows.combined_workflow.CombinedWorkflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CombinedWorkflow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.Workflow" title="dipy.workflows.combined_workflow.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.iteritems" title="dipy.workflows.combined_workflow.iteritems"><code class="xref py py-obj docutils literal notranslate"><span class="pre">iteritems</span></code></a>(d,&nbsp;**kw)</td>
<td>Return an iterator over the (key, value) pairs of a dictionary.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.denoise">
<span id="module-workflows-denoise"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.denoise</span></code><a class="headerlink" href="#module-dipy.workflows.denoise" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.denoise.NLMeansFlow" title="dipy.workflows.denoise.NLMeansFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NLMeansFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.denoise.Workflow" title="dipy.workflows.denoise.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.denoise.estimate_sigma" title="dipy.workflows.denoise.estimate_sigma"><code class="xref py py-obj docutils literal notranslate"><span class="pre">estimate_sigma</span></code></a>(arr[,&nbsp;…])</td>
<td>Standard deviation estimation from local patches</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.denoise.load_nifti" title="dipy.workflows.denoise.load_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_nifti</span></code></a>(fname[,&nbsp;return_img,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.denoise.nlmeans" title="dipy.workflows.denoise.nlmeans"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nlmeans</span></code></a>(arr,&nbsp;sigma[,&nbsp;mask,&nbsp;patch_radius,&nbsp;…])</td>
<td>Non-local means for denoising 3D and 4D images</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.denoise.save_nifti" title="dipy.workflows.denoise.save_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_nifti</span></code></a>(fname,&nbsp;data,&nbsp;affine[,&nbsp;hdr])</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.docstring_parser">
<span id="module-workflows-docstring-parser"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.docstring_parser</span></code><a class="headerlink" href="#module-dipy.workflows.docstring_parser" title="Permalink to this headline">¶</a></h2>
<p>This was taken directly from the file docscrape.py of numpydoc package.</p>
<p>Copyright (C) 2008 Stefan van der Walt &lt;<a class="reference external" href="mailto:stefan&#37;&#52;&#48;mentat&#46;za&#46;net">stefan<span>&#64;</span>mentat<span>&#46;</span>za<span>&#46;</span>net</a>&gt;,
Pauli Virtanen &lt;<a class="reference external" href="mailto:pav&#37;&#52;&#48;iki&#46;fi">pav<span>&#64;</span>iki<span>&#46;</span>fi</a>&gt;</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in
the documentation and/or other materials provided with the
distribution.</li>
</ol>
</div></blockquote>
<p>THIS SOFTWARE IS PROVIDED BY THE AUTHOR <a href="#id3"><span class="problematic" id="id4">``</span></a>AS IS’’ AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.docstring_parser.NumpyDocString" title="dipy.workflows.docstring_parser.NumpyDocString"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NumpyDocString</span></code></a>(docstring[,&nbsp;config])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.docstring_parser.Reader" title="dipy.workflows.docstring_parser.Reader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reader</span></code></a>(data)</td>
<td>A line-based string reader.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.docstring_parser.dedent_lines" title="dipy.workflows.docstring_parser.dedent_lines"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dedent_lines</span></code></a>(lines)</td>
<td>Deindent a list of lines maximally</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.docstring_parser.warn" title="dipy.workflows.docstring_parser.warn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">warn</span></code></a></td>
<td>Issue a warning, or maybe ignore it or raise an exception.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.flow_runner">
<span id="module-workflows-flow-runner"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.flow_runner</span></code><a class="headerlink" href="#module-dipy.workflows.flow_runner" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser" title="dipy.workflows.flow_runner.IntrospectiveArgumentParser"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IntrospectiveArgumentParser</span></code></a>([prog,&nbsp;usage,&nbsp;…])</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Attributes:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.flow_runner.get_level" title="dipy.workflows.flow_runner.get_level"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_level</span></code></a>(lvl)</td>
<td>Transforms the loggin level passed on the commandline into a proper logging level name.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.flow_runner.iteritems" title="dipy.workflows.flow_runner.iteritems"><code class="xref py py-obj docutils literal notranslate"><span class="pre">iteritems</span></code></a>(d,&nbsp;**kw)</td>
<td>Return an iterator over the (key, value) pairs of a dictionary.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.flow_runner.run_flow" title="dipy.workflows.flow_runner.run_flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_flow</span></code></a>(flow)</td>
<td>Wraps the process of building an argparser that reflects the workflow that we want to run along with some generic parameters like logging, force and output strategies.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.io">
<span id="module-workflows-io"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.io</span></code><a class="headerlink" href="#module-dipy.workflows.io" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.io.IoInfoFlow" title="dipy.workflows.io.IoInfoFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IoInfoFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.io.Workflow" title="dipy.workflows.io.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.io.load_nifti" title="dipy.workflows.io.load_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_nifti</span></code></a>(fname[,&nbsp;return_img,&nbsp;…])</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.mask">
<span id="module-workflows-mask"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.mask</span></code><a class="headerlink" href="#module-dipy.workflows.mask" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.mask.MaskFlow" title="dipy.workflows.mask.MaskFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MaskFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.mask.Workflow" title="dipy.workflows.mask.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.mask.load_nifti" title="dipy.workflows.mask.load_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_nifti</span></code></a>(fname[,&nbsp;return_img,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.mask.save_nifti" title="dipy.workflows.mask.save_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_nifti</span></code></a>(fname,&nbsp;data,&nbsp;affine[,&nbsp;hdr])</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.multi_io">
<span id="module-workflows-multi-io"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.multi_io</span></code><a class="headerlink" href="#module-dipy.workflows.multi_io" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.multi_io.IOIterator" title="dipy.workflows.multi_io.IOIterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOIterator</span></code></a>([output_strategy,&nbsp;mix_names])</td>
<td>Create output filenames that work nicely with multiple input files from multiple directories (processing multiple subjects with one command)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.multi_io.basename_without_extension" title="dipy.workflows.multi_io.basename_without_extension"><code class="xref py py-obj docutils literal notranslate"><span class="pre">basename_without_extension</span></code></a>(fname)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.multi_io.common_start" title="dipy.workflows.multi_io.common_start"><code class="xref py py-obj docutils literal notranslate"><span class="pre">common_start</span></code></a>(sa,&nbsp;sb)</td>
<td>Return the longest common substring from the beginning of sa and sb.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.multi_io.concatenate_inputs" title="dipy.workflows.multi_io.concatenate_inputs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concatenate_inputs</span></code></a>(multi_inputs)</td>
<td>Concatenate list of inputs</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.multi_io.connect_output_paths" title="dipy.workflows.multi_io.connect_output_paths"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect_output_paths</span></code></a>(inputs,&nbsp;out_dir,&nbsp;out_files)</td>
<td>Generates a list of output files paths based on input files and output strategies.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.multi_io.get_args_default" title="dipy.workflows.multi_io.get_args_default"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_args_default</span></code></a>(func)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.multi_io.glob" title="dipy.workflows.multi_io.glob"><code class="xref py py-obj docutils literal notranslate"><span class="pre">glob</span></code></a>(pathname,&nbsp;*[,&nbsp;recursive])</td>
<td>Return a list of paths matching a pathname pattern.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.multi_io.io_iterator" title="dipy.workflows.multi_io.io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">io_iterator</span></code></a>(inputs,&nbsp;out_dir,&nbsp;fnames[,&nbsp;…])</td>
<td>Creates an IOIterator from the parameters.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.multi_io.io_iterator_" title="dipy.workflows.multi_io.io_iterator_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">io_iterator_</span></code></a>(frame,&nbsp;fnc[,&nbsp;output_strategy,&nbsp;…])</td>
<td>Creates an IOIterator using introspection.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.multi_io.slash_to_under" title="dipy.workflows.multi_io.slash_to_under"><code class="xref py py-obj docutils literal notranslate"><span class="pre">slash_to_under</span></code></a>(dir_str)</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.reconst">
<span id="module-workflows-reconst"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.reconst</span></code><a class="headerlink" href="#module-dipy.workflows.reconst" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ConstrainedSphericalDeconvModel" title="dipy.workflows.reconst.ConstrainedSphericalDeconvModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ConstrainedSphericalDeconvModel</span></code></a>(gtab,&nbsp;response)</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.CsaOdfModel" title="dipy.workflows.reconst.CsaOdfModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CsaOdfModel</span></code></a>(gtab,&nbsp;sh_order[,&nbsp;smooth,&nbsp;…])</td>
<td>Implementation of Constant Solid Angle reconstruction method.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.DiffusionKurtosisModel" title="dipy.workflows.reconst.DiffusionKurtosisModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DiffusionKurtosisModel</span></code></a>(gtab[,&nbsp;fit_method])</td>
<td>Class for the Diffusion Kurtosis Model</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstCSAFlow" title="dipy.workflows.reconst.ReconstCSAFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ReconstCSAFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstCSDFlow" title="dipy.workflows.reconst.ReconstCSDFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ReconstCSDFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstDkiFlow" title="dipy.workflows.reconst.ReconstDkiFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ReconstDkiFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstDtiFlow" title="dipy.workflows.reconst.ReconstDtiFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ReconstDtiFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstIvimFlow" title="dipy.workflows.reconst.ReconstIvimFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ReconstIvimFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstMAPMRIFlow" title="dipy.workflows.reconst.ReconstMAPMRIFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ReconstMAPMRIFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.TensorModel" title="dipy.workflows.reconst.TensorModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TensorModel</span></code></a>(gtab[,&nbsp;fit_method,&nbsp;return_S0_hat])</td>
<td>Diffusion Tensor</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.Workflow" title="dipy.workflows.reconst.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.IvimModel" title="dipy.workflows.reconst.IvimModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IvimModel</span></code></a>(gtab[,&nbsp;fit_method])</td>
<td>Selector function to switch between the 2-stage Levenberg-Marquardt based NLLS fitting method (also containing the linear fit): <cite>LM</cite> and the Variable Projections based fitting method: <cite>VarPro</cite>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.auto_response" title="dipy.workflows.reconst.auto_response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">auto_response</span></code></a>(gtab,&nbsp;data[,&nbsp;roi_center,&nbsp;…])</td>
<td>Automatic estimation of response function using FA.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.axial_diffusivity" title="dipy.workflows.reconst.axial_diffusivity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">axial_diffusivity</span></code></a>(evals[,&nbsp;axis])</td>
<td>Axial Diffusivity (AD) of a diffusion tensor.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.color_fa" title="dipy.workflows.reconst.color_fa"><code class="xref py py-obj docutils literal notranslate"><span class="pre">color_fa</span></code></a>(fa,&nbsp;evecs)</td>
<td>Color fractional anisotropy of diffusion tensor</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.fractional_anisotropy" title="dipy.workflows.reconst.fractional_anisotropy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fractional_anisotropy</span></code></a>(evals[,&nbsp;axis])</td>
<td>Fractional anisotropy (FA) of a diffusion tensor.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.geodesic_anisotropy" title="dipy.workflows.reconst.geodesic_anisotropy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geodesic_anisotropy</span></code></a>(evals[,&nbsp;axis])</td>
<td>Geodesic anisotropy (GA) of a diffusion tensor.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.get_mode" title="dipy.workflows.reconst.get_mode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_mode</span></code></a>(q_form)</td>
<td>Mode (MO) of a diffusion tensor <a class="reference internal" href="#r8502d494f176-1" id="id5">[1]</a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.get_sphere" title="dipy.workflows.reconst.get_sphere"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sphere</span></code></a>([name])</td>
<td>provide triangulated spheres</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.gradient_table" title="dipy.workflows.reconst.gradient_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gradient_table</span></code></a>(bvals[,&nbsp;bvecs,&nbsp;big_delta,&nbsp;…])</td>
<td>A general function for creating diffusion MR gradients.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.literal_eval" title="dipy.workflows.reconst.literal_eval"><code class="xref py py-obj docutils literal notranslate"><span class="pre">literal_eval</span></code></a>(node_or_string)</td>
<td>Safely evaluate an expression node or a string containing a Python expression.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.load_nifti" title="dipy.workflows.reconst.load_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_nifti</span></code></a>(fname[,&nbsp;return_img,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.lower_triangular" title="dipy.workflows.reconst.lower_triangular"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lower_triangular</span></code></a>(tensor[,&nbsp;b0])</td>
<td>Returns the six lower triangular values of the tensor and a dummy variable if b0 is not None</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.mean_diffusivity" title="dipy.workflows.reconst.mean_diffusivity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mean_diffusivity</span></code></a>(evals[,&nbsp;axis])</td>
<td>Mean Diffusivity (MD) of a diffusion tensor.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.peaks_from_model" title="dipy.workflows.reconst.peaks_from_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">peaks_from_model</span></code></a>(model,&nbsp;data,&nbsp;sphere,&nbsp;…[,&nbsp;…])</td>
<td>Fit the model to data and computes peaks and metrics</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.peaks_to_niftis" title="dipy.workflows.reconst.peaks_to_niftis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">peaks_to_niftis</span></code></a>(pam,&nbsp;fname_shm,&nbsp;fname_dirs,&nbsp;…)</td>
<td>Save SH, directions, indices and values of peaks to Nifti.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.radial_diffusivity" title="dipy.workflows.reconst.radial_diffusivity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">radial_diffusivity</span></code></a>(evals[,&nbsp;axis])</td>
<td>Radial Diffusivity (RD) of a diffusion tensor.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.read_bvals_bvecs" title="dipy.workflows.reconst.read_bvals_bvecs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_bvals_bvecs</span></code></a>(fbvals,&nbsp;fbvecs)</td>
<td>Read b-values and b-vectors from disk</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.save_nifti" title="dipy.workflows.reconst.save_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_nifti</span></code></a>(fname,&nbsp;data,&nbsp;affine[,&nbsp;hdr])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.save_peaks" title="dipy.workflows.reconst.save_peaks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_peaks</span></code></a>(fname,&nbsp;pam[,&nbsp;affine,&nbsp;verbose])</td>
<td>Save all important attributes of object PeaksAndMetrics in a PAM5 file (HDF5).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.split_dki_param" title="dipy.workflows.reconst.split_dki_param"><code class="xref py py-obj docutils literal notranslate"><span class="pre">split_dki_param</span></code></a>(dki_params)</td>
<td>Extract the diffusion tensor eigenvalues, the diffusion tensor eigenvector matrix, and the 15 independent elements of the kurtosis tensor from the model parameters estimated from the DKI model</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.warn" title="dipy.workflows.reconst.warn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">warn</span></code></a></td>
<td>Issue a warning, or maybe ignore it or raise an exception.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.segment">
<span id="module-workflows-segment"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.segment</span></code><a class="headerlink" href="#module-dipy.workflows.segment" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.LabelsBundlesFlow" title="dipy.workflows.segment.LabelsBundlesFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LabelsBundlesFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.MedianOtsuFlow" title="dipy.workflows.segment.MedianOtsuFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MedianOtsuFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.RecoBundles" title="dipy.workflows.segment.RecoBundles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RecoBundles</span></code></a>(streamlines[,&nbsp;greater_than,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.RecoBundlesFlow" title="dipy.workflows.segment.RecoBundlesFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RecoBundlesFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.Workflow" title="dipy.workflows.segment.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.load_nifti" title="dipy.workflows.segment.load_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_nifti</span></code></a>(fname[,&nbsp;return_img,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.load_trk" title="dipy.workflows.segment.load_trk"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_trk</span></code></a>(filename[,&nbsp;lazy_load])</td>
<td>Loads tractogram files (<a href="#id6"><span class="problematic" id="id7">*</span></a>.tck)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.median_otsu" title="dipy.workflows.segment.median_otsu"><code class="xref py py-obj docutils literal notranslate"><span class="pre">median_otsu</span></code></a>(input_volume[,&nbsp;median_radius,&nbsp;…])</td>
<td>Simple brain extraction tool method for images from DWI data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.save_nifti" title="dipy.workflows.segment.save_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_nifti</span></code></a>(fname,&nbsp;data,&nbsp;affine[,&nbsp;hdr])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.time" title="dipy.workflows.segment.time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time</span></code></a>()</td>
<td>Return the current time in seconds since the Epoch.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.stats">
<span id="module-workflows-stats"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.stats</span></code><a class="headerlink" href="#module-dipy.workflows.stats" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.BundleAnalysisPopulationFlow" title="dipy.workflows.stats.BundleAnalysisPopulationFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BundleAnalysisPopulationFlow</span></code></a>([…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.LinearMixedModelsFlow" title="dipy.workflows.stats.LinearMixedModelsFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LinearMixedModelsFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.SNRinCCFlow" title="dipy.workflows.stats.SNRinCCFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SNRinCCFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.TensorModel" title="dipy.workflows.stats.TensorModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TensorModel</span></code></a>(gtab[,&nbsp;fit_method,&nbsp;return_S0_hat])</td>
<td>Diffusion Tensor</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.Workflow" title="dipy.workflows.stats.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.binary_dilation" title="dipy.workflows.stats.binary_dilation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">binary_dilation</span></code></a>(input[,&nbsp;structure,&nbsp;…])</td>
<td>Multi-dimensional binary dilation with the given structuring element.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.bounding_box" title="dipy.workflows.stats.bounding_box"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bounding_box</span></code></a>(vol)</td>
<td>Compute the bounding box of nonzero intensity voxels in the volume.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.bundle_analysis" title="dipy.workflows.stats.bundle_analysis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bundle_analysis</span></code></a>(model_bundle_folder,&nbsp;…[,&nbsp;…])</td>
<td>Applies statistical analysis on bundles and saves the results in a directory specified by <code class="docutils literal notranslate"><span class="pre">out_dir</span></code>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.gradient_table" title="dipy.workflows.stats.gradient_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gradient_table</span></code></a>(bvals[,&nbsp;bvecs,&nbsp;big_delta,&nbsp;…])</td>
<td>A general function for creating diffusion MR gradients.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.load_nifti" title="dipy.workflows.stats.load_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_nifti</span></code></a>(fname[,&nbsp;return_img,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.median_otsu" title="dipy.workflows.stats.median_otsu"><code class="xref py py-obj docutils literal notranslate"><span class="pre">median_otsu</span></code></a>(input_volume[,&nbsp;median_radius,&nbsp;…])</td>
<td>Simple brain extraction tool method for images from DWI data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.optional_package" title="dipy.workflows.stats.optional_package"><code class="xref py py-obj docutils literal notranslate"><span class="pre">optional_package</span></code></a>(name[,&nbsp;trip_msg])</td>
<td>Return package-like thing and module setup for package <cite>name</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.read_bvals_bvecs" title="dipy.workflows.stats.read_bvals_bvecs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_bvals_bvecs</span></code></a>(fbvals,&nbsp;fbvecs)</td>
<td>Read b-values and b-vectors from disk</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.save_nifti" title="dipy.workflows.stats.save_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_nifti</span></code></a>(fname,&nbsp;data,&nbsp;affine[,&nbsp;hdr])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.segment_from_cfa" title="dipy.workflows.stats.segment_from_cfa"><code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_from_cfa</span></code></a>(tensor_fit,&nbsp;roi,&nbsp;threshold)</td>
<td>Segment the cfa inside roi using the values from threshold as bounds.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.simple_plot" title="dipy.workflows.stats.simple_plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simple_plot</span></code></a>(file_name,&nbsp;title,&nbsp;x,&nbsp;y,&nbsp;xlabel,&nbsp;…)</td>
<td>Saves the simple plot with given x and y values</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.tracking">
<span id="module-workflows-tracking"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.tracking</span></code><a class="headerlink" href="#module-dipy.workflows.tracking" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.ClosestPeakDirectionGetter" title="dipy.workflows.tracking.ClosestPeakDirectionGetter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ClosestPeakDirectionGetter</span></code></a></td>
<td>A direction getter that returns the closest odf peak to previous tracking direction.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.CmcTissueClassifier" title="dipy.workflows.tracking.CmcTissueClassifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CmcTissueClassifier</span></code></a></td>
<td>Continuous map criterion (CMC) stopping criteria from <a class="reference internal" href="#r80c64a47e37c-1" id="id8">[1]</a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.DeterministicMaximumDirectionGetter" title="dipy.workflows.tracking.DeterministicMaximumDirectionGetter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DeterministicMaximumDirectionGetter</span></code></a></td>
<td>Return direction of a sphere with the highest probability mass function (pmf).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.LocalFiberTrackingPAMFlow" title="dipy.workflows.tracking.LocalFiberTrackingPAMFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LocalFiberTrackingPAMFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.LocalTracking" title="dipy.workflows.tracking.LocalTracking"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LocalTracking</span></code></a>(direction_getter,&nbsp;…[,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.PFTrackingPAMFlow" title="dipy.workflows.tracking.PFTrackingPAMFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PFTrackingPAMFlow</span></code></a>([output_strategy,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.ParticleFilteringTracking" title="dipy.workflows.tracking.ParticleFilteringTracking"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a>(direction_getter,&nbsp;…)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.ProbabilisticDirectionGetter" title="dipy.workflows.tracking.ProbabilisticDirectionGetter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ProbabilisticDirectionGetter</span></code></a></td>
<td>Randomly samples direction of a sphere based on probability mass function (pmf).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.ThresholdTissueClassifier" title="dipy.workflows.tracking.ThresholdTissueClassifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ThresholdTissueClassifier</span></code></a></td>
<td># Declarations from tissue_classifier.pxd bellow cdef:     double threshold, interp_out_double[1]     double[:]  interp_out_view = interp_out_view     double[:, :, :] metric_map</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Tractogram</span></code></a>([streamlines,&nbsp;…])</td>
<td>Container for streamlines and their data information.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.Workflow" title="dipy.workflows.tracking.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.load_nifti" title="dipy.workflows.tracking.load_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_nifti</span></code></a>(fname[,&nbsp;return_img,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.load_peaks" title="dipy.workflows.tracking.load_peaks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_peaks</span></code></a>(fname[,&nbsp;verbose])</td>
<td>Load a PeaksAndMetrics HDF5 file (PAM5)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.save" title="dipy.workflows.tracking.save"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save</span></code></a>(tractogram,&nbsp;filename,&nbsp;**kwargs)</td>
<td>Saves a tractogram to a file.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.viz">
<span id="module-workflows-viz"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.viz</span></code><a class="headerlink" href="#module-dipy.workflows.viz" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.viz.HorizonFlow" title="dipy.workflows.viz.HorizonFlow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HorizonFlow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.viz.Workflow" title="dipy.workflows.viz.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.viz.horizon" title="dipy.workflows.viz.horizon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">horizon</span></code></a>(tractograms,&nbsp;images,&nbsp;cluster,&nbsp;…[,&nbsp;…])</td>
<td>Highly interactive visualization - invert the Horizon!</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.viz.load_nifti" title="dipy.workflows.viz.load_nifti"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_nifti</span></code></a>(fname[,&nbsp;return_img,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.viz.load_tractogram" title="dipy.workflows.viz.load_tractogram"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_tractogram</span></code></a>(filename[,&nbsp;lazy_load])</td>
<td>Loads tractogram files (<a href="#id9"><span class="problematic" id="id10">*</span></a>.tck)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.viz.pjoin" title="dipy.workflows.viz.pjoin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pjoin</span></code></a>(a,&nbsp;*p)</td>
<td>Join two or more pathname components, inserting ‘/’ as needed.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.workflows.workflow">
<span id="module-workflows-workflow"></span><h2>Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">workflows.workflow</span></code><a class="headerlink" href="#module-dipy.workflows.workflow" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>([output_strategy,&nbsp;mix_names,&nbsp;…])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.workflow.io_iterator_" title="dipy.workflows.workflow.io_iterator_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">io_iterator_</span></code></a>(frame,&nbsp;fnc[,&nbsp;output_strategy,&nbsp;…])</td>
<td>Creates an IOIterator using introspection.</td>
</tr>
</tbody>
</table>
<div class="section" id="affinemap">
<h3><a class="reference internal" href="#dipy.workflows.align.AffineMap" title="dipy.workflows.align.AffineMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">AffineMap</span></code></a><a class="headerlink" href="#affinemap" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.AffineMap">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">AffineMap</code><span class="sig-paren">(</span><em>affine</em>, <em>domain_grid_shape=None</em>, <em>domain_grid2world=None</em>, <em>codomain_grid_shape=None</em>, <em>codomain_grid2world=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.AffineMap.get_affine" title="dipy.workflows.align.AffineMap.get_affine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_affine</span></code></a>()</td>
<td>Returns the value of the transformation, not a reference!</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.AffineMap.set_affine" title="dipy.workflows.align.AffineMap.set_affine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_affine</span></code></a>(affine)</td>
<td>Sets the affine transform (operating in physical space)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.AffineMap.transform" title="dipy.workflows.align.AffineMap.transform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform</span></code></a>(image[,&nbsp;interp,&nbsp;image_grid2world,&nbsp;…])</td>
<td>Transforms the input image from co-domain to domain space</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.AffineMap.transform_inverse" title="dipy.workflows.align.AffineMap.transform_inverse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform_inverse</span></code></a>(image[,&nbsp;interp,&nbsp;…])</td>
<td>Transforms the input image from domain to co-domain space</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.AffineMap.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>affine</em>, <em>domain_grid_shape=None</em>, <em>domain_grid2world=None</em>, <em>codomain_grid_shape=None</em>, <em>codomain_grid2world=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineMap.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>AffineMap</p>
<p>Implements an affine transformation whose domain is given by
<cite>domain_grid</cite> and <cite>domain_grid2world</cite>, and whose co-domain is
given by <cite>codomain_grid</cite> and <cite>codomain_grid2world</cite>.</p>
<p>The actual transform is represented by the <cite>affine</cite> matrix, which
operate in world coordinates. Therefore, to transform a moving image
towards a static image, we first map each voxel (i,j,k) of the static
image to world coordinates (x,y,z) by applying <cite>domain_grid2world</cite>.
Then we apply the <cite>affine</cite> transform to (x,y,z) obtaining (x’, y’, z’)
in moving image’s world coordinates. Finally, (x’, y’, z’) is mapped
to voxel coordinates (i’, j’, k’) in the moving image by multiplying
(x’, y’, z’) by the inverse of <cite>codomain_grid2world</cite>. The
<cite>codomain_grid_shape</cite> is used analogously to transform the static
image towards the moving image when calling <cite>transform_inverse</cite>.</p>
<p>If the domain/co-domain information is not provided (None) then the
sampling information needs to be specified each time the <cite>transform</cite>
or <cite>transform_inverse</cite> is called to transform images. Note that such
sampling information is not necessary to transform points defined in
physical space, such as stream lines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim + 1, dim + 1)</span></dt>
<dd><p class="first last">the matrix defining the affine transform, where <cite>dim</cite> is the
dimension of the space this map operates in (2 for 2D images,
3 for 3D images). If None, then <cite>self</cite> represents the identity
transformation.</p>
</dd>
<dt><strong>domain_grid_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence, shape (dim,), optional</span></dt>
<dd><p class="first last">the shape of the default domain sampling grid. When <cite>transform</cite>
is called to transform an image, the resulting image will have
this shape, unless a different sampling information is provided.
If None, then the sampling grid shape must be specified each time
the <cite>transform</cite> method is called.</p>
</dd>
<dt><strong>domain_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim + 1, dim + 1), optional</span></dt>
<dd><p class="first last">the grid-to-world transform associated with the domain grid.
If None (the default), then the grid-to-world transform is assumed
to be the identity.</p>
</dd>
<dt><strong>codomain_grid_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence of integers, shape (dim,)</span></dt>
<dd><p class="first last">the shape of the default co-domain sampling grid. When
<cite>transform_inverse</cite> is called to transform an image, the resulting
image will have this shape, unless a different sampling
information is provided. If None (the default), then the sampling
grid shape must be specified each time the <cite>transform_inverse</cite>
method is called.</p>
</dd>
<dt><strong>codomain_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim + 1, dim + 1)</span></dt>
<dd><p class="first last">the grid-to-world transform associated with the co-domain grid.
If None (the default), then the grid-to-world transform is assumed
to be the identity.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.AffineMap.get_affine">
<code class="descname">get_affine</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineMap.get_affine" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of the transformation, not a reference!</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Copy of the transform, not a reference.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.AffineMap.set_affine">
<code class="descname">set_affine</code><span class="sig-paren">(</span><em>affine</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineMap.set_affine" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the affine transform (operating in physical space)</p>
<p>Also sets <cite>self.affine_inv</cite> - the inverse of <cite>affine</cite>, or None if
there is no inverse.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim + 1, dim + 1)</span></dt>
<dd><p class="first last">the matrix representing the affine transform operating in
physical space. The domain and co-domain information
remains unchanged. If None, then <cite>self</cite> represents the identity
transformation.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.AffineMap.transform">
<code class="descname">transform</code><span class="sig-paren">(</span><em>image</em>, <em>interp='linear'</em>, <em>image_grid2world=None</em>, <em>sampling_grid_shape=None</em>, <em>sampling_grid2world=None</em>, <em>resample_only=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineMap.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms the input image from co-domain to domain space</p>
<p>By default, the transformed image is sampled at a grid defined by
<cite>self.domain_shape</cite> and <cite>self.domain_grid2world</cite>. If such
information was not provided then <cite>sampling_grid_shape</cite> is mandatory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be transformed</p>
</dd>
<dt><strong>interp</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, either ‘linear’ or ‘nearest’</span></dt>
<dd><p class="first last">the type of interpolation to be used, either ‘linear’
(for k-linear interpolation) or ‘nearest’ for nearest neighbor</p>
</dd>
<dt><strong>image_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim + 1, dim + 1), optional</span></dt>
<dd><p class="first last">the grid-to-world transform associated with <cite>image</cite>.
If None (the default), then the grid-to-world transform is assumed
to be the identity.</p>
</dd>
<dt><strong>sampling_grid_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence, shape (dim,), optional</span></dt>
<dd><p class="first last">the shape of the grid where the transformed image must be sampled.
If None (the default), then <cite>self.codomain_shape</cite> is used instead
(which must have been set at initialization, otherwise an exception
will be raised).</p>
</dd>
<dt><strong>sampling_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim + 1, dim + 1), optional</span></dt>
<dd><p class="first last">the grid-to-world transform associated with the sampling grid
(specified by <cite>sampling_grid_shape</cite>, or by default
<cite>self.codomain_shape</cite>). If None (the default), then the
grid-to-world transform is assumed to be the identity.</p>
</dd>
<dt><strong>resample_only</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Boolean, optional</span></dt>
<dd><p class="first last">If False (the default) the affine transform is applied normally.
If True, then the affine transform is not applied, and the input
image is just re-sampled on the domain grid of this transform.</p>
</dd>
<dt><strong>Returns</strong></dt>
<dd></dd>
<dt><strong>——-</strong></dt>
<dd></dd>
<dt><strong>transformed</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape <cite>sampling_grid_shape</cite> or</span></dt>
<dd><blockquote class="first">
<div><p><cite>self.codomain_shape</cite></p>
</div></blockquote>
<p class="last">the transformed image, sampled at the requested grid</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.AffineMap.transform_inverse">
<code class="descname">transform_inverse</code><span class="sig-paren">(</span><em>image</em>, <em>interp='linear'</em>, <em>image_grid2world=None</em>, <em>sampling_grid_shape=None</em>, <em>sampling_grid2world=None</em>, <em>resample_only=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineMap.transform_inverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms the input image from domain to co-domain space</p>
<p>By default, the transformed image is sampled at a grid defined by
<cite>self.codomain_shape</cite> and <cite>self.codomain_grid2world</cite>. If such
information was not provided then <cite>sampling_grid_shape</cite> is mandatory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be transformed</p>
</dd>
<dt><strong>interp</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, either ‘linear’ or ‘nearest’</span></dt>
<dd><p class="first last">the type of interpolation to be used, either ‘linear’
(for k-linear interpolation) or ‘nearest’ for nearest neighbor</p>
</dd>
<dt><strong>image_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim + 1, dim + 1), optional</span></dt>
<dd><p class="first last">the grid-to-world transform associated with <cite>image</cite>.
If None (the default), then the grid-to-world transform is assumed
to be the identity.</p>
</dd>
<dt><strong>sampling_grid_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence, shape (dim,), optional</span></dt>
<dd><p class="first last">the shape of the grid where the transformed image must be sampled.
If None (the default), then <cite>self.codomain_shape</cite> is used instead
(which must have been set at initialization, otherwise an exception
will be raised).</p>
</dd>
<dt><strong>sampling_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim + 1, dim + 1), optional</span></dt>
<dd><p class="first last">the grid-to-world transform associated with the sampling grid
(specified by <cite>sampling_grid_shape</cite>, or by default
<cite>self.codomain_shape</cite>). If None (the default), then the
grid-to-world transform is assumed to be the identity.</p>
</dd>
<dt><strong>resample_only</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Boolean, optional</span></dt>
<dd><p class="first last">If False (the default) the affine transform is applied normally.
If True, then the affine transform is not applied, and the input
image is just re-sampled on the domain grid of this transform.</p>
</dd>
<dt><strong>Returns</strong></dt>
<dd></dd>
<dt><strong>——-</strong></dt>
<dd></dd>
<dt><strong>transformed</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape <cite>sampling_grid_shape</cite> or</span></dt>
<dd><blockquote class="first">
<div><p><cite>self.codomain_shape</cite></p>
</div></blockquote>
<p class="last">the transformed image, sampled at the requested grid</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="affineregistration">
<h3><a class="reference internal" href="#dipy.workflows.align.AffineRegistration" title="dipy.workflows.align.AffineRegistration"><code class="xref py py-class docutils literal notranslate"><span class="pre">AffineRegistration</span></code></a><a class="headerlink" href="#affineregistration" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.AffineRegistration">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">AffineRegistration</code><span class="sig-paren">(</span><em>metric=None</em>, <em>level_iters=None</em>, <em>sigmas=None</em>, <em>factors=None</em>, <em>method='L-BFGS-B'</em>, <em>ss_sigma_factor=None</em>, <em>options=None</em>, <em>verbosity=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineRegistration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.AffineRegistration.optimize" title="dipy.workflows.align.AffineRegistration.optimize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">optimize</span></code></a>(static,&nbsp;moving,&nbsp;transform,&nbsp;params0)</td>
<td>Starts the optimization process</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.AffineRegistration.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>metric=None</em>, <em>level_iters=None</em>, <em>sigmas=None</em>, <em>factors=None</em>, <em>method='L-BFGS-B'</em>, <em>ss_sigma_factor=None</em>, <em>options=None</em>, <em>verbosity=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineRegistration.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes an instance of the AffineRegistration class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>metric</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None or object, optional</span></dt>
<dd><p class="first last">an instance of a metric. The default is None, implying
the Mutual Information metric with default settings.</p>
</dd>
<dt><strong>level_iters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence, optional</span></dt>
<dd><p class="first last">the number of iterations at each scale of the scale space.
<cite>level_iters[0]</cite> corresponds to the coarsest scale,
<cite>level_iters[-1]</cite> the finest, where n is the length of the
sequence. By default, a 3-level scale space with iterations
sequence equal to [10000, 1000, 100] will be used.</p>
</dd>
<dt><strong>sigmas</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence of floats, optional</span></dt>
<dd><p class="first last">custom smoothing parameter to build the scale space (one parameter
for each scale). By default, the sequence of sigmas will be
[3, 1, 0].</p>
</dd>
<dt><strong>factors</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence of floats, optional</span></dt>
<dd><p class="first last">custom scale factors to build the scale space (one factor for each
scale). By default, the sequence of factors will be [4, 2, 1].</p>
</dd>
<dt><strong>method</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">optimization method to be used. If Scipy version &lt; 0.12, then
only L-BFGS-B is available. Otherwise, <cite>method</cite> can be any
gradient-based method available in <cite>dipy.core.Optimize</cite>: CG, BFGS,
Newton-CG, dogleg or trust-ncg.
The default is ‘L-BFGS-B’.</p>
</dd>
<dt><strong>ss_sigma_factor</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">If None, this parameter is not used and an isotropic scale
space with the given <cite>factors</cite> and <cite>sigmas</cite> will be built.
If not None, an anisotropic scale space will be used by
automatically selecting the smoothing sigmas along each axis
according to the voxel dimensions of the given image.
The <cite>ss_sigma_factor</cite> is used to scale the automatically computed
sigmas. For example, in the isotropic case, the sigma of the
kernel will be <span class="math notranslate nohighlight">\(factor * (2 ^ i)\)</span> where
<span class="math notranslate nohighlight">\(i = 1, 2, ..., n_scales - 1\)</span> is the scale (the finest resolution
image <span class="math notranslate nohighlight">\(i=0\)</span> is never smoothed). The default is None.</p>
</dd>
<dt><strong>options</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict, optional</span></dt>
<dd><p class="first last">extra optimization options. The default is None, implying
no extra options are passed to the optimizer.</p>
</dd>
<dt><strong>verbosity: int (one of {0, 1, 2, 3}), optional</strong></dt>
<dd><p class="first">Set the verbosity level of the algorithm:
0 : do not print anything
1 : print information about the current status of the algorithm
2 : print high level information of the components involved in</p>
<blockquote>
<div><p>the registration that can be used to detect a failing
component.</p>
</div></blockquote>
<dl class="docutils">
<dt>3 <span class="classifier-delimiter">:</span> <span class="classifier">print as much information as possible to isolate the cause</span></dt>
<dd><p class="first last">of a bug.</p>
</dd>
</dl>
<p class="last">Default: 1</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.align.AffineRegistration.docstring_addendum">
<code class="descname">docstring_addendum</code><em class="property"> = 'verbosity: int (one of {0, 1, 2, 3}), optional\n            Set the verbosity level of the algorithm:\n            0 : do not print anything\n            1 : print information about the current status of the algorithm\n            2 : print high level information of the components involved in\n                the registration that can be used to detect a failing\n                component.\n            3 : print as much information as possible to isolate the cause\n                of a bug.\n            Default: 1\n    '</em><a class="headerlink" href="#dipy.workflows.align.AffineRegistration.docstring_addendum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.AffineRegistration.optimize">
<code class="descname">optimize</code><span class="sig-paren">(</span><em>static</em>, <em>moving</em>, <em>transform</em>, <em>params0</em>, <em>static_grid2world=None</em>, <em>moving_grid2world=None</em>, <em>starting_affine=None</em>, <em>ret_metric=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineRegistration.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the optimization process</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as reference during optimization.</p>
</dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as “moving” during optimization. It is
necessary to pre-align the moving image to ensure its domain
lies inside the domain of the deformation fields. This is assumed
to be accomplished by “pre-aligning” the moving image towards the
static using an affine transformation given by the
‘starting_affine’ matrix</p>
</dd>
<dt><strong>transform</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of Transform</span></dt>
<dd><p class="first last">the transformation with respect to whose parameters the gradient
must be computed</p>
</dd>
<dt><strong>params0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">parameters from which to start the optimization. If None, the
optimization will start at the identity transform. n is the
number of parameters of the specified transformation.</p>
</dd>
<dt><strong>static_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the static
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>moving_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the moving
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>starting_affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, or matrix, or None, optional</span></dt>
<dd><dl class="first docutils">
<dt>If string:</dt>
<dd><p class="first last">‘mass’: align centers of gravity
‘voxel-origin’: align physical coordinates of voxel (0,0,0)
‘centers’: align physical coordinates of central voxels</p>
</dd>
<dt>If matrix:</dt>
<dd><p class="first last">array, shape (dim+1, dim+1).</p>
</dd>
<dt>If None:</dt>
<dd><p class="first last">Start from identity.</p>
</dd>
</dl>
<p class="last">The default is None.</p>
</dd>
<dt><strong>ret_metric</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span></dt>
<dd><p class="first last">if True, it returns the parameters for measuring the
similarity between the images (default ‘False’).
The metric containing optimal parameters and
the distance between the images.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>affine_map</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of AffineMap</span></dt>
<dd><p class="first last">the affine resulting affine transformation</p>
</dd>
<dt><strong>xopt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">optimal parameters</span></dt>
<dd><p class="first last">the optimal parameters (translation, rotation shear etc.)</p>
</dd>
<dt><strong>fopt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Similarity metric</span></dt>
<dd><p class="first last">the value of the function at the optimal parameters.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="affinetransform3d">
<h3><a class="reference internal" href="#dipy.workflows.align.AffineTransform3D" title="dipy.workflows.align.AffineTransform3D"><code class="xref py py-class docutils literal notranslate"><span class="pre">AffineTransform3D</span></code></a><a class="headerlink" href="#affinetransform3d" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.AffineTransform3D">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">AffineTransform3D</code><a class="headerlink" href="#dipy.workflows.align.AffineTransform3D" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.align.transforms.Transform</span></code></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_identity_parameters</span></code></td>
<td>Parameter values corresponding to the identity transform</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">jacobian</span></code></td>
<td>Jacobian function of this transform</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">param_to_matrix</span></code></td>
<td>Matrix representation of this transform with the given parameters</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="74%" />
<col width="26%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get_dim</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>get_number_of_parameters</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.AffineTransform3D.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.AffineTransform3D.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Affine transform in 3D</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="applytransformflow">
<h3><a class="reference internal" href="#dipy.workflows.align.ApplyTransformFlow" title="dipy.workflows.align.ApplyTransformFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">ApplyTransformFlow</span></code></a><a class="headerlink" href="#applytransformflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.ApplyTransformFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">ApplyTransformFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ApplyTransformFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.ApplyTransformFlow.run" title="dipy.workflows.align.ApplyTransformFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(static_image_files,&nbsp;moving_image_files,&nbsp;…)</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.ApplyTransformFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ApplyTransformFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.ApplyTransformFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>static_image_files</em>, <em>moving_image_files</em>, <em>transform_map_file</em>, <em>transform_type='affine'</em>, <em>out_dir=''</em>, <em>out_file='transformed.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ApplyTransformFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static_image_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of the static image file.</p>
</dd>
<dt><strong>moving_image_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of the moving image(s). It can be a single image or a
folder containing multiple images.</p>
</dd>
<dt><strong>transform_map_file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">For the affine case, it should be a text(<a href="#id11"><span class="problematic" id="id12">*</span></a>.txt) file containing
the affine matrix. For the diffeomorphic case,
it should be a nifti file containing the mapping displacement
field in each voxel with this shape (x, y, z, 3, 2)</p>
</dd>
<dt><strong>transform_type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Select the transformation type to apply between ‘affine’ or
‘diffeomorphic’. (default affine)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Directory to save the transformed files (default ‘’).</p>
</dd>
<dt><strong>out_file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Name of the transformed file (default ‘transformed.nii.gz’).</dt>
<dd><dl class="first last docutils">
<dt>It is recommended to use the flag –mix-names to</dt>
<dd><p class="first last">prevent the output files from being overwritten.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ccmetric">
<h3><a class="reference internal" href="#dipy.workflows.align.CCMetric" title="dipy.workflows.align.CCMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">CCMetric</span></code></a><a class="headerlink" href="#ccmetric" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.CCMetric">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">CCMetric</code><span class="sig-paren">(</span><em>dim</em>, <em>sigma_diff=2.0</em>, <em>radius=4</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.CCMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.align.html#dipy.align.metrics.SimilarityMetric" title="dipy.align.metrics.SimilarityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.align.metrics.SimilarityMetric</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.CCMetric.compute_backward" title="dipy.workflows.align.CCMetric.compute_backward"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_backward</span></code></a>()</td>
<td>Computes one step bringing the static image towards the moving.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.CCMetric.compute_forward" title="dipy.workflows.align.CCMetric.compute_forward"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_forward</span></code></a>()</td>
<td>Computes one step bringing the moving image towards the static.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.CCMetric.free_iteration" title="dipy.workflows.align.CCMetric.free_iteration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">free_iteration</span></code></a>()</td>
<td>Frees the resources allocated during initialization</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.CCMetric.get_energy" title="dipy.workflows.align.CCMetric.get_energy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_energy</span></code></a>()</td>
<td>Numerical value assigned by this metric to the current image pair</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.CCMetric.initialize_iteration" title="dipy.workflows.align.CCMetric.initialize_iteration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">initialize_iteration</span></code></a>()</td>
<td>Prepares the metric to compute one displacement field iteration.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_levels_above</span></code>(levels)</td>
<td>Informs the metric how many pyramid levels are above the current one</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_levels_below</span></code>(levels)</td>
<td>Informs the metric how many pyramid levels are below the current one</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_moving_image</span></code>(moving_image,&nbsp;…)</td>
<td>Sets the moving image being compared against the static one.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_static_image</span></code>(static_image,&nbsp;…)</td>
<td>Sets the static image being compared against the moving one.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_moving_image_dynamics</span></code>(…)</td>
<td>This is called by the optimizer just after setting the moving image</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_static_image_dynamics</span></code>(…)</td>
<td>This is called by the optimizer just after setting the static image.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.CCMetric.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dim</em>, <em>sigma_diff=2.0</em>, <em>radius=4</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.CCMetric.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalized Cross-Correlation Similarity metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dim</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (either 2 or 3)</span></dt>
<dd><p class="first last">the dimension of the image domain</p>
</dd>
<dt><strong>sigma_diff</strong> <span class="classifier-delimiter">:</span> <span class="classifier">the standard deviation of the Gaussian smoothing kernel to</span></dt>
<dd><p class="first last">be applied to the update field at each iteration</p>
</dd>
<dt><strong>radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">the radius of the squared (cubic) neighborhood at each voxel to be
considered to compute the cross correlation</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.CCMetric.compute_backward">
<code class="descname">compute_backward</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.CCMetric.compute_backward" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes one step bringing the static image towards the moving.</p>
<p>Computes the update displacement field to be used for registration of
the static image towards the moving image</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.CCMetric.compute_forward">
<code class="descname">compute_forward</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.CCMetric.compute_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes one step bringing the moving image towards the static.</p>
<p>Computes the update displacement field to be used for registration of
the moving image towards the static image</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.CCMetric.free_iteration">
<code class="descname">free_iteration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.CCMetric.free_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Frees the resources allocated during initialization</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.CCMetric.get_energy">
<code class="descname">get_energy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.CCMetric.get_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Numerical value assigned by this metric to the current image pair</p>
<p>Returns the Cross Correlation (data term) energy computed at the
largest iteration</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.CCMetric.initialize_iteration">
<code class="descname">initialize_iteration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.CCMetric.initialize_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the metric to compute one displacement field iteration.</p>
<p>Pre-computes the cross-correlation factors for efficient computation
of the gradient of the Cross Correlation w.r.t. the displacement field.
It also pre-computes the image gradients in the physical space by
re-orienting the gradients in the voxel space using the corresponding
affine transformations.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="diffeomorphicmap">
<h3><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap" title="dipy.workflows.align.DiffeomorphicMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiffeomorphicMap</span></code></a><a class="headerlink" href="#diffeomorphicmap" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.DiffeomorphicMap">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">DiffeomorphicMap</code><span class="sig-paren">(</span><em>dim</em>, <em>disp_shape</em>, <em>disp_grid2world=None</em>, <em>domain_shape=None</em>, <em>domain_grid2world=None</em>, <em>codomain_shape=None</em>, <em>codomain_grid2world=None</em>, <em>prealign=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.allocate" title="dipy.workflows.align.DiffeomorphicMap.allocate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">allocate</span></code></a>()</td>
<td>Creates a zero displacement field</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.compute_inversion_error" title="dipy.workflows.align.DiffeomorphicMap.compute_inversion_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_inversion_error</span></code></a>()</td>
<td>Inversion error of the displacement fields</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.expand_fields" title="dipy.workflows.align.DiffeomorphicMap.expand_fields"><code class="xref py py-obj docutils literal notranslate"><span class="pre">expand_fields</span></code></a>(expand_factors,&nbsp;new_shape)</td>
<td>Expands the displacement fields from current shape to new_shape</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.get_backward_field" title="dipy.workflows.align.DiffeomorphicMap.get_backward_field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_backward_field</span></code></a>()</td>
<td>Deformation field to transform an image in the backward direction</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.get_forward_field" title="dipy.workflows.align.DiffeomorphicMap.get_forward_field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_forward_field</span></code></a>()</td>
<td>Deformation field to transform an image in the forward direction</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.get_simplified_transform" title="dipy.workflows.align.DiffeomorphicMap.get_simplified_transform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_simplified_transform</span></code></a>()</td>
<td>Constructs a simplified version of this Diffeomorhic Map</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.interpret_matrix" title="dipy.workflows.align.DiffeomorphicMap.interpret_matrix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">interpret_matrix</span></code></a>(obj)</td>
<td>Try to interpret <cite>obj</cite> as a matrix</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.inverse" title="dipy.workflows.align.DiffeomorphicMap.inverse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">inverse</span></code></a>()</td>
<td>Inverse of this DiffeomorphicMap instance</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.shallow_copy" title="dipy.workflows.align.DiffeomorphicMap.shallow_copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">shallow_copy</span></code></a>()</td>
<td>Shallow copy of this DiffeomorphicMap instance</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.transform" title="dipy.workflows.align.DiffeomorphicMap.transform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform</span></code></a>(image[,&nbsp;interpolation,&nbsp;…])</td>
<td>Warps an image in the forward direction</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.transform_inverse" title="dipy.workflows.align.DiffeomorphicMap.transform_inverse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transform_inverse</span></code></a>(image[,&nbsp;interpolation,&nbsp;…])</td>
<td>Warps an image in the backward direction</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.DiffeomorphicMap.warp_endomorphism" title="dipy.workflows.align.DiffeomorphicMap.warp_endomorphism"><code class="xref py py-obj docutils literal notranslate"><span class="pre">warp_endomorphism</span></code></a>(phi)</td>
<td>Composition of this DiffeomorphicMap with a given endomorphism</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dim</em>, <em>disp_shape</em>, <em>disp_grid2world=None</em>, <em>domain_shape=None</em>, <em>domain_grid2world=None</em>, <em>codomain_shape=None</em>, <em>codomain_grid2world=None</em>, <em>prealign=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>DiffeomorphicMap</p>
<p>Implements a diffeomorphic transformation on the physical space. The
deformation fields encoding the direct and inverse transformations
share the same domain discretization (both the discretization grid
shape and voxel-to-space matrix). The input coordinates (physical
coordinates) are first aligned using prealign, and then displaced
using the corresponding vector field interpolated at the aligned
coordinates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dim</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, 2 or 3</span></dt>
<dd><p class="first last">the transformation’s dimension</p>
</dd>
<dt><strong>disp_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim,)</span></dt>
<dd><p class="first last">the number of slices (if 3D), rows and columns of the deformation
field’s discretization</p>
</dd>
<dt><strong>disp_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">the voxel-to-space transform between the def. fields</span></dt>
<dd><p class="first last">grid and space</p>
</dd>
<dt><strong>domain_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim,)</span></dt>
<dd><p class="first last">the number of slices (if 3D), rows and columns of the default
discretizatio of this map’s domain</p>
</dd>
<dt><strong>domain_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the default voxel-to-space transformation between this map’s
discretization and physical space</p>
</dd>
<dt><strong>codomain_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim,)</span></dt>
<dd><p class="first last">the number of slices (if 3D), rows and columns of the images that
are ‘normally’ warped using this transformation in the forward
direction (this will provide default transformation parameters to
warp images under this transformation). By default, we assume that
the inverse transformation is ‘normally’ used to warp images with
the same discretization and voxel-to-space transformation as the
deformation field grid.</p>
</dd>
<dt><strong>codomain_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the voxel-to-space transformation of images that are ‘normally’
warped using this transformation (in the forward direction).</p>
</dd>
<dt><strong>prealign</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the linear transformation to be applied to align input images to
the reference space before warping under the deformation field.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.allocate">
<code class="descname">allocate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.allocate" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a zero displacement field</p>
<p>Creates a zero displacement field (the identity transformation).</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.compute_inversion_error">
<code class="descname">compute_inversion_error</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.compute_inversion_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Inversion error of the displacement fields</p>
<p>Estimates the inversion error of the displacement fields by computing
statistics of the residual vectors obtained after composing the forward
and backward displacement fields.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>residual</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (R, C) or (S, R, C)</span></dt>
<dd><p class="first last">the displacement field resulting from composing the forward and
backward displacement fields of this transformation (the residual
should be zero for a perfect diffeomorphism)</p>
</dd>
<dt><strong>stats</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (3,)</span></dt>
<dd><p class="first last">statistics from the norms of the vectors of the residual
displacement field: maximum, mean and standard deviation</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Since the forward and backward displacement fields have the same
discretization, the final composition is given by</p>
<p>comp[i] = forward[ i + Dinv * backward[i]]</p>
<p>where Dinv is the space-to-grid transformation of the displacement
fields</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.expand_fields">
<code class="descname">expand_fields</code><span class="sig-paren">(</span><em>expand_factors</em>, <em>new_shape</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.expand_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Expands the displacement fields from current shape to new_shape</p>
<p>Up-samples the discretization of the displacement fields to be of
new_shape shape.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>expand_factors</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim,)</span></dt>
<dd><p class="first last">the factors scaling current spacings (voxel sizes) to spacings in
the expanded discretization.</p>
</dd>
<dt><strong>new_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim,)</span></dt>
<dd><p class="first last">the shape of the arrays holding the up-sampled discretization</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.get_backward_field">
<code class="descname">get_backward_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.get_backward_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Deformation field to transform an image in the backward direction</p>
<p>Returns the deformation field that must be used to warp an image under
this transformation in the backward direction (note the ‘is_inverse’
flag).</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.get_forward_field">
<code class="descname">get_forward_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.get_forward_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Deformation field to transform an image in the forward direction</p>
<p>Returns the deformation field that must be used to warp an image under
this transformation in the forward direction (note the ‘is_inverse’
flag).</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.get_simplified_transform">
<code class="descname">get_simplified_transform</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.get_simplified_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a simplified version of this Diffeomorhic Map</p>
<p>The simplified version incorporates the pre-align transform, as well as
the domain and codomain affine transforms into the displacement field.
The resulting transformation may be regarded as operating on the
image spaces given by the domain and codomain discretization. As a
result, self.prealign, self.disp_grid2world, self.domain_grid2world and
self.codomain affine will be None (denoting Identity) in the resulting
diffeomorphic map.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.interpret_matrix">
<code class="descname">interpret_matrix</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.interpret_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to interpret <cite>obj</cite> as a matrix</p>
<p>Some operations are performed faster if we know in advance if a matrix
is the identity (so we can skip the actual matrix-vector
multiplication). This function returns None if the given object
is None or the ‘identity’ string. It returns the same object if it is
a numpy array. It raises an exception otherwise.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>obj</strong> <span class="classifier-delimiter">:</span> <span class="classifier">object</span></dt>
<dd><p class="first last">any object</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>obj</strong> <span class="classifier-delimiter">:</span> <span class="classifier">object</span></dt>
<dd><p class="first last">the same object given as argument if <cite>obj</cite> is None or a numpy
array. None if <cite>obj</cite> is the ‘identity’ string.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.inverse">
<code class="descname">inverse</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.inverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse of this DiffeomorphicMap instance</p>
<p>Returns a diffeomorphic map object representing the inverse of this
transformation. The internal arrays are not copied but just referenced.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>inv</strong> <span class="classifier-delimiter">:</span> <span class="classifier">DiffeomorphicMap object</span></dt>
<dd><p class="first last">the inverse of this diffeomorphic map.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.shallow_copy">
<code class="descname">shallow_copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.shallow_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Shallow copy of this DiffeomorphicMap instance</p>
<p>Creates a shallow copy of this diffeomorphic map (the arrays are not
copied but just referenced)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>new_map</strong> <span class="classifier-delimiter">:</span> <span class="classifier">DiffeomorphicMap object</span></dt>
<dd><p class="first last">the shallow copy of this diffeomorphic map</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.transform">
<code class="descname">transform</code><span class="sig-paren">(</span><em>image</em>, <em>interpolation='linear'</em>, <em>image_world2grid=None</em>, <em>out_shape=None</em>, <em>out_grid2world=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Warps an image in the forward direction</p>
<p>Transforms the input image under this transformation in the forward
direction. It uses the “is_inverse” flag to switch between “forward”
and “backward” (if is_inverse is False, then transform(…) warps the
image forwards, else it warps the image backwards).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (s, r, c) if dim = 3 or (r, c) if dim = 2</span></dt>
<dd><p class="first last">the image to be warped under this transformation in the forward
direction</p>
</dd>
<dt><strong>interpolation</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, either ‘linear’ or ‘nearest’</span></dt>
<dd><p class="first last">the type of interpolation to be used for warping, either ‘linear’
(for k-linear interpolation) or ‘nearest’ for nearest neighbor</p>
</dd>
<dt><strong>image_world2grid</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the transformation bringing world (space) coordinates to voxel
coordinates of the image given as input</p>
</dd>
<dt><strong>out_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim,)</span></dt>
<dd><p class="first last">the number of slices, rows and columns of the desired warped image</p>
</dd>
<dt><strong>out_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">the transformation bringing voxel coordinates of the</span></dt>
<dd><p class="first last">warped image to physical space</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>warped</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape = out_shape or self.codomain_shape if None</span></dt>
<dd><p class="first last">the warped image under this transformation in the forward direction</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>See _warp_forward and _warp_backward documentation for further
information.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.transform_inverse">
<code class="descname">transform_inverse</code><span class="sig-paren">(</span><em>image</em>, <em>interpolation='linear'</em>, <em>image_world2grid=None</em>, <em>out_shape=None</em>, <em>out_grid2world=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.transform_inverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Warps an image in the backward direction</p>
<p>Transforms the input image under this transformation in the backward
direction. It uses the “is_inverse” flag to switch between “forward”
and “backward” (if is_inverse is False, then transform_inverse(…)
warps the image backwards, else it warps the image forwards)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (s, r, c) if dim = 3 or (r, c) if dim = 2</span></dt>
<dd><p class="first last">the image to be warped under this transformation in the forward
direction</p>
</dd>
<dt><strong>interpolation</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, either ‘linear’ or ‘nearest’</span></dt>
<dd><p class="first last">the type of interpolation to be used for warping, either ‘linear’
(for k-linear interpolation) or ‘nearest’ for nearest neighbor</p>
</dd>
<dt><strong>image_world2grid</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the transformation bringing world (space) coordinates to voxel
coordinates of the image given as input</p>
</dd>
<dt><strong>out_shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim,)</span></dt>
<dd><p class="first last">the number of slices, rows and columns of the desired warped image</p>
</dd>
<dt><strong>out_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">the transformation bringing voxel coordinates of the</span></dt>
<dd><p class="first last">warped image to physical space</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>warped</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape = out_shape or self.codomain_shape if None</span></dt>
<dd><p class="first last">warped image under this transformation in the backward direction</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>See _warp_forward and _warp_backward documentation for further
information.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.DiffeomorphicMap.warp_endomorphism">
<code class="descname">warp_endomorphism</code><span class="sig-paren">(</span><em>phi</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.DiffeomorphicMap.warp_endomorphism" title="Permalink to this definition">¶</a></dt>
<dd><p>Composition of this DiffeomorphicMap with a given endomorphism</p>
<p>Creates a new DiffeomorphicMap C with the same properties as self and
composes its displacement fields with phi’s corresponding fields.
The resulting diffeomorphism is of the form C(x) = phi(self(x)) with
inverse C^{-1}(y) = self^{-1}(phi^{-1}(y)). We assume that phi is an
endomorphism with the same discretization and domain affine as self
to ensure that the composition inherits self’s properties (we also
assume that the pre-aligning matrix of phi is None or identity).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>phi</strong> <span class="classifier-delimiter">:</span> <span class="classifier">DiffeomorphicMap object</span></dt>
<dd><p class="first last">the endomorphism to be warped by this diffeomorphic map</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>composition</strong> <span class="classifier-delimiter">:</span> <span class="classifier">the composition of this diffeomorphic map with the</span></dt>
<dd><p class="first last">endomorphism given as input</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The problem with our current representation of a DiffeomorphicMap is
that the set of Diffeomorphism that can be represented this way (a
pre-aligning matrix followed by a non-linear endomorphism given as a
displacement field) is not closed under the composition operation.</p>
<p>Supporting a general DiffeomorphicMap class, closed under composition,
may be extremely costly computationally, and the kind of
transformations we actually need for Avants’ mid-point algorithm (SyN)
are much simpler.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="emmetric">
<h3><a class="reference internal" href="#dipy.workflows.align.EMMetric" title="dipy.workflows.align.EMMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">EMMetric</span></code></a><a class="headerlink" href="#emmetric" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.EMMetric">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">EMMetric</code><span class="sig-paren">(</span><em>dim</em>, <em>smooth=1.0</em>, <em>inner_iter=5</em>, <em>q_levels=256</em>, <em>double_gradient=True</em>, <em>step_type='gauss_newton'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.align.html#dipy.align.metrics.SimilarityMetric" title="dipy.align.metrics.SimilarityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.align.metrics.SimilarityMetric</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric.compute_backward" title="dipy.workflows.align.EMMetric.compute_backward"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_backward</span></code></a>()</td>
<td>Computes one step bringing the static image towards the moving.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric.compute_demons_step" title="dipy.workflows.align.EMMetric.compute_demons_step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_demons_step</span></code></a>([forward_step])</td>
<td>Demons step for EM metric</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric.compute_forward" title="dipy.workflows.align.EMMetric.compute_forward"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_forward</span></code></a>()</td>
<td>Computes one step bringing the reference image towards the static.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric.compute_gauss_newton_step" title="dipy.workflows.align.EMMetric.compute_gauss_newton_step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_gauss_newton_step</span></code></a>([forward_step])</td>
<td>Computes the Gauss-Newton energy minimization step</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric.free_iteration" title="dipy.workflows.align.EMMetric.free_iteration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">free_iteration</span></code></a>()</td>
<td>Frees the resources allocated during initialization</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric.get_energy" title="dipy.workflows.align.EMMetric.get_energy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_energy</span></code></a>()</td>
<td>The numerical value assigned by this metric to the current image pair</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric.initialize_iteration" title="dipy.workflows.align.EMMetric.initialize_iteration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">initialize_iteration</span></code></a>()</td>
<td>Prepares the metric to compute one displacement field iteration.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_levels_above</span></code>(levels)</td>
<td>Informs the metric how many pyramid levels are above the current one</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_levels_below</span></code>(levels)</td>
<td>Informs the metric how many pyramid levels are below the current one</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_moving_image</span></code>(moving_image,&nbsp;…)</td>
<td>Sets the moving image being compared against the static one.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_static_image</span></code>(static_image,&nbsp;…)</td>
<td>Sets the static image being compared against the moving one.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric.use_moving_image_dynamics" title="dipy.workflows.align.EMMetric.use_moving_image_dynamics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_moving_image_dynamics</span></code></a>(…)</td>
<td>This is called by the optimizer just after setting the moving image.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.EMMetric.use_static_image_dynamics" title="dipy.workflows.align.EMMetric.use_static_image_dynamics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_static_image_dynamics</span></code></a>(…)</td>
<td>This is called by the optimizer just after setting the static image.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.EMMetric.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dim</em>, <em>smooth=1.0</em>, <em>inner_iter=5</em>, <em>q_levels=256</em>, <em>double_gradient=True</em>, <em>step_type='gauss_newton'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Expectation-Maximization Metric</p>
<p>Similarity metric based on the Expectation-Maximization algorithm to
handle multi-modal images. The transfer function is modeled as a set of
hidden random variables that are estimated at each iteration of the
algorithm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dim</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (either 2 or 3)</span></dt>
<dd><p class="first last">the dimension of the image domain</p>
</dd>
<dt><strong>smooth</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">smoothness parameter, the larger the value the smoother the
deformation field</p>
</dd>
<dt><strong>inner_iter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of iterations to be performed at each level of the multi-
resolution Gauss-Seidel optimization algorithm (this is not the
number of steps per Gaussian Pyramid level, that parameter must
be set for the optimizer, not the metric)</p>
</dd>
<dt><strong>q_levels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">number of quantization levels (equal to the number of hidden</span></dt>
<dd><p class="first last">variables in the EM algorithm)</p>
</dd>
<dt><strong>double_gradient</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">if True, the gradient of the expected static image under the moving
modality will be added to the gradient of the moving image,
similarly, the gradient of the expected moving image under the
static modality will be added to the gradient of the static image.</p>
</dd>
<dt><strong>step_type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string (‘gauss_newton’, ‘demons’)</span></dt>
<dd><p class="first last">the optimization schedule to be used in the multi-resolution
Gauss-Seidel optimization algorithm (not used if Demons Step is
selected)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.EMMetric.compute_backward">
<code class="descname">compute_backward</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.compute_backward" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes one step bringing the static image towards the moving.</p>
<p>Computes the update displacement field to be used for registration of
the static image towards the moving image</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.EMMetric.compute_demons_step">
<code class="descname">compute_demons_step</code><span class="sig-paren">(</span><em>forward_step=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.compute_demons_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Demons step for EM metric</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>forward_step</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">if True, computes the Demons step in the forward direction
(warping the moving towards the static image). If False,
computes the backward step (warping the static image to the
moving image)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>displacement</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (R, C, 2) or (S, R, C, 3)</span></dt>
<dd><p class="first last">the Demons step</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.EMMetric.compute_forward">
<code class="descname">compute_forward</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.compute_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes one step bringing the reference image towards the static.</p>
<p>Computes the forward update field to register the moving image towards
the static image in a gradient-based optimization algorithm</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.EMMetric.compute_gauss_newton_step">
<code class="descname">compute_gauss_newton_step</code><span class="sig-paren">(</span><em>forward_step=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.compute_gauss_newton_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the Gauss-Newton energy minimization step</p>
<p>Computes the Newton step to minimize this energy, i.e., minimizes the
linearized energy function with respect to the
regularized displacement field (this step does not require
post-smoothing, as opposed to the demons step, which does not include
regularization). To accelerate convergence we use the multi-grid
Gauss-Seidel algorithm proposed by Bruhn and Weickert et al [Bruhn05]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>forward_step</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">if True, computes the Newton step in the forward direction
(warping the moving towards the static image). If False,
computes the backward step (warping the static image to the
moving image)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>displacement</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (R, C, 2) or (S, R, C, 3)</span></dt>
<dd><p class="first last">the Newton step</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<dl class="docutils">
<dt>[Bruhn05] Andres Bruhn and Joachim Weickert, “Towards ultimate motion</dt>
<dd>estimation: combining highest accuracy with real-time
performance”, 10th IEEE International Conference on Computer
Vision, 2005. ICCV 2005.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.EMMetric.free_iteration">
<code class="descname">free_iteration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.free_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Frees the resources allocated during initialization</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.EMMetric.get_energy">
<code class="descname">get_energy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.get_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>The numerical value assigned by this metric to the current image pair</p>
<p>Returns the EM (data term) energy computed at the largest
iteration</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.EMMetric.initialize_iteration">
<code class="descname">initialize_iteration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.initialize_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the metric to compute one displacement field iteration.</p>
<p>Pre-computes the transfer functions (hidden random variables) and
variances of the estimators. Also pre-computes the gradient of both
input images. Note that once the images are transformed to the opposite
modality, the gradient of the transformed images can be used with the
gradient of the corresponding modality in the same fashion as
diff-demons does for mono-modality images. If the flag
self.use_double_gradient is True these gradients are averaged.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.EMMetric.use_moving_image_dynamics">
<code class="descname">use_moving_image_dynamics</code><span class="sig-paren">(</span><em>original_moving_image</em>, <em>transformation</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.use_moving_image_dynamics" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called by the optimizer just after setting the moving image.</p>
<p>EMMetric takes advantage of the image dynamics by computing the
current moving image mask from the original_moving_image mask (warped
by nearest neighbor interpolation)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>original_moving_image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (R, C) or (S, R, C)</span></dt>
<dd><p class="first last">the original moving image from which the current moving image was
generated, the current moving image is the one that was provided
via ‘set_moving_image(…)’, which may not be the same as the
original moving image but a warped version of it.</p>
</dd>
<dt><strong>transformation</strong> <span class="classifier-delimiter">:</span> <span class="classifier">DiffeomorphicMap object</span></dt>
<dd><p class="first last">the transformation that was applied to the original_moving_image
to generate the current moving image</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.EMMetric.use_static_image_dynamics">
<code class="descname">use_static_image_dynamics</code><span class="sig-paren">(</span><em>original_static_image</em>, <em>transformation</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.EMMetric.use_static_image_dynamics" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called by the optimizer just after setting the static image.</p>
<p>EMMetric takes advantage of the image dynamics by computing the
current static image mask from the originalstaticImage mask (warped
by nearest neighbor interpolation)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>original_static_image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (R, C) or (S, R, C)</span></dt>
<dd><p class="first last">the original static image from which the current static image was
generated, the current static image is the one that was provided
via ‘set_static_image(…)’, which may not be the same as the
original static image but a warped version of it (even the static
image changes during Symmetric Normalization, not only the moving
one).</p>
</dd>
<dt><strong>transformation</strong> <span class="classifier-delimiter">:</span> <span class="classifier">DiffeomorphicMap object</span></dt>
<dd><p class="first last">the transformation that was applied to the original_static_image
to generate the current static image</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="imageregistrationflow">
<h3><a class="reference internal" href="#dipy.workflows.align.ImageRegistrationFlow" title="dipy.workflows.align.ImageRegistrationFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageRegistrationFlow</span></code></a><a class="headerlink" href="#imageregistrationflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.ImageRegistrationFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">ImageRegistrationFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ImageRegistrationFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p>The registration workflow is organized as a collection of different
functions. The user can intend to use only one type of registration
(such as center of mass or rigid body registration only).</p>
<p>Alternatively, a registration can be done in a progressive manner.
For example, using affine registration with progressive set to ‘True’
will involve center of mass, translation, rigid body and full affine
registration. Whereas, when progressive is False the registration will
include only center of mass and affine registration. The progressive
registration will be slower but will improve the quality.</p>
<p>This can be controlled by using the progressive flag (True by default).</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.ImageRegistrationFlow.affine" title="dipy.workflows.align.ImageRegistrationFlow.affine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">affine</span></code></a>(static,&nbsp;static_grid2world,&nbsp;moving,&nbsp;…)</td>
<td>Function for full affine registration.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.ImageRegistrationFlow.center_of_mass" title="dipy.workflows.align.ImageRegistrationFlow.center_of_mass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">center_of_mass</span></code></a>(static,&nbsp;static_grid2world,&nbsp;…)</td>
<td>Function for the center of mass based image registration.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.ImageRegistrationFlow.perform_transformation" title="dipy.workflows.align.ImageRegistrationFlow.perform_transformation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">perform_transformation</span></code></a>(static,&nbsp;…)</td>
<td>Function to apply the transformation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.ImageRegistrationFlow.rigid" title="dipy.workflows.align.ImageRegistrationFlow.rigid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rigid</span></code></a>(static,&nbsp;static_grid2world,&nbsp;moving,&nbsp;…)</td>
<td>Function for rigid body based image registration.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.ImageRegistrationFlow.run" title="dipy.workflows.align.ImageRegistrationFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(static_img_files,&nbsp;moving_img_files[,&nbsp;…])</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.ImageRegistrationFlow.translate" title="dipy.workflows.align.ImageRegistrationFlow.translate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">translate</span></code></a>(static,&nbsp;static_grid2world,&nbsp;moving,&nbsp;…)</td>
<td>Function for translation based registration.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.ImageRegistrationFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ImageRegistrationFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.ImageRegistrationFlow.affine">
<code class="descname">affine</code><span class="sig-paren">(</span><em>static</em>, <em>static_grid2world</em>, <em>moving</em>, <em>moving_grid2world</em>, <em>affreg</em>, <em>params0</em>, <em>progressive</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ImageRegistrationFlow.affine" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for full affine registration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as reference during optimization.</p>
</dd>
<dt><strong>static_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the static
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as “moving” during optimization. It is
necessary to pre-align the moving image to ensure its domain
lies inside the domain of the deformation fields. This is assumed
to be accomplished by “pre-aligning” the moving image towards the
static using an affine transformation given by the
‘starting_affine’ matrix</p>
</dd>
<dt><strong>moving_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the moving
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>affreg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">An object of the image registration class.</span></dt>
<dd></dd>
<dt><strong>params0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">parameters from which to start the optimization. If None, the
optimization will start at the identity transform. n is the
number of parameters of the specified transformation.</p>
</dd>
<dt><strong>progressive</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">Flag to enable or disable the progressive registration. (defa
ult True)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.ImageRegistrationFlow.center_of_mass">
<code class="descname">center_of_mass</code><span class="sig-paren">(</span><em>static</em>, <em>static_grid2world</em>, <em>moving</em>, <em>moving_grid2world</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ImageRegistrationFlow.center_of_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for the center of mass based image registration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as reference during optimization.</p>
</dd>
<dt><strong>static_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the static
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as “moving” during optimization. It is
necessary to pre-align the moving image to ensure its domain
lies inside the domain of the deformation fields. This is assumed
to be accomplished by “pre-aligning” the moving image towards the
static using an affine transformation given by the
‘starting_affine’ matrix</p>
</dd>
<dt><strong>moving_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the moving
image. The default is None, implying the transform is the
identity.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.ImageRegistrationFlow.perform_transformation">
<code class="descname">perform_transformation</code><span class="sig-paren">(</span><em>static</em>, <em>static_grid2world</em>, <em>moving</em>, <em>moving_grid2world</em>, <em>affreg</em>, <em>params0</em>, <em>transform</em>, <em>affine</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ImageRegistrationFlow.perform_transformation" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to apply the transformation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as reference during optimization.</p>
</dd>
<dt><strong>static_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the static
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as “moving” during optimization. It is
necessary to pre-align the moving image to ensure its domain
lies inside the domain of the deformation fields. This is assumed
to be accomplished by “pre-aligning” the moving image towards the
static using an affine transformation given by the
‘starting_affine’ matrix</p>
</dd>
<dt><strong>moving_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the moving
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>affreg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">An object of the image registration class.</span></dt>
<dd></dd>
<dt><strong>params0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">parameters from which to start the optimization. If None, the
optimization will start at the identity transform. n is the
number of parameters of the specified transformation.</p>
</dd>
<dt><strong>transform</strong> <span class="classifier-delimiter">:</span> <span class="classifier">An instance of transform type.</span></dt>
<dd></dd>
<dt><strong>affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Affine matrix to be used as starting affine</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.ImageRegistrationFlow.rigid">
<code class="descname">rigid</code><span class="sig-paren">(</span><em>static</em>, <em>static_grid2world</em>, <em>moving</em>, <em>moving_grid2world</em>, <em>affreg</em>, <em>params0</em>, <em>progressive</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ImageRegistrationFlow.rigid" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for rigid body based image registration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as reference during optimization.</p>
</dd>
<dt><strong>static_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the static
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as “moving” during optimization. It is
necessary to pre-align the moving image to ensure its domain
lies inside the domain of the deformation fields. This is assumed
to be accomplished by “pre-aligning” the moving image towards the
static using an affine transformation given by the
‘starting_affine’ matrix</p>
</dd>
<dt><strong>moving_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the moving
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>affreg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">An object of the image registration class.</span></dt>
<dd></dd>
<dt><strong>params0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">parameters from which to start the optimization. If None, the
optimization will start at the identity transform. n is the
number of parameters of the specified transformation.</p>
</dd>
<dt><strong>progressive</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">Flag to enable or disable the progressive registration. (defa
ult True)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.ImageRegistrationFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>static_img_files, moving_img_files, transform='affine', nbins=32, sampling_prop=None, metric='mi', level_iters=[10000, 1000, 100], sigmas=[3.0, 1.0, 0.0], factors=[4, 2, 1], progressive=True, save_metric=False, out_dir='', out_moved='moved.nii.gz', out_affine='affine.txt', out_quality='quality_metric.txt'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ImageRegistrationFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static_img_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the static image file.</p>
</dd>
<dt><strong>moving_img_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the moving image file.</p>
</dd>
<dt><strong>transform</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>com: center of mass, trans: translation, rigid: rigid body</dt>
<dd><p class="first last">affine: full affine including translation, rotation, shearing and
scaling (default ‘affine’).</p>
</dd>
</dl>
</dd>
<dt><strong>nbins</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Number of bins to discretize the joint and marginal PDF</dt>
<dd><p class="first last">(default ‘32’).</p>
</dd>
</dl>
</dd>
<dt><strong>sampling_prop</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Number ([0-100]) of voxels for calculating the PDF.</dt>
<dd><p class="first last">‘None’ implies all voxels (default ‘None’).</p>
</dd>
</dl>
</dd>
<dt><strong>metric</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Similarity metric for gathering mutual information</dt>
<dd><p class="first last">(default ‘mi’ , Mutual Information metric).</p>
</dd>
</dl>
</dd>
<dt><strong>level_iters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable int, optional</span></dt>
<dd><dl class="first last docutils">
<dt>The number of iterations at each scale of the scale space.</dt>
<dd><p class="first"><cite>level_iters[0]</cite> corresponds to the coarsest scale,
<cite>level_iters[-1]</cite> the finest, where n is the length of the</p>
<blockquote class="last">
<div><p>sequence. By default, a 3-level scale space with iterations
sequence equal to [10000, 1000, 100] will be used.</p>
</div></blockquote>
</dd>
</dl>
</dd>
<dt><strong>sigmas</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable floats, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Custom smoothing parameter to build the scale space (one parameter</dt>
<dd><p class="first last">for each scale). By default, the sequence of sigmas will be
[3, 1, 0].</p>
</dd>
</dl>
</dd>
<dt><strong>factors</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable floats, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Custom scale factors to build the scale space (one factor for each</dt>
<dd><p class="first last">scale). By default, the sequence of factors will be [4, 2, 1].</p>
</dd>
</dl>
</dd>
<dt><strong>progressive</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span></dt>
<dd><p class="first last">Enable/Disable the progressive registration (default ‘True’).</p>
</dd>
<dt><strong>save_metric</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span></dt>
<dd><p class="first last">If true, quality assessment metric are saved in
‘quality_metric.txt’ (default ‘False’).</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Directory to save the transformed image and the affine matrix</dt>
<dd><p class="first last">(default ‘’).</p>
</dd>
</dl>
</dd>
<dt><strong>out_moved</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Name for the saved transformed image</dt>
<dd><p class="first last">(default ‘moved.nii.gz’).</p>
</dd>
</dl>
</dd>
<dt><strong>out_affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Name for the saved affine matrix</dt>
<dd><p class="first last">(default ‘affine.txt’).</p>
</dd>
</dl>
</dd>
<dt><strong>out_quality</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Name of the file containing the saved quality</dt>
<dd><p class="first last">metric (default ‘quality_metric.txt’).</p>
</dd>
</dl>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.ImageRegistrationFlow.translate">
<code class="descname">translate</code><span class="sig-paren">(</span><em>static</em>, <em>static_grid2world</em>, <em>moving</em>, <em>moving_grid2world</em>, <em>affreg</em>, <em>params0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ImageRegistrationFlow.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for translation based registration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as reference during optimization.</p>
</dd>
<dt><strong>static_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the static
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D  array</span></dt>
<dd><p class="first last">the image to be used as “moving” during optimization. It is
necessary to pre-align the moving image to ensure its domain
lies inside the domain of the deformation fields. This is assumed
to be accomplished by “pre-aligning” the moving image towards the
static using an affine transformation given by the
‘starting_affine’ matrix</p>
</dd>
<dt><strong>moving_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated with the moving
image. The default is None, implying the transform is the
identity.</p>
</dd>
<dt><strong>affreg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">An object of the image registration class.</span></dt>
<dd></dd>
<dt><strong>params0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">parameters from which to start the optimization. If None, the
optimization will start at the identity transform. n is the
number of parameters of the specified transformation.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="mutualinformationmetric">
<h3><a class="reference internal" href="#dipy.workflows.align.MutualInformationMetric" title="dipy.workflows.align.MutualInformationMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">MutualInformationMetric</span></code></a><a class="headerlink" href="#mutualinformationmetric" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.MutualInformationMetric">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">MutualInformationMetric</code><span class="sig-paren">(</span><em>nbins=32</em>, <em>sampling_proportion=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.MutualInformationMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.MutualInformationMetric.distance" title="dipy.workflows.align.MutualInformationMetric.distance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">distance</span></code></a>(params)</td>
<td>Numeric value of the negative Mutual Information</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.MutualInformationMetric.distance_and_gradient" title="dipy.workflows.align.MutualInformationMetric.distance_and_gradient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">distance_and_gradient</span></code></a>(params)</td>
<td>Numeric value of the metric and its gradient at given parameters</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.MutualInformationMetric.gradient" title="dipy.workflows.align.MutualInformationMetric.gradient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gradient</span></code></a>(params)</td>
<td>Numeric value of the metric’s gradient at the given parameters</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.MutualInformationMetric.setup" title="dipy.workflows.align.MutualInformationMetric.setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup</span></code></a>(transform,&nbsp;static,&nbsp;moving[,&nbsp;…])</td>
<td>Prepares the metric to compute intensity densities and gradients</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.MutualInformationMetric.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>nbins=32</em>, <em>sampling_proportion=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.MutualInformationMetric.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes an instance of the Mutual Information metric</p>
<p>This class implements the methods required by Optimizer to drive the
registration process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>nbins</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">the number of bins to be used for computing the intensity
histograms. The default is 32.</p>
</dd>
<dt><strong>sampling_proportion</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None or float in interval (0, 1], optional</span></dt>
<dd><p class="first last">There are two types of sampling: dense and sparse. Dense sampling
uses all voxels for estimating the (joint and marginal) intensity
histograms, while sparse sampling uses a subset of them. If
<cite>sampling_proportion</cite> is None, then dense sampling is
used. If <cite>sampling_proportion</cite> is a floating point value in (0,1]
then sparse sampling is used, where <cite>sampling_proportion</cite>
specifies the proportion of voxels to be used. The default is
None.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Since we use linear interpolation, images are not, in general,
differentiable at exact voxel coordinates, but they are differentiable
between voxel coordinates. When using sparse sampling, selected voxels
are slightly moved by adding a small random displacement within one
voxel to prevent sampling points from being located exactly at voxel
coordinates. When using dense sampling, this random displacement is
not applied.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.MutualInformationMetric.distance">
<code class="descname">distance</code><span class="sig-paren">(</span><em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.MutualInformationMetric.distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Numeric value of the negative Mutual Information</p>
<p>We need to change the sign so we can use standard minimization
algorithms.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">the parameter vector of the transform currently used by the metric
(the transform name is provided when self.setup is called), n is
the number of parameters of the transform</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>neg_mi</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the negative mutual information of the input images after
transforming the moving image by the currently set transform
with <cite>params</cite> parameters</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.MutualInformationMetric.distance_and_gradient">
<code class="descname">distance_and_gradient</code><span class="sig-paren">(</span><em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.MutualInformationMetric.distance_and_gradient" title="Permalink to this definition">¶</a></dt>
<dd><p>Numeric value of the metric and its gradient at given parameters</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">the parameter vector of the transform currently used by the metric
(the transform name is provided when self.setup is called), n is
the number of parameters of the transform</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>neg_mi</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the negative mutual information of the input images after
transforming the moving image by the currently set transform
with <cite>params</cite> parameters</p>
</dd>
<dt><strong>neg_mi_grad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">the gradient of the negative Mutual Information</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.MutualInformationMetric.gradient">
<code class="descname">gradient</code><span class="sig-paren">(</span><em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.MutualInformationMetric.gradient" title="Permalink to this definition">¶</a></dt>
<dd><p>Numeric value of the metric’s gradient at the given parameters</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">the parameter vector of the transform currently used by the metric
(the transform name is provided when self.setup is called), n is
the number of parameters of the transform</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>grad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (n,)</span></dt>
<dd><p class="first last">the gradient of the negative Mutual Information</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.MutualInformationMetric.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>transform</em>, <em>static</em>, <em>moving</em>, <em>static_grid2world=None</em>, <em>moving_grid2world=None</em>, <em>starting_affine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.MutualInformationMetric.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the metric to compute intensity densities and gradients</p>
<p>The histograms will be setup to compute probability densities of
intensities within the minimum and maximum values of <cite>static</cite> and
<cite>moving</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>transform: instance of Transform</strong></dt>
<dd><p class="first last">the transformation with respect to whose parameters the gradient
must be computed</p>
</dd>
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (S, R, C) or (R, C)</span></dt>
<dd><p class="first last">static image</p>
</dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (S’, R’, C’) or (R’, C’)</span></dt>
<dd><p class="first last">moving image. The dimensions of the static (S, R, C) and moving
(S’, R’, C’) images do not need to be the same.</p>
</dd>
<dt><strong>static_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the grid-to-space transform of the static image. The default is
None, implying the transform is the identity.</p>
</dd>
<dt><strong>moving_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array (dim+1, dim+1)</span></dt>
<dd><p class="first last">the grid-to-space transform of the moving image. The default is
None, implying the spacing along all axes is 1.</p>
</dd>
<dt><strong>starting_affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1), optional</span></dt>
<dd><p class="first last">the pre-aligning matrix (an affine transform) that roughly aligns
the moving image towards the static image. If None, no
pre-alignment is performed. If a pre-alignment matrix is available,
it is recommended to provide this matrix as <cite>starting_affine</cite>
instead of manually transforming the moving image to reduce
interpolation artifacts. The default is None, implying no
pre-alignment is performed.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="resliceflow">
<h3><a class="reference internal" href="#dipy.workflows.align.ResliceFlow" title="dipy.workflows.align.ResliceFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResliceFlow</span></code></a><a class="headerlink" href="#resliceflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.ResliceFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">ResliceFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ResliceFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.ResliceFlow.get_short_name" title="dipy.workflows.align.ResliceFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.ResliceFlow.run" title="dipy.workflows.align.ResliceFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files,&nbsp;new_vox_size[,&nbsp;order,&nbsp;…])</td>
<td>Reslice data with new voxel resolution defined by <code class="docutils literal notranslate"><span class="pre">new_vox_sz</span></code></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.ResliceFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ResliceFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.align.ResliceFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ResliceFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.ResliceFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>new_vox_size</em>, <em>order=1</em>, <em>mode='constant'</em>, <em>cval=0</em>, <em>num_processes=1</em>, <em>out_dir=''</em>, <em>out_resliced='resliced.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.ResliceFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Reslice data with new voxel resolution defined by <code class="docutils literal notranslate"><span class="pre">new_vox_sz</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input volumes. This path may contain wildcards to
process multiple inputs at once.</p>
</dd>
<dt><strong>new_vox_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable float</span></dt>
<dd><p class="first last">new voxel size</p>
</dd>
<dt><strong>order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">order of interpolation, from 0 to 5, for resampling/reslicing,
0 nearest interpolation, 1 trilinear etc.. if you don’t want any
smoothing 0 is the option you need (default 1)</p>
</dd>
<dt><strong>mode</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Points outside the boundaries of the input are filled according
to the given mode ‘constant’, ‘nearest’, ‘reflect’ or ‘wrap’
(default ‘constant’)</p>
</dd>
<dt><strong>cval</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Value used for points outside the boundaries of the input if
mode=’constant’ (default 0)</p>
</dd>
<dt><strong>num_processes</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Split the calculation to a pool of children processes. This only
applies to 4D <cite>data</cite> arrays. If a positive integer then it defines
the size of the multiprocessing pool that will be used. If 0, then
the size of the pool will equal the number of cores available.
(default 1)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_resliced</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the resliced dataset to be saved
(default ‘resliced.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="rigidtransform3d">
<h3><a class="reference internal" href="#dipy.workflows.align.RigidTransform3D" title="dipy.workflows.align.RigidTransform3D"><code class="xref py py-class docutils literal notranslate"><span class="pre">RigidTransform3D</span></code></a><a class="headerlink" href="#rigidtransform3d" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.RigidTransform3D">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">RigidTransform3D</code><a class="headerlink" href="#dipy.workflows.align.RigidTransform3D" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.align.transforms.Transform</span></code></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_identity_parameters</span></code></td>
<td>Parameter values corresponding to the identity transform</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">jacobian</span></code></td>
<td>Jacobian function of this transform</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">param_to_matrix</span></code></td>
<td>Matrix representation of this transform with the given parameters</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="74%" />
<col width="26%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get_dim</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>get_number_of_parameters</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.RigidTransform3D.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.RigidTransform3D.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Rigid transform in 3D (rotation + translation)
The parameter vector theta of length 6 is interpreted as follows:
theta[0] : rotation about the x axis
theta[1] : rotation about the y axis
theta[2] : rotation about the z axis
theta[3] : translation along the x axis
theta[4] : translation along the y axis
theta[5] : translation along the z axis</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ssdmetric">
<h3><a class="reference internal" href="#dipy.workflows.align.SSDMetric" title="dipy.workflows.align.SSDMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSDMetric</span></code></a><a class="headerlink" href="#ssdmetric" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.SSDMetric">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">SSDMetric</code><span class="sig-paren">(</span><em>dim</em>, <em>smooth=4</em>, <em>inner_iter=10</em>, <em>step_type='demons'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SSDMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.align.html#dipy.align.metrics.SimilarityMetric" title="dipy.align.metrics.SimilarityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.align.metrics.SimilarityMetric</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.SSDMetric.compute_backward" title="dipy.workflows.align.SSDMetric.compute_backward"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_backward</span></code></a>()</td>
<td>Computes one step bringing the static image towards the moving.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.SSDMetric.compute_demons_step" title="dipy.workflows.align.SSDMetric.compute_demons_step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_demons_step</span></code></a>([forward_step])</td>
<td>Demons step for SSD metric</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.SSDMetric.compute_forward" title="dipy.workflows.align.SSDMetric.compute_forward"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_forward</span></code></a>()</td>
<td>Computes one step bringing the reference image towards the static.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.SSDMetric.compute_gauss_newton_step" title="dipy.workflows.align.SSDMetric.compute_gauss_newton_step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_gauss_newton_step</span></code></a>([forward_step])</td>
<td>Computes the Gauss-Newton energy minimization step</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.SSDMetric.free_iteration" title="dipy.workflows.align.SSDMetric.free_iteration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">free_iteration</span></code></a>()</td>
<td>Nothing to free for the SSD metric</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.SSDMetric.get_energy" title="dipy.workflows.align.SSDMetric.get_energy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_energy</span></code></a>()</td>
<td>The numerical value assigned by this metric to the current image pair</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.SSDMetric.initialize_iteration" title="dipy.workflows.align.SSDMetric.initialize_iteration"><code class="xref py py-obj docutils literal notranslate"><span class="pre">initialize_iteration</span></code></a>()</td>
<td>Prepares the metric to compute one displacement field iteration.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_levels_above</span></code>(levels)</td>
<td>Informs the metric how many pyramid levels are above the current one</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_levels_below</span></code>(levels)</td>
<td>Informs the metric how many pyramid levels are below the current one</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_moving_image</span></code>(moving_image,&nbsp;…)</td>
<td>Sets the moving image being compared against the static one.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_static_image</span></code>(static_image,&nbsp;…)</td>
<td>Sets the static image being compared against the moving one.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_moving_image_dynamics</span></code>(…)</td>
<td>This is called by the optimizer just after setting the moving image</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_static_image_dynamics</span></code>(…)</td>
<td>This is called by the optimizer just after setting the static image.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.SSDMetric.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dim</em>, <em>smooth=4</em>, <em>inner_iter=10</em>, <em>step_type='demons'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SSDMetric.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sum of Squared Differences (SSD) Metric</p>
<p>Similarity metric for (mono-modal) nonlinear image registration defined
by the sum of squared differences (SSD)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dim</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (either 2 or 3)</span></dt>
<dd><p class="first last">the dimension of the image domain</p>
</dd>
<dt><strong>smooth</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">smoothness parameter, the larger the value the smoother the
deformation field</p>
</dd>
<dt><strong>inner_iter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of iterations to be performed at each level of the multi-
resolution Gauss-Seidel optimization algorithm (this is not the
number of steps per Gaussian Pyramid level, that parameter must
be set for the optimizer, not the metric)</p>
</dd>
<dt><strong>step_type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">the displacement field step to be computed when ‘compute_forward’
and ‘compute_backward’ are called. Either ‘demons’ or
‘gauss_newton’</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SSDMetric.compute_backward">
<code class="descname">compute_backward</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SSDMetric.compute_backward" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes one step bringing the static image towards the moving.</p>
<p>Computes the update displacement field to be used for registration of
the static image towards the moving image</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SSDMetric.compute_demons_step">
<code class="descname">compute_demons_step</code><span class="sig-paren">(</span><em>forward_step=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SSDMetric.compute_demons_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Demons step for SSD metric</p>
<p>Computes the demons step proposed by Vercauteren et al.[Vercauteren09]
for the SSD metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>forward_step</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">if True, computes the Demons step in the forward direction
(warping the moving towards the static image). If False,
computes the backward step (warping the static image to the
moving image)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>displacement</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (R, C, 2) or (S, R, C, 3)</span></dt>
<dd><p class="first last">the Demons step</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<dl class="docutils">
<dt>[Vercauteren09] Tom Vercauteren, Xavier Pennec, Aymeric Perchant,</dt>
<dd>Nicholas Ayache, “Diffeomorphic Demons: Efficient
Non-parametric Image Registration”, Neuroimage 2009</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SSDMetric.compute_forward">
<code class="descname">compute_forward</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SSDMetric.compute_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes one step bringing the reference image towards the static.</p>
<p>Computes the update displacement field to be used for registration of
the moving image towards the static image</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SSDMetric.compute_gauss_newton_step">
<code class="descname">compute_gauss_newton_step</code><span class="sig-paren">(</span><em>forward_step=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SSDMetric.compute_gauss_newton_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the Gauss-Newton energy minimization step</p>
<p>Minimizes the linearized energy function (Newton step) defined by the
sum of squared differences of corresponding pixels of the input images
with respect to the displacement field.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>forward_step</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">if True, computes the Newton step in the forward direction
(warping the moving towards the static image). If False,
computes the backward step (warping the static image to the
moving image)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>displacement</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape = static_image.shape + (3,)</span></dt>
<dd><p class="first last">if forward_step==True, the forward SSD Gauss-Newton step,
else, the backward step</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SSDMetric.free_iteration">
<code class="descname">free_iteration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SSDMetric.free_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Nothing to free for the SSD metric</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SSDMetric.get_energy">
<code class="descname">get_energy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SSDMetric.get_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>The numerical value assigned by this metric to the current image pair</p>
<p>Returns the Sum of Squared Differences (data term) energy computed at
the largest iteration</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SSDMetric.initialize_iteration">
<code class="descname">initialize_iteration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SSDMetric.initialize_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares the metric to compute one displacement field iteration.</p>
<p>Pre-computes the gradient of the input images to be used in the
computation of the forward and backward steps.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="slrwithqbxflow">
<h3><a class="reference internal" href="#dipy.workflows.align.SlrWithQbxFlow" title="dipy.workflows.align.SlrWithQbxFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">SlrWithQbxFlow</span></code></a><a class="headerlink" href="#slrwithqbxflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.SlrWithQbxFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">SlrWithQbxFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SlrWithQbxFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.SlrWithQbxFlow.get_short_name" title="dipy.workflows.align.SlrWithQbxFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.SlrWithQbxFlow.run" title="dipy.workflows.align.SlrWithQbxFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(static_files,&nbsp;moving_files[,&nbsp;x0,&nbsp;…])</td>
<td>Streamline-based linear registration.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.SlrWithQbxFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SlrWithQbxFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.align.SlrWithQbxFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SlrWithQbxFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SlrWithQbxFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>static_files, moving_files, x0='affine', rm_small_clusters=50, qbx_thr=[40, 30, 20, 15], num_threads=None, greater_than=50, less_than=250, nb_pts=20, progressive=True, out_dir='', out_moved='moved.trk', out_affine='affine.txt', out_stat_centroids='static_centroids.trk', out_moving_centroids='moving_centroids.trk', out_moved_centroids='moved_centroids.trk'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SlrWithQbxFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Streamline-based linear registration.</p>
<p>For efficiency we apply the registration on cluster centroids and
remove small clusters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd></dd>
<dt><strong>moving_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd></dd>
<dt><strong>x0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">rigid, similarity or affine transformation model (default affine)</p>
</dd>
<dt><strong>rm_small_clusters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Remove clusters that have less than <cite>rm_small_clusters</cite>
(default 50)</p>
</dd>
<dt><strong>qbx_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable int, optional</span></dt>
<dd><p class="first last">Thresholds for QuickBundlesX (default [40, 30, 20, 15])</p>
</dd>
<dt><strong>num_threads</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Number of threads. If None (default) then all available threads
will be used. Only metrics using OpenMP will use this variable.</p>
</dd>
<dt><strong>greater_than</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Keep streamlines that have length greater than
this value (default 50)</p>
</dd>
<dt><strong>less_than</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Keep streamlines have length less than this value (default 250)</p>
</dd>
<dt><strong>np_pts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Number of points for discretizing each streamline (default 20)</p>
</dd>
<dt><strong>progressive</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span></dt>
<dd><p class="first last">(default True)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_moved</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Filename of moved tractogram (default ‘moved.trk’)</p>
</dd>
<dt><strong>out_affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Filename of affine for SLR transformation (default ‘affine.txt’)</p>
</dd>
<dt><strong>out_stat_centroids</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Filename of static centroids (default ‘static_centroids.trk’)</p>
</dd>
<dt><strong>out_moving_centroids</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Filename of moving centroids (default ‘moving_centroids.trk’)</p>
</dd>
<dt><strong>out_moved_centroids</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Filename of moved centroids (default ‘moved_centroids.trk’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The order of operations is the following. First short or long
streamlines are removed. Second the tractogram or a random selection
of the tractogram is clustered with QuickBundlesX. Then SLR
<a class="reference internal" href="#r63af61b7286e-garyfallidis15" id="id13">[Garyfallidis15]</a> is applied.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r63af61b7286e-garyfallidis15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Garyfallidis15]</td><td><em>(<a class="fn-backref" href="#id13">1</a>, <a class="fn-backref" href="#id14">2</a>)</em> Garyfallidis et al. “Robust and efficient linear</td></tr>
</tbody>
</table>
<p>registration of white-matter fascicles in the space of
streamlines”, NeuroImage, 117, 124–140, 2015</p>
<table class="docutils citation" frame="void" id="r63af61b7286e-garyfallidis14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id15">[Garyfallidis14]</a></td><td>Garyfallidis et al., “Direct native-space fiber</td></tr>
</tbody>
</table>
<p>bundle alignment for group comparisons”, ISMRM, 2014.</p>
<table class="docutils citation" frame="void" id="r63af61b7286e-garyfallidis17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id16">[Garyfallidis17]</a></td><td>Garyfallidis et al. Recognition of white matter</td></tr>
</tbody>
</table>
<p>bundles using local and global streamline-based registration
and clustering, Neuroimage, 2017.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="symmetricdiffeomorphicregistration">
<h3><a class="reference internal" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration" title="dipy.workflows.align.SymmetricDiffeomorphicRegistration"><code class="xref py py-class docutils literal notranslate"><span class="pre">SymmetricDiffeomorphicRegistration</span></code></a><a class="headerlink" href="#symmetricdiffeomorphicregistration" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.SymmetricDiffeomorphicRegistration">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">SymmetricDiffeomorphicRegistration</code><span class="sig-paren">(</span><em>metric</em>, <em>level_iters=None</em>, <em>step_length=0.25</em>, <em>ss_sigma_factor=0.2</em>, <em>opt_tol=1e-05</em>, <em>inv_iter=20</em>, <em>inv_tol=0.001</em>, <em>callback=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.align.html#dipy.align.imwarp.DiffeomorphicRegistration" title="dipy.align.imwarp.DiffeomorphicRegistration"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.align.imwarp.DiffeomorphicRegistration</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration.get_map" title="dipy.workflows.align.SymmetricDiffeomorphicRegistration.get_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_map</span></code></a>()</td>
<td>Returns the resulting diffeomorphic map Returns the DiffeomorphicMap registering the moving image towards the static image.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration.optimize" title="dipy.workflows.align.SymmetricDiffeomorphicRegistration.optimize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">optimize</span></code></a>(static,&nbsp;moving[,&nbsp;…])</td>
<td>Starts the optimization</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_level_iters</span></code>(level_iters)</td>
<td>Sets the number of iterations at each pyramid level</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration.update" title="dipy.workflows.align.SymmetricDiffeomorphicRegistration.update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update</span></code></a>(current_displacement,&nbsp;…)</td>
<td>Composition of the current displacement field with the given field</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.SymmetricDiffeomorphicRegistration.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>metric</em>, <em>level_iters=None</em>, <em>step_length=0.25</em>, <em>ss_sigma_factor=0.2</em>, <em>opt_tol=1e-05</em>, <em>inv_iter=20</em>, <em>inv_tol=0.001</em>, <em>callback=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Symmetric Diffeomorphic Registration (SyN) Algorithm</p>
<p>Performs the multi-resolution optimization algorithm for non-linear
registration using a given similarity metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>metric</strong> <span class="classifier-delimiter">:</span> <span class="classifier">SimilarityMetric object</span></dt>
<dd><p class="first last">the metric to be optimized</p>
</dd>
<dt><strong>level_iters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of int</span></dt>
<dd><p class="first last">the number of iterations at each level of the Gaussian Pyramid (the
length of the list defines the number of pyramid levels to be
used)</p>
</dd>
<dt><strong>opt_tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the optimization will stop when the estimated derivative of the
energy profile w.r.t. time falls below this threshold</p>
</dd>
<dt><strong>inv_iter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">the number of iterations to be performed by the displacement field
inversion algorithm</p>
</dd>
<dt><strong>step_length</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the length of the maximum displacement vector of the update
displacement field at each iteration</p>
</dd>
<dt><strong>ss_sigma_factor</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">parameter of the scale-space smoothing kernel. For example, the
std. dev. of the kernel will be factor*(2^i) in the isotropic case
where i = 0, 1, …, n_scales is the scale</p>
</dd>
<dt><strong>inv_tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the displacement field inversion algorithm will stop iterating
when the inversion error falls below this threshold</p>
</dd>
<dt><strong>callback</strong> <span class="classifier-delimiter">:</span> <span class="classifier">function(SymmetricDiffeomorphicRegistration)</span></dt>
<dd><p class="first last">a function receiving a SymmetricDiffeomorphicRegistration object
to be called after each iteration (this optimizer will call this
function passing self as parameter)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SymmetricDiffeomorphicRegistration.get_map">
<code class="descname">get_map</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration.get_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the resulting diffeomorphic map
Returns the DiffeomorphicMap registering the moving image towards
the static image.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SymmetricDiffeomorphicRegistration.optimize">
<code class="descname">optimize</code><span class="sig-paren">(</span><em>static</em>, <em>moving</em>, <em>static_grid2world=None</em>, <em>moving_grid2world=None</em>, <em>prealign=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the optimization</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (S, R, C) or (R, C)</span></dt>
<dd><p class="first last">the image to be used as reference during optimization. The
displacement fields will have the same discretization as the static
image.</p>
</dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (S, R, C) or (R, C)</span></dt>
<dd><p class="first last">the image to be used as “moving” during optimization. Since the
deformation fields’ discretization is the same as the static image,
it is necessary to pre-align the moving image to ensure its domain
lies inside the domain of the deformation fields. This is assumed
to be accomplished by “pre-aligning” the moving image towards the
static using an affine transformation given by the ‘prealign’
matrix</p>
</dd>
<dt><strong>static_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated to the static image</p>
</dd>
<dt><strong>moving_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the voxel-to-space transformation associated to the moving image</p>
</dd>
<dt><strong>prealign</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the affine transformation (operating on the physical space)
pre-aligning the moving image towards the static</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static_to_ref</strong> <span class="classifier-delimiter">:</span> <span class="classifier">DiffeomorphicMap object</span></dt>
<dd><p class="first last">the diffeomorphic map that brings the moving image towards the
static one in the forward direction (i.e. by calling
static_to_ref.transform) and the static image towards the
moving one in the backward direction (i.e. by calling
static_to_ref.transform_inverse).</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SymmetricDiffeomorphicRegistration.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>current_displacement</em>, <em>new_displacement</em>, <em>disp_world2grid</em>, <em>time_scaling</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SymmetricDiffeomorphicRegistration.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Composition of the current displacement field with the given field</p>
<p>Interpolates new displacement at the locations defined by
current_displacement. Equivalently, computes the composition C of the
given displacement fields as C(x) = B(A(x)), where A is
current_displacement and B is new_displacement. This function is
intended to be used with deformation fields of the same sampling
(e.g. to be called by a registration algorithm).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>current_displacement</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (R’, C’, 2) or (S’, R’, C’, 3)</span></dt>
<dd><p class="first last">the displacement field defining where to interpolate
new_displacement</p>
</dd>
<dt><strong>new_displacement</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (R, C, 2) or (S, R, C, 3)</span></dt>
<dd><p class="first last">the displacement field to be warped by current_displacement</p>
</dd>
<dt><strong>disp_world2grid</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the space-to-grid transform associated with the displacements’
grid (we assume that both displacements are discretized over the
same grid)</p>
</dd>
<dt><strong>time_scaling</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">scaling factor applied to d2. The effect may be interpreted as
moving d1 displacements along a factor (<cite>time_scaling</cite>) of d2.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>updated</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (the same as new_displacement)</span></dt>
<dd><p class="first last">the warped displacement field</p>
</dd>
<dt><strong>mean_norm</strong> <span class="classifier-delimiter">:</span> <span class="classifier">the mean norm of all vectors in current_displacement</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="synregistrationflow">
<h3><a class="reference internal" href="#dipy.workflows.align.SynRegistrationFlow" title="dipy.workflows.align.SynRegistrationFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">SynRegistrationFlow</span></code></a><a class="headerlink" href="#synregistrationflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.SynRegistrationFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">SynRegistrationFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SynRegistrationFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.SynRegistrationFlow.run" title="dipy.workflows.align.SynRegistrationFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(static_image_files,&nbsp;moving_image_files)</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.SynRegistrationFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SynRegistrationFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.SynRegistrationFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>static_image_files, moving_image_files, prealign_file='', inv_static=False, level_iters=[10, 10, 5], metric='cc', mopt_sigma_diff=2.0, mopt_radius=4, mopt_smooth=0.0, mopt_inner_iter=0.0, mopt_q_levels=256, mopt_double_gradient=True, mopt_step_type='', step_length=0.25, ss_sigma_factor=0.2, opt_tol=1e-05, inv_iter=20, inv_tol=0.001, out_dir='', out_warped='warped_moved.nii.gz', out_inv_static='inc_static.nii.gz', out_field='displacement_field.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.SynRegistrationFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static_image_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of the static image file.</p>
</dd>
<dt><strong>moving_image_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the moving image file.</p>
</dd>
<dt><strong>prealign_file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>The text file containing pre alignment information via an</dt>
<dd><p class="first last">affine matrix.</p>
</dd>
</dl>
</dd>
<dt><strong>inv_static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span></dt>
<dd><p class="first last">Apply the inverse mapping to the static image (default ‘False’).</p>
</dd>
<dt><strong>level_iters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable int, optional</span></dt>
<dd><dl class="first last docutils">
<dt>The number of iterations at each level of the gaussian pyramid.</dt>
<dd><p class="first last">By default, a 3-level scale space with iterations
sequence equal to [10, 10, 5] will be used. The 0-th
level corresponds to the finest resolution.</p>
</dd>
</dl>
</dd>
<dt><strong>metric</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">The metric to be used (Default cc, ‘Cross Correlation metric’).
metric available: cc (Cross Correlation), ssd (Sum Squared
Difference), em (Expectation-Maximization).</p>
</dd>
<dt><strong>mopt_sigma_diff</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Metric option applied on Cross correlation (CC).
The standard deviation of the Gaussian smoothing kernel to be
applied to the update field at each iteration (default 2.0)</p>
</dd>
<dt><strong>mopt_radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Metric option applied on Cross correlation (CC).
the radius of the squared (cubic) neighborhood at each voxel to
be considered to compute the cross correlation. (default 4)</p>
</dd>
<dt><strong>mopt_smooth</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Metric option applied on Sum Squared Difference (SSD) and
Expectation Maximization (EM). Smoothness parameter, the
larger the value the smoother the deformation field.
(default 1.0 for EM, 4.0 for SSD)</p>
</dd>
<dt><strong>mopt_inner_iter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Metric option applied on Sum Squared Difference (SSD) and
Expectation Maximization (EM). This is number of iterations to be
performed at each level of the multi-resolution Gauss-Seidel
optimization algorithm (this is not the number of steps per
Gaussian Pyramid level, that parameter must be set for the
optimizer, not the metric). Default 5 for EM, 10 for SSD.</p>
</dd>
<dt><strong>mopt_q_levels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Metric option applied on Expectation Maximization (EM).
Number of quantization levels (Default: 256 for EM)</p>
</dd>
<dt><strong>mopt_double_gradient</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Metric option applied on Expectation Maximization (EM).
if True, the gradient of the expected static image under the moving
modality will be added to the gradient of the moving image,
similarly, the gradient of the expected moving image under the
static modality will be added to the gradient of the static image.</p>
</dd>
<dt><strong>mopt_step_type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Metric option applied on Sum Squared Difference (SSD) and
Expectation Maximization (EM). The optimization schedule to be
used in the multi-resolution Gauss-Seidel optimization algorithm
(not used if Demons Step is selected). Possible value:
(‘gauss_newton’, ‘demons’). default: ‘gauss_newton’ for EM,
‘demons’ for SSD.</p>
</dd>
<dt><strong>step_length</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><dl class="first last docutils">
<dt>the length of the maximum displacement vector of the update</dt>
<dd><p class="first last">displacement field at each iteration.</p>
</dd>
</dl>
</dd>
<dt><strong>ss_sigma_factor</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><dl class="first last docutils">
<dt>parameter of the scale-space smoothing kernel. For example, the</dt>
<dd><p class="first last">std. dev. of the kernel will be factor*(2^i) in the isotropic case
where i = 0, 1, …, n_scales is the scale.</p>
</dd>
</dl>
</dd>
<dt><strong>opt_tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><dl class="first last docutils">
<dt>the optimization will stop when the estimated derivative of the</dt>
<dd><p class="first last">energy profile w.r.t. time falls below this threshold.</p>
</dd>
</dl>
</dd>
<dt><strong>inv_iter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><dl class="first last docutils">
<dt>the number of iterations to be performed by the displacement field</dt>
<dd><p class="first last">inversion algorithm.</p>
</dd>
</dl>
</dd>
<dt><strong>inv_tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><dl class="first last docutils">
<dt>the displacement field inversion algorithm will stop iterating</dt>
<dd><p class="first last">when the inversion error falls below this threshold.</p>
</dd>
</dl>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Directory to save the transformed files (default ‘’).</p>
</dd>
<dt><strong>out_warped</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the warped file. (default ‘warped_moved.nii.gz’).</p>
</dd>
<dt><strong>out_inv_static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Name of the file to save the static image after applying the</dt>
<dd><p class="first last">inverse mapping (default ‘inv_static.nii.gz’).</p>
</dd>
</dl>
</dd>
<dt><strong>out_field</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the file to save the diffeomorphic map.
(default ‘displacement_field.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="translationtransform3d">
<h3><a class="reference internal" href="#dipy.workflows.align.TranslationTransform3D" title="dipy.workflows.align.TranslationTransform3D"><code class="xref py py-class docutils literal notranslate"><span class="pre">TranslationTransform3D</span></code></a><a class="headerlink" href="#translationtransform3d" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.TranslationTransform3D">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">TranslationTransform3D</code><a class="headerlink" href="#dipy.workflows.align.TranslationTransform3D" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.align.transforms.Transform</span></code></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_identity_parameters</span></code></td>
<td>Parameter values corresponding to the identity transform</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">jacobian</span></code></td>
<td>Jacobian function of this transform</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">param_to_matrix</span></code></td>
<td>Matrix representation of this transform with the given parameters</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="74%" />
<col width="26%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get_dim</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>get_number_of_parameters</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.TranslationTransform3D.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.TranslationTransform3D.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Translation transform in 3D</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="workflow">
<h3><a class="reference internal" href="#dipy.workflows.align.Workflow" title="dipy.workflows.align.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.align.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.align.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.Workflow.get_io_iterator" title="dipy.workflows.align.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.Workflow.get_short_name" title="dipy.workflows.align.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.Workflow.get_sub_runs" title="dipy.workflows.align.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.align.Workflow.manage_output_overwrite" title="dipy.workflows.align.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.align.Workflow.run" title="dipy.workflows.align.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.align.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.align.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.align.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="check-dimensions">
<h3>check_dimensions<a class="headerlink" href="#check-dimensions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.align.check_dimensions">
<code class="descclassname">dipy.workflows.align.</code><code class="descname">check_dimensions</code><span class="sig-paren">(</span><em>static</em>, <em>moving</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.check_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the dimensions of the input images.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D or 3D array</span></dt>
<dd><p class="first last">the image to be used as reference during optimization.</p>
</dd>
<dt><strong>moving: 2D or 3D array</strong></dt>
<dd><p class="first last">the image to be used as “moving” during optimization. It is
necessary to pre-align the moving image to ensure its domain
lies inside the domain of the deformation fields. This is assumed
to be accomplished by “pre-aligning” the moving image towards the
static using an affine transformation given by the
‘starting_affine’ matrix</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="load-nifti">
<h3>load_nifti<a class="headerlink" href="#load-nifti" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.align.load_nifti">
<code class="descclassname">dipy.workflows.align.</code><code class="descname">load_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>return_img=False</em>, <em>return_voxsize=False</em>, <em>return_coords=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.load_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="load-trk">
<h3>load_trk<a class="headerlink" href="#load-trk" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.align.load_trk">
<code class="descclassname">dipy.workflows.align.</code><code class="descname">load_trk</code><span class="sig-paren">(</span><em>filename</em>, <em>lazy_load=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.load_trk" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads tractogram files (<a href="#id17"><span class="problematic" id="id18">*</span></a>.tck)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">input trk filename</p>
</dd>
<dt><strong>lazy_load</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{False, True}, optional</span></dt>
<dd><p class="first last">If True, load streamlines in a lazy manner i.e. they will not be kept
in memory and only be loaded when needed.
Otherwise, load all streamlines in memory.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2D arrays</span></dt>
<dd><p class="first last">Each 2D array represents a sequence of 3D points (points, 3).</p>
</dd>
<dt><strong>hdr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">header from a trk file</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="reslice">
<h3>reslice<a class="headerlink" href="#reslice" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.align.reslice">
<code class="descclassname">dipy.workflows.align.</code><code class="descname">reslice</code><span class="sig-paren">(</span><em>data</em>, <em>affine</em>, <em>zooms</em>, <em>new_zooms</em>, <em>order=1</em>, <em>mode='constant'</em>, <em>cval=0</em>, <em>num_processes=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.reslice" title="Permalink to this definition">¶</a></dt>
<dd><p>Reslice data with new voxel resolution defined by <code class="docutils literal notranslate"><span class="pre">new_zooms</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (I,J,K) or (I,J,K,N)</span></dt>
<dd><p class="first last">3d volume or 4d volume with datasets</p>
</dd>
<dt><strong>affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (4,4)</span></dt>
<dd><p class="first last">mapping from voxel coordinates to world coordinates</p>
</dd>
<dt><strong>zooms</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple, shape (3,)</span></dt>
<dd><p class="first last">voxel size for (i,j,k) dimensions</p>
</dd>
<dt><strong>new_zooms</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple, shape (3,)</span></dt>
<dd><p class="first last">new voxel size for (i,j,k) after resampling</p>
</dd>
<dt><strong>order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, from 0 to 5</span></dt>
<dd><p class="first last">order of interpolation for resampling/reslicing,
0 nearest interpolation, 1 trilinear etc..
if you don’t want any smoothing 0 is the option you need.</p>
</dd>
<dt><strong>mode</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string (‘constant’, ‘nearest’, ‘reflect’ or ‘wrap’)</span></dt>
<dd><p class="first last">Points outside the boundaries of the input are filled according
to the given mode.</p>
</dd>
<dt><strong>cval</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Value used for points outside the boundaries of the input if
mode=’constant’.</p>
</dd>
<dt><strong>num_processes</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Split the calculation to a pool of children processes. This only
applies to 4D <cite>data</cite> arrays. If a positive integer then it defines
the size of the multiprocessing pool that will be used. If 0, then
the size of the pool will equal the number of cores available.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>data2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (I,J,K) or (I,J,K,N)</span></dt>
<dd><p class="first last">datasets resampled into isotropic voxel size</p>
</dd>
<dt><strong>affine2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (4,4)</span></dt>
<dd><p class="first last">new affine for the resampled image</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nibabel</span> <span class="k">as</span> <span class="nn">nib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.align.reslice</span> <span class="k">import</span> <span class="n">reslice</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="k">import</span> <span class="n">get_fnames</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fimg</span> <span class="o">=</span> <span class="n">get_fnames</span><span class="p">(</span><span class="s1">&#39;aniso_vox&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fimg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">58</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">affine</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">affine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zooms</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">get_zooms</span><span class="p">()[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zooms</span>
<span class="go">(4.0, 4.0, 5.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_zooms</span> <span class="o">=</span> <span class="p">(</span><span class="mf">3.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">3.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_zooms</span>
<span class="go">(3.0, 3.0, 3.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data2</span><span class="p">,</span> <span class="n">affine2</span> <span class="o">=</span> <span class="n">reslice</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">affine</span><span class="p">,</span> <span class="n">zooms</span><span class="p">,</span> <span class="n">new_zooms</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data2</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">77</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="save-nifti">
<h3>save_nifti<a class="headerlink" href="#save-nifti" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.align.save_nifti">
<code class="descclassname">dipy.workflows.align.</code><code class="descname">save_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>data</em>, <em>affine</em>, <em>hdr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.save_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="save-qa-metric">
<h3>save_qa_metric<a class="headerlink" href="#save-qa-metric" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.align.save_qa_metric">
<code class="descclassname">dipy.workflows.align.</code><code class="descname">save_qa_metric</code><span class="sig-paren">(</span><em>fname</em>, <em>xopt</em>, <em>fopt</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.save_qa_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Save Quality Assurance metrics.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>fname: string</strong></dt>
<dd><p class="first last">File name to save the metric values.</p>
</dd>
<dt><strong>xopt: numpy array</strong></dt>
<dd><p class="first last">The metric containing the
optimal parameters for
image registration.</p>
</dd>
<dt><strong>fopt: int</strong></dt>
<dd><p class="first last">The distance between the registered images.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="slr-with-qbx">
<h3>slr_with_qbx<a class="headerlink" href="#slr-with-qbx" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.align.slr_with_qbx">
<code class="descclassname">dipy.workflows.align.</code><code class="descname">slr_with_qbx</code><span class="sig-paren">(</span><em>static, moving, x0='affine', rm_small_clusters=50, maxiter=100, select_random=None, verbose=False, greater_than=50, less_than=250, qbx_thr=[40, 30, 20, 15], nb_pts=20, progressive=True, rng=None, num_threads=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.slr_with_qbx" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function for registering large tractograms.</p>
<p>For efficiency we apply the registration on cluster centroids and remove
small clusters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd></dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd></dd>
<dt><strong>x0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">rigid, similarity or affine transformation model (default affine)</p>
</dd>
<dt><strong>rm_small_clusters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Remove clusters that have less than <cite>rm_small_clusters</cite> (default 50)</p>
</dd>
<dt><strong>select_random</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">If not None select a random number of streamlines to apply clustering
Default None.</p>
</dd>
<dt><strong>verbose</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool,</span></dt>
<dd><p class="first last">If True then information about the optimization is shown.</p>
</dd>
<dt><strong>greater_than</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Keep streamlines that have length greater than
this value (default 50)</p>
</dd>
<dt><strong>less_than</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Keep streamlines have length less than this value (default 250)</p>
</dd>
<dt><strong>qbx_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable int</span></dt>
<dd><p class="first last">Thresholds for QuickBundlesX (default [40, 30, 20, 15])</p>
</dd>
<dt><strong>np_pts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Number of points for discretizing each streamline (default 20)</p>
</dd>
<dt><strong>progressive</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span></dt>
<dd><p class="first last">(default True)</p>
</dd>
<dt><strong>rng</strong> <span class="classifier-delimiter">:</span> <span class="classifier">RandomState</span></dt>
<dd><p class="first last">If None creates RandomState in function.</p>
</dd>
<dt><strong>num_threads</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of threads. If None (default) then all available threads
will be used. Only metrics using OpenMP will use this variable.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The order of operations is the following. First short or long streamlines
are removed. Second the tractogram or a random selection of the tractogram
is clustered with QuickBundles. Then SLR <a class="reference internal" href="#r890e584ccf15-garyfallidis15" id="id19">[Garyfallidis15]</a> is applied.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r890e584ccf15-garyfallidis15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Garyfallidis15]</td><td><em>(<a class="fn-backref" href="#id19">1</a>, <a class="fn-backref" href="#id20">2</a>)</em> Garyfallidis et al. “Robust and efficient linear</td></tr>
</tbody>
</table>
<p>registration of white-matter fascicles in the space of streamlines”,
NeuroImage, 117, 124–140, 2015
.. [R890e584ccf15-Garyfallidis14] Garyfallidis et al., “Direct native-space fiber</p>
<blockquote>
<div>bundle alignment for group comparisons”, ISMRM, 2014.</div></blockquote>
<table class="docutils citation" frame="void" id="r890e584ccf15-garyfallidis17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id22">[Garyfallidis17]</a></td><td>Garyfallidis et al. Recognition of white matter</td></tr>
</tbody>
</table>
<p>bundles using local and global streamline-based registration and
clustering, Neuroimage, 2017.</p>
</dd></dl>

</div>
<div class="section" id="transform-centers-of-mass">
<h3>transform_centers_of_mass<a class="headerlink" href="#transform-centers-of-mass" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.align.transform_centers_of_mass">
<code class="descclassname">dipy.workflows.align.</code><code class="descname">transform_centers_of_mass</code><span class="sig-paren">(</span><em>static</em>, <em>static_grid2world</em>, <em>moving</em>, <em>moving_grid2world</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.transform_centers_of_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>Transformation to align the center of mass of the input images</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>static</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (S, R, C)</span></dt>
<dd><p class="first last">static image</p>
</dd>
<dt><strong>static_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the voxel-to-space transformation of the static image</p>
</dd>
<dt><strong>moving</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (S, R, C)</span></dt>
<dd><p class="first last">moving image</p>
</dd>
<dt><strong>moving_grid2world</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, shape (dim+1, dim+1)</span></dt>
<dd><p class="first last">the voxel-to-space transformation of the moving image</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>affine_map</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of AffineMap</span></dt>
<dd><p class="first last">the affine transformation (translation only, in this case) aligning
the center of mass of the moving image towards the one of the static
image</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="transform-streamlines">
<h3>transform_streamlines<a class="headerlink" href="#transform-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.align.transform_streamlines">
<code class="descclassname">dipy.workflows.align.</code><code class="descname">transform_streamlines</code><span class="sig-paren">(</span><em>streamlines</em>, <em>mat</em>, <em>in_place=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.align.transform_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply affine transformation to streamlines</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd><p class="first last">Streamlines object</p>
</dd>
<dt><strong>mat</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, (4, 4)</span></dt>
<dd><p class="first last">transformation matrix</p>
</dd>
<dt><strong>in_place</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True then change data in place.
Be careful changes input streamlines.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>new_streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd><p class="first last">Sequence transformed 2D ndarrays of shape[-1]==3</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="introspectiveargumentparser">
<h3><a class="reference internal" href="#dipy.workflows.base.IntrospectiveArgumentParser" title="dipy.workflows.base.IntrospectiveArgumentParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntrospectiveArgumentParser</span></code></a><a class="headerlink" href="#introspectiveargumentparser" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser">
<em class="property">class </em><code class="descclassname">dipy.workflows.base.</code><code class="descname">IntrospectiveArgumentParser</code><span class="sig-paren">(</span><em>prog=None</em>, <em>usage=None</em>, <em>description=None</em>, <em>epilog=None</em>, <em>parents=[]</em>, <em>formatter_class=&lt;class 'argparse.RawTextHelpFormatter'&gt;</em>, <em>prefix_chars='-'</em>, <em>fromfile_prefix_chars=None</em>, <em>argument_default=None</em>, <em>conflict_handler='resolve'</em>, <em>add_help=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>optional_parameters</strong></dt>
<dd></dd>
<dt><strong>output_parameters</strong></dt>
<dd></dd>
<dt><strong>positional_parameters</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_argument</span></code>(dest,&nbsp;…[,&nbsp;name,&nbsp;name])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.base.IntrospectiveArgumentParser.add_sub_flow_args" title="dipy.workflows.base.IntrospectiveArgumentParser.add_sub_flow_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_sub_flow_args</span></code></a>(sub_flows)</td>
<td>Take an array of workflow objects and use introspection to extract the parameters, types and docstrings of their run method.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_subparsers</span></code>(**kwargs)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.base.IntrospectiveArgumentParser.add_workflow" title="dipy.workflows.base.IntrospectiveArgumentParser.add_workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_workflow</span></code></a>(workflow)</td>
<td>Take a workflow object and use introspection to extract the parameters, types and docstrings of its run method.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">error</span></code>(message)</td>
<td>Prints a usage message incorporating the message to stderr and exits.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">exit</span></code>([status,&nbsp;message])</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">format_usage</span></code>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.base.IntrospectiveArgumentParser.get_flow_args" title="dipy.workflows.base.IntrospectiveArgumentParser.get_flow_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_flow_args</span></code></a>([args,&nbsp;namespace])</td>
<td>Returns the parsed arguments as a dictionary that will be used as a workflow’s run method arguments.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_args</span></code>([args,&nbsp;namespace])</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_usage</span></code>([file])</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">register</span></code>(registry_name,&nbsp;value,&nbsp;object)</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_defaults</span></code>(**kwargs)</td>
<td></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="76%" />
<col width="24%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>add_argument_group</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>add_description</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>add_epilogue</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>add_mutually_exclusive_group</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>convert_arg_line_to_args</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>format_help</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>get_default</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>parse_known_args</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>print_help</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>show_argument</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>update_argument</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>prog=None</em>, <em>usage=None</em>, <em>description=None</em>, <em>epilog=None</em>, <em>parents=[]</em>, <em>formatter_class=&lt;class 'argparse.RawTextHelpFormatter'&gt;</em>, <em>prefix_chars='-'</em>, <em>fromfile_prefix_chars=None</em>, <em>argument_default=None</em>, <em>conflict_handler='resolve'</em>, <em>add_help=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Augmenting the argument parser to allow automatic creation of
arguments from workflows</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>prog</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None</span></dt>
<dd><p class="first last">The name of the program (default: sys.argv[0])</p>
</dd>
<dt><strong>usage</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None</span></dt>
<dd><p class="first last">A usage message (default: auto-generated from arguments)</p>
</dd>
<dt><strong>description</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">A description of what the program does</p>
</dd>
<dt><strong>epilog</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Text following the argument descriptions</p>
</dd>
<dt><strong>parents</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">Parsers whose arguments should be copied into this one</p>
</dd>
<dt><strong>formatter_class</strong> <span class="classifier-delimiter">:</span> <span class="classifier">obj</span></dt>
<dd><p class="first last">HelpFormatter class for printing help messages</p>
</dd>
<dt><strong>prefix_chars</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Characters that prefix optional arguments</p>
</dd>
<dt><strong>fromfile_prefix_chars</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None</span></dt>
<dd><p class="first last">Characters that prefix files containing additional arguments</p>
</dd>
<dt><strong>argument_default</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None</span></dt>
<dd><p class="first last">The default value for all arguments</p>
</dd>
<dt><strong>conflict_handler</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">String indicating how to handle conflicts</p>
</dd>
<dt><strong>add_help</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Add a -h/-help option</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.add_description">
<code class="descname">add_description</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.add_description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.add_epilogue">
<code class="descname">add_epilogue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.add_epilogue" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.add_sub_flow_args">
<code class="descname">add_sub_flow_args</code><span class="sig-paren">(</span><em>sub_flows</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.add_sub_flow_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Take an array of workflow objects and use introspection to extract
the parameters, types and docstrings of their run method. Only the
optional input parameters are extracted for these as they are treated
as sub workflows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>sub_flows</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array of dipy.workflows.workflow.Workflow</span></dt>
<dd><p class="first last">Workflows to inspect.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sub_flow_optionals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dictionary of all sub workflow optional parameters</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.add_workflow">
<code class="descname">add_workflow</code><span class="sig-paren">(</span><em>workflow</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.add_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a workflow object and use introspection to extract the parameters,
types and docstrings of its run method. Then add these parameters
to the current arparser’s own params to parse. If the workflow is of
type combined_workflow, the optional input parameters of its
sub workflows will also be added.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>workflow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dipy.workflows.workflow.Workflow</span></dt>
<dd><p class="first last">Workflow from which to infer parameters.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sub_flow_optionals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dictionary of all sub workflow optional parameters</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.get_flow_args">
<code class="descname">get_flow_args</code><span class="sig-paren">(</span><em>args=None</em>, <em>namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.get_flow_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the parsed arguments as a dictionary that will be used
as a workflow’s run method arguments.</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.optional_parameters">
<code class="descname">optional_parameters</code><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.optional_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.output_parameters">
<code class="descname">output_parameters</code><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.output_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.positional_parameters">
<code class="descname">positional_parameters</code><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.positional_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.show_argument">
<code class="descname">show_argument</code><span class="sig-paren">(</span><em>dest</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.show_argument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.base.IntrospectiveArgumentParser.update_argument">
<code class="descname">update_argument</code><span class="sig-paren">(</span><em>*args</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.IntrospectiveArgumentParser.update_argument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="numpydocstring">
<h3><a class="reference internal" href="#dipy.workflows.base.NumpyDocString" title="dipy.workflows.base.NumpyDocString"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumpyDocString</span></code></a><a class="headerlink" href="#numpydocstring" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.base.NumpyDocString">
<em class="property">class </em><code class="descclassname">dipy.workflows.base.</code><code class="descname">NumpyDocString</code><span class="sig-paren">(</span><em>docstring</em>, <em>config={}</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.NumpyDocString" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="dipy.workflows.base.NumpyDocString.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>docstring</em>, <em>config={}</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.NumpyDocString.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="get-args-default">
<h3>get_args_default<a class="headerlink" href="#get-args-default" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.base.get_args_default">
<code class="descclassname">dipy.workflows.base.</code><code class="descname">get_args_default</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.base.get_args_default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="combinedworkflow">
<h3><a class="reference internal" href="#dipy.workflows.combined_workflow.CombinedWorkflow" title="dipy.workflows.combined_workflow.CombinedWorkflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">CombinedWorkflow</span></code></a><a class="headerlink" href="#combinedworkflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.combined_workflow.CombinedWorkflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.combined_workflow.</code><code class="descname">CombinedWorkflow</code><span class="sig-paren">(</span><em>output_strategy='append'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.CombinedWorkflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.CombinedWorkflow.get_optionals" title="dipy.workflows.combined_workflow.CombinedWorkflow.get_optionals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_optionals</span></code></a>(flow,&nbsp;**kwargs)</td>
<td>Returns the sub flow’s optional arguments merged with those passed as params in kwargs.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.CombinedWorkflow.get_sub_runs" title="dipy.workflows.combined_workflow.CombinedWorkflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Returns a list of tuples (sub flow name, sub flow run method, sub flow short name) to be used in the sub flow parameters extraction.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.CombinedWorkflow.run_sub_flow" title="dipy.workflows.combined_workflow.CombinedWorkflow.run_sub_flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_sub_flow</span></code></a>(flow,&nbsp;*args,&nbsp;**kwargs)</td>
<td>Runs the sub flow with the optional parameters passed via the command line.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.CombinedWorkflow.set_sub_flows_optionals" title="dipy.workflows.combined_workflow.CombinedWorkflow.set_sub_flows_optionals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_sub_flows_optionals</span></code></a>(opts)</td>
<td>Sets the self._optionals variable with all sub flow arguments that were passed in the commandline.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.combined_workflow.CombinedWorkflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='append'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.CombinedWorkflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow that combines multiple workflows.
The workflow combined together are referred as sub flows in this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.combined_workflow.CombinedWorkflow.get_optionals">
<code class="descname">get_optionals</code><span class="sig-paren">(</span><em>flow</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.CombinedWorkflow.get_optionals" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the sub flow’s optional arguments merged with those passed
as params in kwargs.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.combined_workflow.CombinedWorkflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.CombinedWorkflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of tuples
(sub flow name, sub flow run method, sub flow short name)
to be used in the sub flow parameters extraction.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.combined_workflow.CombinedWorkflow.run_sub_flow">
<code class="descname">run_sub_flow</code><span class="sig-paren">(</span><em>flow</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.CombinedWorkflow.run_sub_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the sub flow with the optional parameters passed via the
command line. This is a convenience method to make sub flow running
more intuitive on the concrete CombinedWorkflow side.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.combined_workflow.CombinedWorkflow.set_sub_flows_optionals">
<code class="descname">set_sub_flows_optionals</code><span class="sig-paren">(</span><em>opts</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.CombinedWorkflow.set_sub_flows_optionals" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the self._optionals variable with all sub flow arguments
that were passed in the commandline.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id23">
<h3><a class="reference internal" href="#dipy.workflows.combined_workflow.Workflow" title="dipy.workflows.combined_workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.combined_workflow.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.combined_workflow.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.Workflow.get_io_iterator" title="dipy.workflows.combined_workflow.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.Workflow.get_short_name" title="dipy.workflows.combined_workflow.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.Workflow.get_sub_runs" title="dipy.workflows.combined_workflow.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.Workflow.manage_output_overwrite" title="dipy.workflows.combined_workflow.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.combined_workflow.Workflow.run" title="dipy.workflows.combined_workflow.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.combined_workflow.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.combined_workflow.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.combined_workflow.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.combined_workflow.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.combined_workflow.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.combined_workflow.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="iteritems">
<h3>iteritems<a class="headerlink" href="#iteritems" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.combined_workflow.iteritems">
<code class="descclassname">dipy.workflows.combined_workflow.</code><code class="descname">iteritems</code><span class="sig-paren">(</span><em>d</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.combined_workflow.iteritems" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the (key, value) pairs of a dictionary.</p>
</dd></dl>

</div>
<div class="section" id="nlmeansflow">
<h3><a class="reference internal" href="#dipy.workflows.denoise.NLMeansFlow" title="dipy.workflows.denoise.NLMeansFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">NLMeansFlow</span></code></a><a class="headerlink" href="#nlmeansflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.denoise.NLMeansFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.denoise.</code><code class="descname">NLMeansFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.NLMeansFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.denoise.NLMeansFlow.get_short_name" title="dipy.workflows.denoise.NLMeansFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.denoise.NLMeansFlow.run" title="dipy.workflows.denoise.NLMeansFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files[,&nbsp;sigma,&nbsp;out_dir,&nbsp;out_denoised])</td>
<td>Workflow wrapping the nlmeans denoising method.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.denoise.NLMeansFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.NLMeansFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.denoise.NLMeansFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.NLMeansFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.denoise.NLMeansFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>sigma=0</em>, <em>out_dir=''</em>, <em>out_denoised='dwi_nlmeans.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.NLMeansFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow wrapping the nlmeans denoising method.</p>
<p>It applies nlmeans denoise on each file found by ‘globing’
<code class="docutils literal notranslate"><span class="pre">input_files</span></code> and saves the results in a directory specified by
<code class="docutils literal notranslate"><span class="pre">out_dir</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input volumes. This path may contain wildcards to
process multiple inputs at once.</p>
</dd>
<dt><strong>sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Sigma parameter to pass to the nlmeans algorithm
(default: auto estimation).</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_denoised</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the resuting denoised volume (default: dwi_nlmeans.nii.gz)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id24">
<h3><a class="reference internal" href="#dipy.workflows.denoise.Workflow" title="dipy.workflows.denoise.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.denoise.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.denoise.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.denoise.Workflow.get_io_iterator" title="dipy.workflows.denoise.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.denoise.Workflow.get_short_name" title="dipy.workflows.denoise.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.denoise.Workflow.get_sub_runs" title="dipy.workflows.denoise.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.denoise.Workflow.manage_output_overwrite" title="dipy.workflows.denoise.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.denoise.Workflow.run" title="dipy.workflows.denoise.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.denoise.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.denoise.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.denoise.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.denoise.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.denoise.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.denoise.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="estimate-sigma">
<h3>estimate_sigma<a class="headerlink" href="#estimate-sigma" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.denoise.estimate_sigma">
<code class="descclassname">dipy.workflows.denoise.</code><code class="descname">estimate_sigma</code><span class="sig-paren">(</span><em>arr</em>, <em>disable_background_masking=False</em>, <em>N=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.estimate_sigma" title="Permalink to this definition">¶</a></dt>
<dd><p>Standard deviation estimation from local patches</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">3D or 4D ndarray</span></dt>
<dd><p class="first last">The array to be estimated</p>
</dd>
<dt><strong>disable_background_masking</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, default False</span></dt>
<dd><p class="first last">If True, uses all voxels for the estimation, otherwise, only non-zeros
voxels are used. Useful if the background is masked by the scanner.</p>
</dd>
<dt><strong>N</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, default 0</span></dt>
<dd><p class="first last">Number of coils of the receiver array. Use N = 1 in case of a SENSE
reconstruction (Philips scanners) or the number of coils for a GRAPPA
reconstruction (Siemens and GE). Use 0 to disable the correction factor,
as for example if the noise is Gaussian distributed. See [1] for more
information.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">standard deviation of the noise, one estimation per volume.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id25">
<h3>load_nifti<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.denoise.load_nifti">
<code class="descclassname">dipy.workflows.denoise.</code><code class="descname">load_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>return_img=False</em>, <em>return_voxsize=False</em>, <em>return_coords=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.load_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="nlmeans">
<h3>nlmeans<a class="headerlink" href="#nlmeans" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.denoise.nlmeans">
<code class="descclassname">dipy.workflows.denoise.</code><code class="descname">nlmeans</code><span class="sig-paren">(</span><em>arr</em>, <em>sigma</em>, <em>mask=None</em>, <em>patch_radius=1</em>, <em>block_radius=5</em>, <em>rician=True</em>, <em>num_threads=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.nlmeans" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-local means for denoising 3D and 4D images</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">3D or 4D ndarray</span></dt>
<dd><p class="first last">The array to be denoised</p>
</dd>
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">3D ndarray</span></dt>
<dd></dd>
<dt><strong>sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float or 3D array</span></dt>
<dd><p class="first last">standard deviation of the noise estimated from the data</p>
</dd>
<dt><strong>patch_radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">patch size is <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">x</span> <span class="pre">patch_radius</span> <span class="pre">+</span> <span class="pre">1</span></code>. Default is 1.</p>
</dd>
<dt><strong>block_radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">block size is <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">x</span> <span class="pre">block_radius</span> <span class="pre">+</span> <span class="pre">1</span></code>. Default is 5.</p>
</dd>
<dt><strong>rician</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">If True the noise is estimated as Rician, otherwise Gaussian noise
is assumed.</p>
</dd>
<dt><strong>num_threads</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of threads. If None (default) then all available threads
will be used (all CPU cores).</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>denoised_arr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">the denoised <code class="docutils literal notranslate"><span class="pre">arr</span></code> which has the same shape as <code class="docutils literal notranslate"><span class="pre">arr</span></code>.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r133aa7056047-descoteaux08" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id26">[Descoteaux08]</a></td><td>Descoteaux, Maxim and Wiest-Daessle`, Nicolas and Prima,
Sylvain and Barillot, Christian and Deriche, Rachid
Impact of Rician Adapted Non-Local Means Filtering on
HARDI, MICCAI 2008</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id27">
<h3>save_nifti<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.denoise.save_nifti">
<code class="descclassname">dipy.workflows.denoise.</code><code class="descname">save_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>data</em>, <em>affine</em>, <em>hdr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.denoise.save_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="id28">
<h3><a class="reference internal" href="#dipy.workflows.docstring_parser.NumpyDocString" title="dipy.workflows.docstring_parser.NumpyDocString"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumpyDocString</span></code></a><a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.docstring_parser.NumpyDocString">
<em class="property">class </em><code class="descclassname">dipy.workflows.docstring_parser.</code><code class="descname">NumpyDocString</code><span class="sig-paren">(</span><em>docstring</em>, <em>config={}</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.NumpyDocString" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="dipy.workflows.docstring_parser.NumpyDocString.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>docstring</em>, <em>config={}</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.NumpyDocString.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reader">
<h3><a class="reference internal" href="#dipy.workflows.docstring_parser.Reader" title="dipy.workflows.docstring_parser.Reader"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reader</span></code></a><a class="headerlink" href="#reader" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.docstring_parser.Reader">
<em class="property">class </em><code class="descclassname">dipy.workflows.docstring_parser.</code><code class="descname">Reader</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A line-based string reader.</p>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="76%" />
<col width="24%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>eof</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>is_empty</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>peek</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>read</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>read_to_condition</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>read_to_next_empty_line</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>read_to_next_unindented_line</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>reset</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>seek_next_non_empty_line</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">String with lines separated by ‘</p>
</dd>
<dt><strong>‘.</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.eof">
<code class="descname">eof</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.eof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.is_empty">
<code class="descname">is_empty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.is_empty" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.peek">
<code class="descname">peek</code><span class="sig-paren">(</span><em>n=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.peek" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.read" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.read_to_condition">
<code class="descname">read_to_condition</code><span class="sig-paren">(</span><em>condition_func</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.read_to_condition" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.read_to_next_empty_line">
<code class="descname">read_to_next_empty_line</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.read_to_next_empty_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.read_to_next_unindented_line">
<code class="descname">read_to_next_unindented_line</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.read_to_next_unindented_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.docstring_parser.Reader.seek_next_non_empty_line">
<code class="descname">seek_next_non_empty_line</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.Reader.seek_next_non_empty_line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="dedent-lines">
<h3>dedent_lines<a class="headerlink" href="#dedent-lines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.docstring_parser.dedent_lines">
<code class="descclassname">dipy.workflows.docstring_parser.</code><code class="descname">dedent_lines</code><span class="sig-paren">(</span><em>lines</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.dedent_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Deindent a list of lines maximally</p>
</dd></dl>

</div>
<div class="section" id="warn">
<h3>warn<a class="headerlink" href="#warn" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.docstring_parser.warn">
<code class="descclassname">dipy.workflows.docstring_parser.</code><code class="descname">warn</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.docstring_parser.warn" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a warning, or maybe ignore it or raise an exception.</p>
</dd></dl>

</div>
<div class="section" id="id29">
<h3><a class="reference internal" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser" title="dipy.workflows.flow_runner.IntrospectiveArgumentParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntrospectiveArgumentParser</span></code></a><a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser">
<em class="property">class </em><code class="descclassname">dipy.workflows.flow_runner.</code><code class="descname">IntrospectiveArgumentParser</code><span class="sig-paren">(</span><em>prog=None</em>, <em>usage=None</em>, <em>description=None</em>, <em>epilog=None</em>, <em>parents=[]</em>, <em>formatter_class=&lt;class 'argparse.RawTextHelpFormatter'&gt;</em>, <em>prefix_chars='-'</em>, <em>fromfile_prefix_chars=None</em>, <em>argument_default=None</em>, <em>conflict_handler='resolve'</em>, <em>add_help=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>optional_parameters</strong></dt>
<dd></dd>
<dt><strong>output_parameters</strong></dt>
<dd></dd>
<dt><strong>positional_parameters</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_argument</span></code>(dest,&nbsp;…[,&nbsp;name,&nbsp;name])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_sub_flow_args" title="dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_sub_flow_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_sub_flow_args</span></code></a>(sub_flows)</td>
<td>Take an array of workflow objects and use introspection to extract the parameters, types and docstrings of their run method.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_subparsers</span></code>(**kwargs)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_workflow" title="dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_workflow</span></code></a>(workflow)</td>
<td>Take a workflow object and use introspection to extract the parameters, types and docstrings of its run method.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">error</span></code>(message)</td>
<td>Prints a usage message incorporating the message to stderr and exits.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">exit</span></code>([status,&nbsp;message])</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">format_usage</span></code>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.get_flow_args" title="dipy.workflows.flow_runner.IntrospectiveArgumentParser.get_flow_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_flow_args</span></code></a>([args,&nbsp;namespace])</td>
<td>Returns the parsed arguments as a dictionary that will be used as a workflow’s run method arguments.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_args</span></code>([args,&nbsp;namespace])</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_usage</span></code>([file])</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">register</span></code>(registry_name,&nbsp;value,&nbsp;object)</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_defaults</span></code>(**kwargs)</td>
<td></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="76%" />
<col width="24%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>add_argument_group</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>add_description</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>add_epilogue</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>add_mutually_exclusive_group</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>convert_arg_line_to_args</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>format_help</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>get_default</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>parse_known_args</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>print_help</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>show_argument</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>update_argument</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>prog=None</em>, <em>usage=None</em>, <em>description=None</em>, <em>epilog=None</em>, <em>parents=[]</em>, <em>formatter_class=&lt;class 'argparse.RawTextHelpFormatter'&gt;</em>, <em>prefix_chars='-'</em>, <em>fromfile_prefix_chars=None</em>, <em>argument_default=None</em>, <em>conflict_handler='resolve'</em>, <em>add_help=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Augmenting the argument parser to allow automatic creation of
arguments from workflows</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>prog</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None</span></dt>
<dd><p class="first last">The name of the program (default: sys.argv[0])</p>
</dd>
<dt><strong>usage</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None</span></dt>
<dd><p class="first last">A usage message (default: auto-generated from arguments)</p>
</dd>
<dt><strong>description</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">A description of what the program does</p>
</dd>
<dt><strong>epilog</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Text following the argument descriptions</p>
</dd>
<dt><strong>parents</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">Parsers whose arguments should be copied into this one</p>
</dd>
<dt><strong>formatter_class</strong> <span class="classifier-delimiter">:</span> <span class="classifier">obj</span></dt>
<dd><p class="first last">HelpFormatter class for printing help messages</p>
</dd>
<dt><strong>prefix_chars</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Characters that prefix optional arguments</p>
</dd>
<dt><strong>fromfile_prefix_chars</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None</span></dt>
<dd><p class="first last">Characters that prefix files containing additional arguments</p>
</dd>
<dt><strong>argument_default</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None</span></dt>
<dd><p class="first last">The default value for all arguments</p>
</dd>
<dt><strong>conflict_handler</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">String indicating how to handle conflicts</p>
</dd>
<dt><strong>add_help</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Add a -h/-help option</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_description">
<code class="descname">add_description</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_epilogue">
<code class="descname">add_epilogue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_epilogue" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_sub_flow_args">
<code class="descname">add_sub_flow_args</code><span class="sig-paren">(</span><em>sub_flows</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_sub_flow_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Take an array of workflow objects and use introspection to extract
the parameters, types and docstrings of their run method. Only the
optional input parameters are extracted for these as they are treated
as sub workflows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>sub_flows</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array of dipy.workflows.workflow.Workflow</span></dt>
<dd><p class="first last">Workflows to inspect.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sub_flow_optionals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dictionary of all sub workflow optional parameters</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_workflow">
<code class="descname">add_workflow</code><span class="sig-paren">(</span><em>workflow</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.add_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a workflow object and use introspection to extract the parameters,
types and docstrings of its run method. Then add these parameters
to the current arparser’s own params to parse. If the workflow is of
type combined_workflow, the optional input parameters of its
sub workflows will also be added.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>workflow</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dipy.workflows.workflow.Workflow</span></dt>
<dd><p class="first last">Workflow from which to infer parameters.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sub_flow_optionals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dictionary of all sub workflow optional parameters</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.get_flow_args">
<code class="descname">get_flow_args</code><span class="sig-paren">(</span><em>args=None</em>, <em>namespace=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.get_flow_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the parsed arguments as a dictionary that will be used
as a workflow’s run method arguments.</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.optional_parameters">
<code class="descname">optional_parameters</code><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.optional_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.output_parameters">
<code class="descname">output_parameters</code><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.output_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.positional_parameters">
<code class="descname">positional_parameters</code><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.positional_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.show_argument">
<code class="descname">show_argument</code><span class="sig-paren">(</span><em>dest</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.show_argument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.flow_runner.IntrospectiveArgumentParser.update_argument">
<code class="descname">update_argument</code><span class="sig-paren">(</span><em>*args</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.IntrospectiveArgumentParser.update_argument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="get-level">
<h3>get_level<a class="headerlink" href="#get-level" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.flow_runner.get_level">
<code class="descclassname">dipy.workflows.flow_runner.</code><code class="descname">get_level</code><span class="sig-paren">(</span><em>lvl</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.get_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms the loggin level passed on the commandline into a proper
logging level name.</p>
</dd></dl>

</div>
<div class="section" id="id30">
<h3>iteritems<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.flow_runner.iteritems">
<code class="descclassname">dipy.workflows.flow_runner.</code><code class="descname">iteritems</code><span class="sig-paren">(</span><em>d</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.iteritems" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the (key, value) pairs of a dictionary.</p>
</dd></dl>

</div>
<div class="section" id="run-flow">
<h3>run_flow<a class="headerlink" href="#run-flow" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.flow_runner.run_flow">
<code class="descclassname">dipy.workflows.flow_runner.</code><code class="descname">run_flow</code><span class="sig-paren">(</span><em>flow</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.flow_runner.run_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps the process of building an argparser that reflects the workflow
that we want to run along with some generic parameters like logging,
force and output strategies. The resulting parameters are then fed to
the workflow’s run method.</p>
</dd></dl>

</div>
<div class="section" id="ioinfoflow">
<h3><a class="reference internal" href="#dipy.workflows.io.IoInfoFlow" title="dipy.workflows.io.IoInfoFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">IoInfoFlow</span></code></a><a class="headerlink" href="#ioinfoflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.io.IoInfoFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.io.</code><code class="descname">IoInfoFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.IoInfoFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.io.IoInfoFlow.get_short_name" title="dipy.workflows.io.IoInfoFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.io.IoInfoFlow.run" title="dipy.workflows.io.IoInfoFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files[,&nbsp;b0_threshold,&nbsp;bvecs_tol,&nbsp;…])</td>
<td>Provides useful information about different files used in medical imaging.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.io.IoInfoFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.IoInfoFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.io.IoInfoFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.IoInfoFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.io.IoInfoFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>b0_threshold=50</em>, <em>bvecs_tol=0.01</em>, <em>bshell_thr=100</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.IoInfoFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides useful information about different files used in
medical imaging. Any number of input files can be provided. The
program identifies the type of file by its extension.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable string</span></dt>
<dd><p class="first last">Any number of Nifti1, bvals or bvecs files.</p>
</dd>
<dt><strong>b0_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">(default 50)</p>
</dd>
<dt><strong>bvecs_tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold used to check that norm(bvec) = 1 +/- bvecs_tol
b-vectors are unit vectors (default 0.01)</p>
</dd>
<dt><strong>bshell_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold for distinguishing b-values in different shells
(default 100)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id31">
<h3><a class="reference internal" href="#dipy.workflows.io.Workflow" title="dipy.workflows.io.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.io.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.io.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.io.Workflow.get_io_iterator" title="dipy.workflows.io.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.io.Workflow.get_short_name" title="dipy.workflows.io.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.io.Workflow.get_sub_runs" title="dipy.workflows.io.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.io.Workflow.manage_output_overwrite" title="dipy.workflows.io.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.io.Workflow.run" title="dipy.workflows.io.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.io.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.io.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.io.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.io.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.io.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.io.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id32">
<h3>load_nifti<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.io.load_nifti">
<code class="descclassname">dipy.workflows.io.</code><code class="descname">load_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>return_img=False</em>, <em>return_voxsize=False</em>, <em>return_coords=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.io.load_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="maskflow">
<h3><a class="reference internal" href="#dipy.workflows.mask.MaskFlow" title="dipy.workflows.mask.MaskFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaskFlow</span></code></a><a class="headerlink" href="#maskflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.mask.MaskFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.mask.</code><code class="descname">MaskFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.MaskFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.mask.MaskFlow.get_short_name" title="dipy.workflows.mask.MaskFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.mask.MaskFlow.run" title="dipy.workflows.mask.MaskFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files,&nbsp;lb[,&nbsp;ub,&nbsp;out_dir,&nbsp;out_mask])</td>
<td>Workflow for creating a binary mask</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.mask.MaskFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.MaskFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.mask.MaskFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.MaskFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.mask.MaskFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>lb</em>, <em>ub=inf</em>, <em>out_dir=''</em>, <em>out_mask='mask.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.MaskFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow for creating a binary mask</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to image to be masked.</p>
</dd>
<dt><strong>lb</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Lower bound value.</p>
</dd>
<dt><strong>ub</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Upper bound value (default Inf)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the masked file (default ‘mask.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id33">
<h3><a class="reference internal" href="#dipy.workflows.mask.Workflow" title="dipy.workflows.mask.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.mask.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.mask.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.mask.Workflow.get_io_iterator" title="dipy.workflows.mask.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.mask.Workflow.get_short_name" title="dipy.workflows.mask.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.mask.Workflow.get_sub_runs" title="dipy.workflows.mask.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.mask.Workflow.manage_output_overwrite" title="dipy.workflows.mask.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.mask.Workflow.run" title="dipy.workflows.mask.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.mask.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.mask.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.mask.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.mask.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.mask.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.mask.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id34">
<h3>load_nifti<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.mask.load_nifti">
<code class="descclassname">dipy.workflows.mask.</code><code class="descname">load_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>return_img=False</em>, <em>return_voxsize=False</em>, <em>return_coords=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.load_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="id35">
<h3>save_nifti<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.mask.save_nifti">
<code class="descclassname">dipy.workflows.mask.</code><code class="descname">save_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>data</em>, <em>affine</em>, <em>hdr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.mask.save_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="ioiterator">
<h3><a class="reference internal" href="#dipy.workflows.multi_io.IOIterator" title="dipy.workflows.multi_io.IOIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">IOIterator</span></code></a><a class="headerlink" href="#ioiterator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.multi_io.IOIterator">
<em class="property">class </em><code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">IOIterator</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.IOIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Create output filenames that work nicely with multiple input files from
multiple directories (processing multiple subjects with one command)</p>
<p>Use information from input files, out_dir and out_fnames to generate
correct outputs which can come from long lists of multiple or single
inputs.</p>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="71%" />
<col width="29%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>create_directories</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>create_outputs</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>file_existence_check</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>set_inputs</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>set_out_dir</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>set_out_fnames</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>set_output_keys</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.multi_io.IOIterator.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.IOIterator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.multi_io.IOIterator.create_directories">
<code class="descname">create_directories</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.IOIterator.create_directories" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.multi_io.IOIterator.create_outputs">
<code class="descname">create_outputs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.IOIterator.create_outputs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.multi_io.IOIterator.file_existence_check">
<code class="descname">file_existence_check</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.IOIterator.file_existence_check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.multi_io.IOIterator.set_inputs">
<code class="descname">set_inputs</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.IOIterator.set_inputs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.multi_io.IOIterator.set_out_dir">
<code class="descname">set_out_dir</code><span class="sig-paren">(</span><em>out_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.IOIterator.set_out_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.multi_io.IOIterator.set_out_fnames">
<code class="descname">set_out_fnames</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.IOIterator.set_out_fnames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.multi_io.IOIterator.set_output_keys">
<code class="descname">set_output_keys</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.IOIterator.set_output_keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="basename-without-extension">
<h3>basename_without_extension<a class="headerlink" href="#basename-without-extension" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.multi_io.basename_without_extension">
<code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">basename_without_extension</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.basename_without_extension" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="common-start">
<h3>common_start<a class="headerlink" href="#common-start" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.multi_io.common_start">
<code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">common_start</code><span class="sig-paren">(</span><em>sa</em>, <em>sb</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.common_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the longest common substring from the beginning of sa and sb.</p>
</dd></dl>

</div>
<div class="section" id="concatenate-inputs">
<h3>concatenate_inputs<a class="headerlink" href="#concatenate-inputs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.multi_io.concatenate_inputs">
<code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">concatenate_inputs</code><span class="sig-paren">(</span><em>multi_inputs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.concatenate_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate list of inputs</p>
</dd></dl>

</div>
<div class="section" id="connect-output-paths">
<h3>connect_output_paths<a class="headerlink" href="#connect-output-paths" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.multi_io.connect_output_paths">
<code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">connect_output_paths</code><span class="sig-paren">(</span><em>inputs</em>, <em>out_dir</em>, <em>out_files</em>, <em>output_strategy='absolute'</em>, <em>mix_names=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.connect_output_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a list of output files paths based on input files and
output strategies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>inputs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><blockquote class="first">
<div><p>List of input paths.</p>
</div></blockquote>
<dl class="last docutils">
<dt>out_dir <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">The output directory.</p>
</dd>
<dt>out_files <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">List of output files.</p>
</dd>
<dt>output_strategy <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><dl class="first last docutils">
<dt>Which strategy to use to generate the output paths.</dt>
<dd><p class="first last">‘append’: Add out_dir to the path of the input.
‘prepend’: Add the input path directory tree to out_dir.
‘absolute’: Put directly in out_dir.</p>
</dd>
</dl>
</dd>
<dt>mix_names <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Whether or not prepend a string composed of a mix of the input
names to the final output name.</p>
</dd>
</dl>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>A list of output file paths.</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id36">
<h3>get_args_default<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.multi_io.get_args_default">
<code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">get_args_default</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.get_args_default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="glob">
<h3>glob<a class="headerlink" href="#glob" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.multi_io.glob">
<code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">glob</code><span class="sig-paren">(</span><em>pathname</em>, <em>*</em>, <em>recursive=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.glob" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of paths matching a pathname pattern.</p>
<p>The pattern may contain simple shell-style wildcards a la
fnmatch. However, unlike fnmatch, filenames starting with a
dot are special cases that are not matched by ‘*’ and ‘?’
patterns.</p>
<p>If recursive is true, the pattern ‘**’ will match any files and
zero or more directories and subdirectories.</p>
</dd></dl>

</div>
<div class="section" id="io-iterator">
<h3>io_iterator<a class="headerlink" href="#io-iterator" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.multi_io.io_iterator">
<code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">io_iterator</code><span class="sig-paren">(</span><em>inputs</em>, <em>out_dir</em>, <em>fnames</em>, <em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>out_keys=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an IOIterator from the parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>inputs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><blockquote class="first">
<div><p>List of input files.</p>
</div></blockquote>
<dl class="last docutils">
<dt>out_dir <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Output directory.</p>
</dd>
<dt>fnames <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">File names of all outputs to be created.</p>
</dd>
<dt>output_strategy <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Controls the behavior of the IOIterator for output paths.</p>
</dd>
<dt>mix_names <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Whether or not to append a mix of input names at the beginning.</p>
</dd>
</dl>
</dd>
<dt><strong>Returns</strong></dt>
<dd></dd>
<dt><strong>——-</strong></dt>
<dd><p class="first last">Properly instantiated IOIterator object.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id37">
<h3><a href="#id155"><span class="problematic" id="id156">io_iterator_</span></a><a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.multi_io.io_iterator_">
<code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">io_iterator_</code><span class="sig-paren">(</span><em>frame</em>, <em>fnc</em>, <em>output_strategy='absolute'</em>, <em>mix_names=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.io_iterator_" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an IOIterator using introspection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">frameobject</span></dt>
<dd><blockquote class="first">
<div><p>Contains the info about the current local variables values.</p>
</div></blockquote>
<dl class="last docutils">
<dt>fnc <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function to inspect</p>
</dd>
<dt>output_strategy <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Controls the behavior of the IOIterator for output paths.</p>
</dd>
<dt>mix_names <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Whether or not to append a mix of input names at the beginning.</p>
</dd>
</dl>
</dd>
<dt><strong>Returns</strong></dt>
<dd></dd>
<dt><strong>——-</strong></dt>
<dd><p class="first last">Properly instantiated IOIterator object.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="slash-to-under">
<h3>slash_to_under<a class="headerlink" href="#slash-to-under" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.multi_io.slash_to_under">
<code class="descclassname">dipy.workflows.multi_io.</code><code class="descname">slash_to_under</code><span class="sig-paren">(</span><em>dir_str</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.multi_io.slash_to_under" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="constrainedsphericaldeconvmodel">
<h3><a class="reference internal" href="#dipy.workflows.reconst.ConstrainedSphericalDeconvModel" title="dipy.workflows.reconst.ConstrainedSphericalDeconvModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConstrainedSphericalDeconvModel</span></code></a><a class="headerlink" href="#constrainedsphericaldeconvmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.ConstrainedSphericalDeconvModel">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">ConstrainedSphericalDeconvModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>response</em>, <em>reg_sphere=None</em>, <em>sh_order=8</em>, <em>lambda_=1</em>, <em>tau=0.1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ConstrainedSphericalDeconvModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.shm.SphHarmModel" title="dipy.reconst.shm.SphHarmModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.reconst.shm.SphHarmModel</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">cache_clear</span></code>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">cache_get</span></code>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">cache_set</span></code>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ConstrainedSphericalDeconvModel.fit" title="dipy.workflows.reconst.ConstrainedSphericalDeconvModel.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td>Fit method for every voxel in data</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ConstrainedSphericalDeconvModel.predict" title="dipy.workflows.reconst.ConstrainedSphericalDeconvModel.predict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">predict</span></code></a>(sh_coeff[,&nbsp;gtab,&nbsp;S0])</td>
<td>Compute a signal prediction given spherical harmonic coefficients for the provided GradientTable class instance.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">sampling_matrix</span></code>(sphere)</td>
<td>The matrix needed to sample ODFs from coefficients of the model.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.ConstrainedSphericalDeconvModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>response</em>, <em>reg_sphere=None</em>, <em>sh_order=8</em>, <em>lambda_=1</em>, <em>tau=0.1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ConstrainedSphericalDeconvModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constrained Spherical Deconvolution (CSD) <a class="reference internal" href="#r83cf0c2022c7-1" id="id38">[1]</a>.</p>
<p>Spherical deconvolution computes a fiber orientation distribution
(FOD), also called fiber ODF (fODF) <a class="reference internal" href="#r83cf0c2022c7-2" id="id39">[2]</a>, as opposed to a diffusion ODF
as the QballModel or the CsaOdfModel. This results in a sharper angular
profile with better angular resolution that is the best object to be
used for later deterministic and probabilistic tractography <a class="reference internal" href="#r83cf0c2022c7-3" id="id40">[3]</a>.</p>
<p>A sharp fODF is obtained because a single fiber <em>response</em> function is
injected as <em>a priori</em> knowledge. The response function is often
data-driven and is thus provided as input to the
ConstrainedSphericalDeconvModel. It will be used as deconvolution
kernel, as described in <a class="reference internal" href="#r83cf0c2022c7-1" id="id41">[1]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>gtab</strong> <span class="classifier-delimiter">:</span> <span class="classifier">GradientTable</span></dt>
<dd></dd>
<dt><strong>response</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple or AxSymShResponse object</span></dt>
<dd><p class="first last">A tuple with two elements. The first is the eigen-values as an (3,)
ndarray and the second is the signal value for the response
function without diffusion weighting.  This is to be able to
generate a single fiber synthetic signal. The response function
will be used as deconvolution kernel (<a class="reference internal" href="#r83cf0c2022c7-1" id="id42">[1]</a>)</p>
</dd>
<dt><strong>reg_sphere</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Sphere (optional)</span></dt>
<dd><p class="first last">sphere used to build the regularization B matrix.
Default: ‘symmetric362’.</p>
</dd>
<dt><strong>sh_order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional)</span></dt>
<dd><p class="first last">maximal spherical harmonics order. Default: 8</p>
</dd>
<dt><strong>lambda_</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (optional)</span></dt>
<dd><p class="first last">weight given to the constrained-positivity regularization part of
the deconvolution equation (see <a class="reference internal" href="#r83cf0c2022c7-1" id="id43">[1]</a>). Default: 1</p>
</dd>
<dt><strong>tau</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float (optional)</span></dt>
<dd><p class="first last">threshold controlling the amplitude below which the corresponding
fODF is assumed to be zero.  Ideally, tau should be set to
zero. However, to improve the stability of the algorithm, tau is
set to tau*100 % of the mean fODF amplitude (here, 10% by default)
(see <a class="reference internal" href="#r83cf0c2022c7-1" id="id44">[1]</a>). Default: 0.1</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r83cf0c2022c7-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id38">1</a>, <a class="fn-backref" href="#id41">2</a>, <a class="fn-backref" href="#id42">3</a>, <a class="fn-backref" href="#id43">4</a>, <a class="fn-backref" href="#id44">5</a>, <a class="fn-backref" href="#id45">6</a>)</em> Tournier, J.D., et al. NeuroImage 2007. Robust determination of
the fibre orientation distribution in diffusion MRI:
Non-negativity constrained super-resolved spherical
deconvolution</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r83cf0c2022c7-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id39">1</a>, <a class="fn-backref" href="#id46">2</a>)</em> Descoteaux, M., et al. IEEE TMI 2009. Deterministic and
Probabilistic Tractography Based on Complex Fibre Orientation
Distributions</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r83cf0c2022c7-3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><em>(<a class="fn-backref" href="#id40">1</a>, <a class="fn-backref" href="#id47">2</a>)</em> C^ot’e, M-A., et al. Medical Image Analysis 2013. Tractometer:
Towards validation of tractography pipelines</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r83cf0c2022c7-4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id48">[4]</a></td><td>Tournier, J.D, et al. Imaging Systems and Technology
2012. MRtrix: Diffusion Tractography in Crossing Fiber Regions</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ConstrainedSphericalDeconvModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ConstrainedSphericalDeconvModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit method for every voxel in data</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ConstrainedSphericalDeconvModel.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>sh_coeff</em>, <em>gtab=None</em>, <em>S0=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ConstrainedSphericalDeconvModel.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a signal prediction given spherical harmonic coefficients
for the provided GradientTable class instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>sh_coeff</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The spherical harmonic representation of the FOD from which to make
the signal prediction.</p>
</dd>
<dt><strong>gtab</strong> <span class="classifier-delimiter">:</span> <span class="classifier">GradientTable</span></dt>
<dd><p class="first last">The gradients for which the signal will be predicted. Use the
model’s gradient table by default.</p>
</dd>
<dt><strong>S0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray or float</span></dt>
<dd><p class="first last">The non diffusion-weighted signal value.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pred_sig</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The predicted signal.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="csaodfmodel">
<h3><a class="reference internal" href="#dipy.workflows.reconst.CsaOdfModel" title="dipy.workflows.reconst.CsaOdfModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">CsaOdfModel</span></code></a><a class="headerlink" href="#csaodfmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.CsaOdfModel">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">CsaOdfModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0.006</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.CsaOdfModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.shm.QballBaseModel" title="dipy.reconst.shm.QballBaseModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.reconst.shm.QballBaseModel</span></code></a></p>
<p>Implementation of Constant Solid Angle reconstruction method.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r9e10b82edb3a-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id49">[1]</a></td><td>Aganj, I., et al. 2009. ODF Reconstruction in Q-Ball Imaging With
Solid Angle Consideration.</td></tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">cache_clear</span></code>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">cache_get</span></code>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">cache_set</span></code>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code>(data[,&nbsp;mask])</td>
<td>Fits the model to diffusion data and returns the model fit</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">sampling_matrix</span></code>(sphere)</td>
<td>The matrix needed to sample ODFs from coefficients of the model.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.CsaOdfModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0.006</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.CsaOdfModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a model that can be used to fit or sample diffusion data</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal notranslate"><span class="pre">normalize_data</span></code></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.reconst.CsaOdfModel.max">
<code class="descname">max</code><em class="property"> = 0.999</em><a class="headerlink" href="#dipy.workflows.reconst.CsaOdfModel.max" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.reconst.CsaOdfModel.min">
<code class="descname">min</code><em class="property"> = 0.001</em><a class="headerlink" href="#dipy.workflows.reconst.CsaOdfModel.min" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="diffusionkurtosismodel">
<h3><a class="reference internal" href="#dipy.workflows.reconst.DiffusionKurtosisModel" title="dipy.workflows.reconst.DiffusionKurtosisModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiffusionKurtosisModel</span></code></a><a class="headerlink" href="#diffusionkurtosismodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.DiffusionKurtosisModel">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">DiffusionKurtosisModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>fit_method='WLS'</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.DiffusionKurtosisModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.reconst.base.ReconstModel</span></code></a></p>
<p>Class for the Diffusion Kurtosis Model</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.DiffusionKurtosisModel.fit" title="dipy.workflows.reconst.DiffusionKurtosisModel.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td>Fit method of the DKI model class</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.DiffusionKurtosisModel.predict" title="dipy.workflows.reconst.DiffusionKurtosisModel.predict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">predict</span></code></a>(dki_params[,&nbsp;S0])</td>
<td>Predict a signal for this DKI model class instance given parameters.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.DiffusionKurtosisModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>fit_method='WLS'</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.DiffusionKurtosisModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Diffusion Kurtosis Tensor Model [1]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>gtab</strong> <span class="classifier-delimiter">:</span> <span class="classifier">GradientTable class instance</span></dt>
<dd></dd>
<dt><strong>fit_method</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or callable</span></dt>
<dd><p class="first">str can be one of the following:
‘OLS’ or ‘ULLS’ for ordinary least squares</p>
<blockquote>
<div><p>dki.ols_fit_dki</p>
</div></blockquote>
<dl class="last docutils">
<dt>‘WLS’ or ‘UWLLS’ for weighted ordinary least squares</dt>
<dd><p class="first last">dki.wls_fit_dki</p>
</dd>
<dt>callable has to have the signature:</dt>
<dd><p class="first last">fit_method(design_matrix, data, <a href="#id50"><span class="problematic" id="id51">*</span></a>args, <a href="#id52"><span class="problematic" id="id53">**</span></a>kwargs)</p>
</dd>
</dl>
</dd>
<dt><strong>args, kwargs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">arguments and key-word arguments passed to the</span></dt>
<dd><p class="first last">fit_method. See dki.ols_fit_dki, dki.wls_fit_dki for details</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r05d15d5c8284-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id54">[1]</a></td><td>Tabesh, A., Jensen, J.H., Ardekani, B.A., Helpern, J.A., 2011.</td></tr>
</tbody>
</table>
<p>Estimation of tensors and tensor-derived measures in diffusional
kurtosis imaging. Magn Reson Med. 65(3), 823-836</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.DiffusionKurtosisModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.DiffusionKurtosisModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit method of the DKI model class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">The measured signal from one voxel.</p>
</dd>
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">A boolean array used to mark the coordinates in the data that
should be analyzed that has the shape data.shape[-1]</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.DiffusionKurtosisModel.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>dki_params</em>, <em>S0=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.DiffusionKurtosisModel.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict a signal for this DKI model class instance given
parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dki_params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray (x, y, z, 27) or (n, 27)</span></dt>
<dd><p class="first">All parameters estimated from the diffusion kurtosis model.
Parameters are ordered as follows:</p>
<blockquote class="last">
<div><ol class="arabic simple">
<li>Three diffusion tensor’s eigenvalues</li>
<li>Three lines of the eigenvector matrix each containing the
first, second and third coordinates of the eigenvector</li>
<li>Fifteen elements of the kurtosis tensor</li>
</ol>
</div></blockquote>
</dd>
<dt><strong>S0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float or ndarray (optional)</span></dt>
<dd><p class="first last">The non diffusion-weighted signal in every voxel, or across all
voxels. Default: 1</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reconstcsaflow">
<h3><a class="reference internal" href="#dipy.workflows.reconst.ReconstCSAFlow" title="dipy.workflows.reconst.ReconstCSAFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstCSAFlow</span></code></a><a class="headerlink" href="#reconstcsaflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.ReconstCSAFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">ReconstCSAFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstCSAFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstCSAFlow.get_short_name" title="dipy.workflows.reconst.ReconstCSAFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstCSAFlow.run" title="dipy.workflows.reconst.ReconstCSAFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files,&nbsp;bvalues_files,&nbsp;…[,&nbsp;…])</td>
<td>Constant Solid Angle.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.ReconstCSAFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstCSAFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.reconst.ReconstCSAFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstCSAFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstCSAFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>bvalues_files</em>, <em>bvectors_files</em>, <em>mask_files</em>, <em>sh_order=6</em>, <em>odf_to_sh_order=8</em>, <em>b0_threshold=50.0</em>, <em>bvecs_tol=0.01</em>, <em>extract_pam_values=False</em>, <em>out_dir=''</em>, <em>out_pam='peaks.pam5'</em>, <em>out_shm='shm.nii.gz'</em>, <em>out_peaks_dir='peaks_dirs.nii.gz'</em>, <em>out_peaks_values='peaks_values.nii.gz'</em>, <em>out_peaks_indices='peaks_indices.nii.gz'</em>, <em>out_gfa='gfa.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstCSAFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant Solid Angle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input volumes. This path may contain wildcards to
process multiple inputs at once.</p>
</dd>
<dt><strong>bvalues_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvalues files. This path may contain wildcards to use
multiple bvalues files at once.</p>
</dd>
<dt><strong>bvectors_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvectors files. This path may contain wildcards to use
multiple bvectors files at once.</p>
</dd>
<dt><strong>mask_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input masks. This path may contain wildcards to use
multiple masks at once. (default: No mask used)</p>
</dd>
<dt><strong>sh_order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Spherical harmonics order (default 6) used in the CSA fit.</p>
</dd>
<dt><strong>odf_to_sh_order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Spherical harmonics order used for peak_from_model to compress
the ODF to spherical harmonics coefficients (default 8)</p>
</dd>
<dt><strong>b0_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold used to find b=0 directions</p>
</dd>
<dt><strong>bvecs_tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold used so that norm(bvec)=1 (default 0.01)</p>
</dd>
<dt><strong>extract_pam_values</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Wheter or not to save pam volumes as single nifti files.</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_pam</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the peaks volume to be saved (default ‘peaks.pam5’)</p>
</dd>
<dt><strong>out_shm</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the shperical harmonics volume to be saved
(default ‘shm.nii.gz’)</p>
</dd>
<dt><strong>out_peaks_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the peaks directions volume to be saved
(default ‘peaks_dirs.nii.gz’)</p>
</dd>
<dt><strong>out_peaks_values</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the peaks values volume to be saved
(default ‘peaks_values.nii.gz’)</p>
</dd>
<dt><strong>out_peaks_indices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the peaks indices volume to be saved
(default ‘peaks_indices.nii.gz’)</p>
</dd>
<dt><strong>out_gfa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the generalise fa volume to be saved (default ‘gfa.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r91123ab0acf1-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id55">[1]</a></td><td>Aganj, I., et al. 2009. ODF Reconstruction in Q-Ball Imaging
with Solid Angle Consideration.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reconstcsdflow">
<h3><a class="reference internal" href="#dipy.workflows.reconst.ReconstCSDFlow" title="dipy.workflows.reconst.ReconstCSDFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstCSDFlow</span></code></a><a class="headerlink" href="#reconstcsdflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.ReconstCSDFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">ReconstCSDFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstCSDFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstCSDFlow.get_short_name" title="dipy.workflows.reconst.ReconstCSDFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstCSDFlow.run" title="dipy.workflows.reconst.ReconstCSDFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files,&nbsp;bvalues_files,&nbsp;…[,&nbsp;…])</td>
<td>Constrained spherical deconvolution</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.ReconstCSDFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstCSDFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.reconst.ReconstCSDFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstCSDFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstCSDFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>bvalues_files</em>, <em>bvectors_files</em>, <em>mask_files</em>, <em>b0_threshold=50.0</em>, <em>bvecs_tol=0.01</em>, <em>roi_center=None</em>, <em>roi_radius=10</em>, <em>fa_thr=0.7</em>, <em>frf=None</em>, <em>extract_pam_values=False</em>, <em>sh_order=8</em>, <em>odf_to_sh_order=8</em>, <em>out_dir=''</em>, <em>out_pam='peaks.pam5'</em>, <em>out_shm='shm.nii.gz'</em>, <em>out_peaks_dir='peaks_dirs.nii.gz'</em>, <em>out_peaks_values='peaks_values.nii.gz'</em>, <em>out_peaks_indices='peaks_indices.nii.gz'</em>, <em>out_gfa='gfa.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstCSDFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Constrained spherical deconvolution</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input volumes. This path may contain wildcards to
process multiple inputs at once.</p>
</dd>
<dt><strong>bvalues_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvalues files. This path may contain wildcards to use
multiple bvalues files at once.</p>
</dd>
<dt><strong>bvectors_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvectors files. This path may contain wildcards to use
multiple bvectors files at once.</p>
</dd>
<dt><strong>mask_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input masks. This path may contain wildcards to use
multiple masks at once. (default: No mask used)</p>
</dd>
<dt><strong>b0_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold used to find b=0 directions</p>
</dd>
<dt><strong>bvecs_tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Bvecs should be unit vectors. (default:0.01)</p>
</dd>
<dt><strong>roi_center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable int, optional</span></dt>
<dd><p class="first last">Center of ROI in data. If center is None, it is assumed that it is
the center of the volume with shape <cite>data.shape[:3]</cite> (default None)</p>
</dd>
<dt><strong>roi_radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">radius of cubic ROI in voxels (default 10)</p>
</dd>
<dt><strong>fa_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">FA threshold for calculating the response function (default 0.7)</p>
</dd>
<dt><strong>frf</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable float, optional</span></dt>
<dd><p class="first last">Fiber response function can be for example inputed as 15 4 4
(from the command line) or [15, 4, 4] from a Python script to be
converted to float and mutiplied by 10**-4 . If None
the fiber response function will be computed automatically
(default: None).</p>
</dd>
<dt><strong>extract_pam_values</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Save or not to save pam volumes as single nifti files.</p>
</dd>
<dt><strong>sh_order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Spherical harmonics order (default 6) used in the CSA fit.</p>
</dd>
<dt><strong>odf_to_sh_order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Spherical harmonics order used for peak_from_model to compress
the ODF to spherical harmonics coefficients (default 8)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_pam</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the peaks volume to be saved (default ‘peaks.pam5’)</p>
</dd>
<dt><strong>out_shm</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the shperical harmonics volume to be saved
(default ‘shm.nii.gz’)</p>
</dd>
<dt><strong>out_peaks_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the peaks directions volume to be saved
(default ‘peaks_dirs.nii.gz’)</p>
</dd>
<dt><strong>out_peaks_values</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the peaks values volume to be saved
(default ‘peaks_values.nii.gz’)</p>
</dd>
<dt><strong>out_peaks_indices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the peaks indices volume to be saved
(default ‘peaks_indices.nii.gz’)</p>
</dd>
<dt><strong>out_gfa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the generalise fa volume to be saved (default ‘gfa.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rd2338fb036e0-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id56">[1]</a></td><td>Tournier, J.D., et al. NeuroImage 2007. Robust determination of
the fibre orientation distribution in diffusion MRI: Non-negativity
constrained super-resolved spherical deconvolution.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reconstdkiflow">
<h3><a class="reference internal" href="#dipy.workflows.reconst.ReconstDkiFlow" title="dipy.workflows.reconst.ReconstDkiFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstDkiFlow</span></code></a><a class="headerlink" href="#reconstdkiflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.ReconstDkiFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">ReconstDkiFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDkiFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstDkiFlow.get_short_name" title="dipy.workflows.reconst.ReconstDkiFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstDkiFlow.run" title="dipy.workflows.reconst.ReconstDkiFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files,&nbsp;bvalues_files,&nbsp;…[,&nbsp;…])</td>
<td>Workflow for Diffusion Kurtosis reconstruction and for computing DKI metrics.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="68%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get_dki_model</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>get_fitted_tensor</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.ReconstDkiFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDkiFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstDkiFlow.get_dki_model">
<code class="descname">get_dki_model</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDkiFlow.get_dki_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstDkiFlow.get_fitted_tensor">
<code class="descname">get_fitted_tensor</code><span class="sig-paren">(</span><em>data</em>, <em>mask</em>, <em>bval</em>, <em>bvec</em>, <em>b0_threshold=50</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDkiFlow.get_fitted_tensor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.reconst.ReconstDkiFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDkiFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstDkiFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>bvalues_files</em>, <em>bvectors_files</em>, <em>mask_files</em>, <em>b0_threshold=50.0</em>, <em>save_metrics=[]</em>, <em>out_dir=''</em>, <em>out_dt_tensor='dti_tensors.nii.gz'</em>, <em>out_fa='fa.nii.gz'</em>, <em>out_ga='ga.nii.gz'</em>, <em>out_rgb='rgb.nii.gz'</em>, <em>out_md='md.nii.gz'</em>, <em>out_ad='ad.nii.gz'</em>, <em>out_rd='rd.nii.gz'</em>, <em>out_mode='mode.nii.gz'</em>, <em>out_evec='evecs.nii.gz'</em>, <em>out_eval='evals.nii.gz'</em>, <em>out_dk_tensor='dki_tensors.nii.gz'</em>, <em>out_mk='mk.nii.gz'</em>, <em>out_ak='ak.nii.gz'</em>, <em>out_rk='rk.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDkiFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow for Diffusion Kurtosis reconstruction and for computing
DKI metrics. Performs a DKI reconstruction on the files by ‘globing’
<code class="docutils literal notranslate"><span class="pre">input_files</span></code> and saves the DKI metrics in a directory specified by
<code class="docutils literal notranslate"><span class="pre">out_dir</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input volumes. This path may contain wildcards to
process multiple inputs at once.</p>
</dd>
<dt><strong>bvalues_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvalues files. This path may contain wildcards to use
multiple bvalues files at once.</p>
</dd>
<dt><strong>bvectors_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvalues files. This path may contain wildcards to use
multiple bvalues files at once.</p>
</dd>
<dt><strong>mask_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input masks. This path may contain wildcards to use
multiple masks at once. (default: No mask used)</p>
</dd>
<dt><strong>b0_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold used to find b=0 directions (default 0.0)</p>
</dd>
<dt><strong>save_metrics</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable string, optional</span></dt>
<dd><p class="first last">List of metrics to save.
Possible values: fa, ga, rgb, md, ad, rd, mode, tensor, evec, eval
(default [] (all))</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_dt_tensor</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the tensors volume to be saved
(default: ‘dti_tensors.nii.gz’)</p>
</dd>
<dt><strong>out_dk_tensor</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the tensors volume to be saved
(default ‘dki_tensors.nii.gz’)</p>
</dd>
<dt><strong>out_fa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the fractional anisotropy volume to be saved
(default ‘fa.nii.gz’)</p>
</dd>
<dt><strong>out_ga</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the geodesic anisotropy volume to be saved
(default ‘ga.nii.gz’)</p>
</dd>
<dt><strong>out_rgb</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the color fa volume to be saved (default ‘rgb.nii.gz’)</p>
</dd>
<dt><strong>out_md</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the mean diffusivity volume to be saved
(default ‘md.nii.gz’)</p>
</dd>
<dt><strong>out_ad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the axial diffusivity volume to be saved
(default ‘ad.nii.gz’)</p>
</dd>
<dt><strong>out_rd</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the radial diffusivity volume to be saved
(default ‘rd.nii.gz’)</p>
</dd>
<dt><strong>out_mode</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the mode volume to be saved (default ‘mode.nii.gz’)</p>
</dd>
<dt><strong>out_evec</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the eigenvectors volume to be saved
(default ‘evecs.nii.gz’)</p>
</dd>
<dt><strong>out_eval</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the eigenvalues to be saved (default ‘evals.nii.gz’)</p>
</dd>
<dt><strong>out_mk</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the mean kurtosis to be saved (default: ‘mk.nii.gz’)</p>
</dd>
<dt><strong>out_ak</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the axial kurtosis to be saved (default: ‘ak.nii.gz’)</p>
</dd>
<dt><strong>out_rk</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the radial kurtosis to be saved (default: ‘rk.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rba3aa504cda7-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id57">[1]</a></td><td>Tabesh, A., Jensen, J.H., Ardekani, B.A., Helpern, J.A., 2011.
Estimation of tensors and tensor-derived measures in diffusional
kurtosis imaging. Magn Reson Med. 65(3), 823-836</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rba3aa504cda7-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id58">[2]</a></td><td>Jensen, Jens H., Joseph A. Helpern, Anita Ramani, Hanzhang Lu,
and Kyle Kaczynski. 2005. Diffusional Kurtosis Imaging: The
Quantification of Non-Gaussian Water Diffusion by Means of Magnetic
Resonance Imaging. MRM 53 (6):1432-40.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reconstdtiflow">
<h3><a class="reference internal" href="#dipy.workflows.reconst.ReconstDtiFlow" title="dipy.workflows.reconst.ReconstDtiFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstDtiFlow</span></code></a><a class="headerlink" href="#reconstdtiflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.ReconstDtiFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">ReconstDtiFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDtiFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstDtiFlow.get_short_name" title="dipy.workflows.reconst.ReconstDtiFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstDtiFlow.run" title="dipy.workflows.reconst.ReconstDtiFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files,&nbsp;bvalues_files,&nbsp;…[,&nbsp;…])</td>
<td>Workflow for tensor reconstruction and for computing DTI metrics.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="68%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get_fitted_tensor</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>get_tensor_model</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.ReconstDtiFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDtiFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstDtiFlow.get_fitted_tensor">
<code class="descname">get_fitted_tensor</code><span class="sig-paren">(</span><em>data</em>, <em>mask</em>, <em>bval</em>, <em>bvec</em>, <em>b0_threshold=50</em>, <em>bvecs_tol=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDtiFlow.get_fitted_tensor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.reconst.ReconstDtiFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDtiFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstDtiFlow.get_tensor_model">
<code class="descname">get_tensor_model</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDtiFlow.get_tensor_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstDtiFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>bvalues_files</em>, <em>bvectors_files</em>, <em>mask_files</em>, <em>b0_threshold=50</em>, <em>bvecs_tol=0.01</em>, <em>save_metrics=[]</em>, <em>out_dir=''</em>, <em>out_tensor='tensors.nii.gz'</em>, <em>out_fa='fa.nii.gz'</em>, <em>out_ga='ga.nii.gz'</em>, <em>out_rgb='rgb.nii.gz'</em>, <em>out_md='md.nii.gz'</em>, <em>out_ad='ad.nii.gz'</em>, <em>out_rd='rd.nii.gz'</em>, <em>out_mode='mode.nii.gz'</em>, <em>out_evec='evecs.nii.gz'</em>, <em>out_eval='evals.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstDtiFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow for tensor reconstruction and for computing DTI metrics.
using Weighted Least-Squares.
Performs a tensor reconstruction on the files by ‘globing’
<code class="docutils literal notranslate"><span class="pre">input_files</span></code> and saves the DTI metrics in a directory specified by
<code class="docutils literal notranslate"><span class="pre">out_dir</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input volumes. This path may contain wildcards to
process multiple inputs at once.</p>
</dd>
<dt><strong>bvalues_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvalues files. This path may contain wildcards to use
multiple bvalues files at once.</p>
</dd>
<dt><strong>bvectors_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvectors files. This path may contain wildcards to use
multiple bvectors files at once.</p>
</dd>
<dt><strong>mask_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input masks. This path may contain wildcards to use
multiple masks at once. (default: No mask used)</p>
</dd>
<dt><strong>b0_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold used to find b=0 directions (default 0.0)</p>
</dd>
<dt><strong>bvecs_tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold used to check that norm(bvec) = 1 +/- bvecs_tol
b-vectors are unit vectors (default 0.01)</p>
</dd>
<dt><strong>save_metrics</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable string, optional</span></dt>
<dd><p class="first last">List of metrics to save.
Possible values: fa, ga, rgb, md, ad, rd, mode, tensor, evec, eval
(default [] (all))</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_tensor</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the tensors volume to be saved (default ‘tensors.nii.gz’)</p>
</dd>
<dt><strong>out_fa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the fractional anisotropy volume to be saved
(default ‘fa.nii.gz’)</p>
</dd>
<dt><strong>out_ga</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the geodesic anisotropy volume to be saved
(default ‘ga.nii.gz’)</p>
</dd>
<dt><strong>out_rgb</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the color fa volume to be saved (default ‘rgb.nii.gz’)</p>
</dd>
<dt><strong>out_md</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the mean diffusivity volume to be saved
(default ‘md.nii.gz’)</p>
</dd>
<dt><strong>out_ad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the axial diffusivity volume to be saved
(default ‘ad.nii.gz’)</p>
</dd>
<dt><strong>out_rd</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the radial diffusivity volume to be saved
(default ‘rd.nii.gz’)</p>
</dd>
<dt><strong>out_mode</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the mode volume to be saved (default ‘mode.nii.gz’)</p>
</dd>
<dt><strong>out_evec</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the eigenvectors volume to be saved
(default ‘evecs.nii.gz’)</p>
</dd>
<dt><strong>out_eval</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the eigenvalues to be saved (default ‘evals.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r1c6b043e6f2c-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id59">[1]</a></td><td>Basser, P.J., Mattiello, J., LeBihan, D., 1994. Estimation of
the effective self-diffusion tensor from the NMR spin echo. J Magn
Reson B 103, 247-254.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r1c6b043e6f2c-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id60">[2]</a></td><td>Basser, P., Pierpaoli, C., 1996. Microstructural and
physiological features of tissues elucidated by quantitative
diffusion-tensor MRI.  Journal of Magnetic Resonance 111, 209-219.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r1c6b043e6f2c-3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id61">[3]</a></td><td>Lin-Ching C., Jones D.K., Pierpaoli, C. 2005. RESTORE: Robust
estimation of tensors by outlier rejection. MRM 53: 1088-1095</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r1c6b043e6f2c-4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id62">[4]</a></td><td>hung, SW., Lu, Y., Henry, R.G., 2006. Comparison of bootstrap
approaches for estimation of uncertainties of DTI parameters.
NeuroImage 33, 531-541.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reconstivimflow">
<h3><a class="reference internal" href="#dipy.workflows.reconst.ReconstIvimFlow" title="dipy.workflows.reconst.ReconstIvimFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstIvimFlow</span></code></a><a class="headerlink" href="#reconstivimflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.ReconstIvimFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">ReconstIvimFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstIvimFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstIvimFlow.get_short_name" title="dipy.workflows.reconst.ReconstIvimFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstIvimFlow.run" title="dipy.workflows.reconst.ReconstIvimFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files,&nbsp;bvalues_files,&nbsp;…[,&nbsp;…])</td>
<td>Workflow for Intra-voxel Incoherent Motion reconstruction and for computing IVIM metrics.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="66%" />
<col width="34%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get_fitted_ivim</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.ReconstIvimFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstIvimFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstIvimFlow.get_fitted_ivim">
<code class="descname">get_fitted_ivim</code><span class="sig-paren">(</span><em>data</em>, <em>mask</em>, <em>bval</em>, <em>bvec</em>, <em>b0_threshold=50</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstIvimFlow.get_fitted_ivim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.reconst.ReconstIvimFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstIvimFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstIvimFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>bvalues_files</em>, <em>bvectors_files</em>, <em>mask_files</em>, <em>split_b_D=400</em>, <em>split_b_S0=200</em>, <em>b0_threshold=0</em>, <em>save_metrics=[]</em>, <em>out_dir=''</em>, <em>out_S0_predicted='S0_predicted.nii.gz'</em>, <em>out_perfusion_fraction='perfusion_fraction.nii.gz'</em>, <em>out_D_star='D_star.nii.gz'</em>, <em>out_D='D.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstIvimFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow for Intra-voxel Incoherent Motion reconstruction and for
computing IVIM metrics. Performs a IVIM reconstruction on the files
by ‘globing’ <code class="docutils literal notranslate"><span class="pre">input_files</span></code> and saves the IVIM metrics in a directory
specified by <code class="docutils literal notranslate"><span class="pre">out_dir</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input volumes. This path may contain wildcards to
process multiple inputs at once.</p>
</dd>
<dt><strong>bvalues_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvalues files. This path may contain wildcards to use
multiple bvalues files at once.</p>
</dd>
<dt><strong>bvectors_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvalues files. This path may contain wildcards to use
multiple bvalues files at once.</p>
</dd>
<dt><strong>mask_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input masks. This path may contain wildcards to use
multiple masks at once. (default: No mask used)</p>
</dd>
<dt><strong>split_b_D</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Value to split the bvals to estimate D for the two-stage process of
fitting
(default 400)</p>
</dd>
<dt><strong>split_b_S0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Value to split the bvals to estimate S0 for the two-stage process
of fitting.
(default 200)</p>
</dd>
<dt><strong>b0_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Threshold value for the b0 bval.
(default 0)</p>
</dd>
<dt><strong>save_metrics</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable string, optional</span></dt>
<dd><p class="first last">List of metrics to save.
Possible values: S0_predicted, perfusion_fraction, D_star, D
(default [] (all))</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_S0_predicted</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the S0 signal estimated to be saved
(default: ‘S0_predicted.nii.gz’)</p>
</dd>
<dt><strong>out_perfusion_fraction</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the estimated volume fractions to be saved
(default ‘perfusion_fraction.nii.gz’)</p>
</dd>
<dt><strong>out_D_star</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the estimated pseudo-diffusion parameter to be saved
(default ‘D_star.nii.gz’)</p>
</dd>
<dt><strong>out_D</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the estimated diffusion parameter to be saved
(default ‘D.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r7e16754271e7-stejskal65" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id63">[Stejskal65]</a></td><td>Stejskal, E. O.; Tanner, J. E. (1 January 1965).
“Spin Diffusion Measurements: Spin Echoes in the
Presence of a Time-Dependent Field Gradient”. The
Journal of Chemical Physics 42 (1): 288.
Bibcode: 1965JChPh..42..288S. doi:10.1063/1.1695690.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r7e16754271e7-lebihan84" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id64">[LeBihan84]</a></td><td>Le Bihan, Denis, et al. “Separation of diffusion
and perfusion in intravoxel incoherent motion MR
imaging.” Radiology 168.2 (1988): 497-505.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reconstmapmriflow">
<h3><a class="reference internal" href="#dipy.workflows.reconst.ReconstMAPMRIFlow" title="dipy.workflows.reconst.ReconstMAPMRIFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReconstMAPMRIFlow</span></code></a><a class="headerlink" href="#reconstmapmriflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.ReconstMAPMRIFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">ReconstMAPMRIFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstMAPMRIFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstMAPMRIFlow.get_short_name" title="dipy.workflows.reconst.ReconstMAPMRIFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.ReconstMAPMRIFlow.run" title="dipy.workflows.reconst.ReconstMAPMRIFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(data_files,&nbsp;bvals_files,&nbsp;bvecs_files,&nbsp;…)</td>
<td>Workflow for fitting the MAPMRI model (with optional Laplacian regularization).</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.ReconstMAPMRIFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstMAPMRIFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.reconst.ReconstMAPMRIFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstMAPMRIFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.ReconstMAPMRIFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>data_files</em>, <em>bvals_files</em>, <em>bvecs_files</em>, <em>small_delta</em>, <em>big_delta</em>, <em>b0_threshold=50.0</em>, <em>laplacian=True</em>, <em>positivity=True</em>, <em>bval_threshold=2000</em>, <em>save_metrics=[]</em>, <em>laplacian_weighting=0.05</em>, <em>radial_order=6</em>, <em>out_dir=''</em>, <em>out_rtop='rtop.nii.gz'</em>, <em>out_lapnorm='lapnorm.nii.gz'</em>, <em>out_msd='msd.nii.gz'</em>, <em>out_qiv='qiv.nii.gz'</em>, <em>out_rtap='rtap.nii.gz'</em>, <em>out_rtpp='rtpp.nii.gz'</em>, <em>out_ng='ng.nii.gz'</em>, <em>out_perng='perng.nii.gz'</em>, <em>out_parng='parng.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.ReconstMAPMRIFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow for fitting the MAPMRI model (with optional Laplacian
regularization). Generates rtop, lapnorm, msd, qiv, rtap, rtpp,
non-gaussian (ng), parallel ng, perpendicular ng saved in a nifti
format in input files provided by <cite>data_files</cite> and saves the nifti
files to an output directory specified by <cite>out_dir</cite>.</p>
<p>In order for the MAPMRI workflow to work in the way
intended either the laplacian or positivity or both must
be set to True.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>data_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input volume.</p>
</dd>
<dt><strong>bvals_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bval files.</p>
</dd>
<dt><strong>bvecs_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the bvec files.</p>
</dd>
<dt><strong>small_delta</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Small delta value used in generation of gradient table of provided
bval and bvec.</p>
</dd>
<dt><strong>big_delta</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Big delta value used in generation of gradient table of provided
bval and bvec.</p>
</dd>
<dt><strong>b0_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold used to find b=0 directions (default 0.0)</p>
</dd>
<dt><strong>laplacian</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Regularize using the Laplacian of the MAP-MRI basis (default True)</p>
</dd>
<dt><strong>positivity</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Constrain the propagator to be positive. (default True)</p>
</dd>
<dt><strong>bval_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Sets the b-value threshold to be used in the scale factor
estimation. In order for the estimated non-Gaussianity to have
meaning this value should set to a lower value (b&lt;2000 s/mm^2)
such that the scale factors are estimated on signal points that
reasonably represent the spins at Gaussian diffusion.
(default: 2000)</p>
</dd>
<dt><strong>save_metrics</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable string, optional</span></dt>
<dd><p class="first last">List of metrics to save.
Possible values: rtop, laplacian_signal, msd, qiv, rtap, rtpp,
ng, perng, parng
(default: [] (all))</p>
</dd>
<dt><strong>laplacian_weighting</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Weighting value used in fitting the MAPMRI model in the laplacian
and both model types. (default: 0.05)</p>
</dd>
<dt><strong>radial_order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">unsigned int, optional</span></dt>
<dd><p class="first last">Even value used to set the order of the basis
(default: 6)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default: input file directory)</p>
</dd>
<dt><strong>out_rtop</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the rtop to be saved</p>
</dd>
<dt><strong>out_lapnorm</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the norm of laplacian signal to be saved</p>
</dd>
<dt><strong>out_msd</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the msd to be saved</p>
</dd>
<dt><strong>out_qiv</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the qiv to be saved</p>
</dd>
<dt><strong>out_rtap</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the rtap to be saved</p>
</dd>
<dt><strong>out_rtpp</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the rtpp to be saved</p>
</dd>
<dt><strong>out_ng</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the Non-Gaussianity to be saved</p>
</dd>
<dt><strong>out_perng</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the Non-Gaussianity perpendicular to be saved</p>
</dd>
<dt><strong>out_parng</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the Non-Gaussianity parallel to be saved</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tensormodel">
<h3><a class="reference internal" href="#dipy.workflows.reconst.TensorModel" title="dipy.workflows.reconst.TensorModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TensorModel</span></code></a><a class="headerlink" href="#tensormodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.TensorModel">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">TensorModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>fit_method='WLS'</em>, <em>return_S0_hat=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.TensorModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.reconst.base.ReconstModel</span></code></a></p>
<p>Diffusion Tensor</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.TensorModel.fit" title="dipy.workflows.reconst.TensorModel.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td>Fit method of the DTI model class</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.TensorModel.predict" title="dipy.workflows.reconst.TensorModel.predict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">predict</span></code></a>(dti_params[,&nbsp;S0])</td>
<td>Predict a signal for this TensorModel class instance given parameters.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.TensorModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>fit_method='WLS'</em>, <em>return_S0_hat=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.TensorModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>A Diffusion Tensor Model <a class="reference internal" href="#rcef4404f4d4d-1" id="id65">[1]</a>, <a class="reference internal" href="#rcef4404f4d4d-2" id="id66">[2]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>gtab</strong> <span class="classifier-delimiter">:</span> <span class="classifier">GradientTable class instance</span></dt>
<dd></dd>
<dt><strong>fit_method</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or callable</span></dt>
<dd><p class="first">str can be one of the following:</p>
<dl class="last docutils">
<dt>‘WLS’ for weighted least squares</dt>
<dd><p class="first last"><code class="xref py py-func docutils literal notranslate"><span class="pre">dti.wls_fit_tensor()</span></code></p>
</dd>
<dt>‘LS’ or ‘OLS’ for ordinary least squares</dt>
<dd><p class="first last"><code class="xref py py-func docutils literal notranslate"><span class="pre">dti.ols_fit_tensor()</span></code></p>
</dd>
<dt>‘NLLS’ for non-linear least-squares</dt>
<dd><p class="first last"><code class="xref py py-func docutils literal notranslate"><span class="pre">dti.nlls_fit_tensor()</span></code></p>
</dd>
<dt>‘RT’ or ‘restore’ or ‘RESTORE’ for RESTORE robust tensor</dt>
<dd><p class="first last">fitting <a class="reference internal" href="#rcef4404f4d4d-3" id="id67">[3]</a>
<code class="xref py py-func docutils literal notranslate"><span class="pre">dti.restore_fit_tensor()</span></code></p>
</dd>
<dt>callable has to have the signature:</dt>
<dd><p class="first last">fit_method(design_matrix, data, <a href="#id68"><span class="problematic" id="id69">*</span></a>args, <a href="#id70"><span class="problematic" id="id71">**</span></a>kwargs)</p>
</dd>
</dl>
</dd>
<dt><strong>return_S0_hat</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Boolean to return (True) or not (False) the S0 values for the fit.</p>
</dd>
<dt><strong>args, kwargs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">arguments and key-word arguments passed to the</span></dt>
<dd><p class="first last">fit_method. See dti.wls_fit_tensor, dti.ols_fit_tensor for details</p>
</dd>
<dt><strong>min_signal</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The minimum signal value. Needs to be a strictly positive
number. Default: minimal signal in the data provided to <cite>fit</cite>.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>In order to increase speed of processing, tensor fitting is done
simultaneously over many voxels. Many fit_methods use the ‘step’
parameter to set the number of voxels that will be fit at once in each
iteration. This is the chunk size as a number of voxels. A larger step
value should speed things up, but it will also take up more memory. It
is advisable to keep an eye on memory consumption as this value is
increased.</p>
<p>Example : In <code class="xref py py-func docutils literal notranslate"><span class="pre">iter_fit_tensor()</span></code> we have a default step value of
1e4</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rcef4404f4d4d-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id65">1</a>, <a class="fn-backref" href="#id72">2</a>)</em> Basser, P.J., Mattiello, J., LeBihan, D., 1994. Estimation of
the effective self-diffusion tensor from the NMR spin echo. J Magn
Reson B 103, 247-254.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rcef4404f4d4d-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id66">1</a>, <a class="fn-backref" href="#id73">2</a>)</em> Basser, P., Pierpaoli, C., 1996. Microstructural and
physiological features of tissues elucidated by quantitative
diffusion-tensor MRI.  Journal of Magnetic Resonance 111, 209-219.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rcef4404f4d4d-3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><em>(<a class="fn-backref" href="#id67">1</a>, <a class="fn-backref" href="#id74">2</a>)</em> Lin-Ching C., Jones D.K., Pierpaoli, C. 2005. RESTORE: Robust
estimation of tensors by outlier rejection. MRM 53: 1088-1095</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.TensorModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.TensorModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit method of the DTI model class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">The measured signal from one voxel.</p>
</dd>
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">A boolean array used to mark the coordinates in the data that
should be analyzed that has the shape data.shape[:-1]</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.TensorModel.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>dti_params</em>, <em>S0=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.TensorModel.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict a signal for this TensorModel class instance given parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dti_params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The last dimension should have 12 tensor parameters: 3
eigenvalues, followed by the 3 eigenvectors</p>
</dd>
<dt><strong>S0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float or ndarray</span></dt>
<dd><p class="first last">The non diffusion-weighted signal in every voxel, or across all
voxels. Default: 1</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id75">
<h3><a class="reference internal" href="#dipy.workflows.reconst.Workflow" title="dipy.workflows.reconst.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.reconst.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.reconst.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.Workflow.get_io_iterator" title="dipy.workflows.reconst.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.Workflow.get_short_name" title="dipy.workflows.reconst.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.Workflow.get_sub_runs" title="dipy.workflows.reconst.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.reconst.Workflow.manage_output_overwrite" title="dipy.workflows.reconst.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.reconst.Workflow.run" title="dipy.workflows.reconst.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.reconst.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.reconst.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.reconst.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ivimmodel">
<h3>IvimModel<a class="headerlink" href="#ivimmodel" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.IvimModel">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">IvimModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>fit_method='LM'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.IvimModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Selector function to switch between the 2-stage Levenberg-Marquardt based
NLLS fitting method (also containing the linear fit): <cite>LM</cite> and the Variable
Projections based fitting method: <cite>VarPro</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>fit_method</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">The value fit_method can either be ‘LM’ or ‘VarPro’.
default : LM</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="auto-response">
<h3>auto_response<a class="headerlink" href="#auto-response" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.auto_response">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">auto_response</code><span class="sig-paren">(</span><em>gtab</em>, <em>data</em>, <em>roi_center=None</em>, <em>roi_radius=10</em>, <em>fa_thr=0.7</em>, <em>fa_callable=&lt;function fa_superior&gt;</em>, <em>return_number_of_voxels=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.auto_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatic estimation of response function using FA.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>gtab</strong> <span class="classifier-delimiter">:</span> <span class="classifier">GradientTable</span></dt>
<dd></dd>
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">diffusion data</p>
</dd>
<dt><strong>roi_center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple, (3,)</span></dt>
<dd><p class="first last">Center of ROI in data. If center is None, it is assumed that it is
the center of the volume with shape <cite>data.shape[:3]</cite>.</p>
</dd>
<dt><strong>roi_radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">radius of cubic ROI</p>
</dd>
<dt><strong>fa_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">FA threshold</p>
</dd>
<dt><strong>fa_callable</strong> <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd><p class="first last">A callable that defines an operation that compares FA with the fa_thr.
The operator should have two positional arguments
(e.g., <cite>fa_operator(FA, fa_thr)</cite>) and it should return a bool array.</p>
</dd>
<dt><strong>return_number_of_voxels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True, returns the number of voxels used for estimating the response
function.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>response</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple, (2,)</span></dt>
<dd><p class="first last">(<cite>evals</cite>, <cite>S0</cite>)</p>
</dd>
<dt><strong>ratio</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The ratio between smallest versus largest eigenvalue of the response.</p>
</dd>
<dt><strong>number of voxels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional)</span></dt>
<dd><p class="first last">The number of voxels used for estimating the response function.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>In CSD there is an important pre-processing step: the estimation of the
fiber response function. In order to do this we look for voxels with very
anisotropic configurations. For example we can use an ROI (20x20x20) at
the center of the volume and store the signal values for the voxels with
FA values higher than 0.7. Of course, if we haven’t precalculated FA we
need to fit a Tensor model to the datasets. Which is what we do in this
function.</p>
<p>For the response we also need to find the average S0 in the ROI. This is
possible using <cite>gtab.b0s_mask()</cite> we can find all the S0 volumes (which
correspond to b-values equal 0) in the dataset.</p>
<p>The <cite>response</cite> consists always of a prolate tensor created by averaging
the highest and second highest eigenvalues in the ROI with FA higher than
threshold. We also include the average S0s.</p>
<p>We also return the <cite>ratio</cite> which is used for the SDT models. If requested,
the number of voxels used for estimating the response function is also
returned, which can be used to judge the fidelity of the response function.
As a rule of thumb, at least 300 voxels should be used to estimate a good
response function (see <a class="reference internal" href="#r391093edbf61-1" id="id76">[1]</a>).</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r391093edbf61-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id76">1</a>, <a class="fn-backref" href="#id77">2</a>)</em> Tournier, J.D., et al. NeuroImage 2004. Direct estimation of the</td></tr>
</tbody>
</table>
<p>fiber orientation density function from diffusion-weighted MRI
data using spherical deconvolution</p>
</dd></dl>

</div>
<div class="section" id="axial-diffusivity">
<h3>axial_diffusivity<a class="headerlink" href="#axial-diffusivity" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.axial_diffusivity">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">axial_diffusivity</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.axial_diffusivity" title="Permalink to this definition">¶</a></dt>
<dd><p>Axial Diffusivity (AD) of a diffusion tensor.
Also called parallel diffusivity.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>evals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array-like</span></dt>
<dd><p class="first last">Eigenvalues of a diffusion tensor, must be sorted in descending order
along <cite>axis</cite>.</p>
</dd>
<dt><strong>axis</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>ad</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Calculated AD.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>AD is calculated with the following equation:</p>
<div class="math notranslate nohighlight">
\[AD = \lambda_1\]</div>
</dd></dl>

</div>
<div class="section" id="color-fa">
<h3>color_fa<a class="headerlink" href="#color-fa" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.color_fa">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">color_fa</code><span class="sig-paren">(</span><em>fa</em>, <em>evecs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.color_fa" title="Permalink to this definition">¶</a></dt>
<dd><p>Color fractional anisotropy of diffusion tensor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>fa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array-like</span></dt>
<dd><blockquote class="first">
<div><p>Array of the fractional anisotropy (can be 1D, 2D or 3D)</p>
</div></blockquote>
<dl class="last docutils">
<dt>evecs <span class="classifier-delimiter">:</span> <span class="classifier">array-like</span></dt>
<dd><p class="first last">eigen vectors from the tensor model</p>
</dd>
</dl>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>rgb</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Array with 3 channels for each color as the last dimension.</span></dt>
<dd><p class="first last">Colormap of the FA with red for the x value, y for the green
value and z for the blue value.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p>ec{e}))  imes fa</p>
</dd></dl>

</div>
<div class="section" id="fractional-anisotropy">
<h3>fractional_anisotropy<a class="headerlink" href="#fractional-anisotropy" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.fractional_anisotropy">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">fractional_anisotropy</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.fractional_anisotropy" title="Permalink to this definition">¶</a></dt>
<dd><p>Fractional anisotropy (FA) of a diffusion tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>evals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array-like</span></dt>
<dd><p class="first last">Eigenvalues of a diffusion tensor.</p>
</dd>
<dt><strong>axis</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>fa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Calculated FA. Range is 0 &lt;= FA &lt;= 1.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>FA is calculated using the following equation:</p>
<div class="math notranslate nohighlight">
\[FA = \sqrt{\frac{1}{2}\frac{(\lambda_1-\lambda_2)^2+(\lambda_1-
            \lambda_3)^2+(\lambda_2-\lambda_3)^2}{\lambda_1^2+
            \lambda_2^2+\lambda_3^2}}\]</div>
</dd></dl>

</div>
<div class="section" id="geodesic-anisotropy">
<h3>geodesic_anisotropy<a class="headerlink" href="#geodesic-anisotropy" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.geodesic_anisotropy">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">geodesic_anisotropy</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.geodesic_anisotropy" title="Permalink to this definition">¶</a></dt>
<dd><p>Geodesic anisotropy (GA) of a diffusion tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>evals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array-like</span></dt>
<dd><p class="first last">Eigenvalues of a diffusion tensor.</p>
</dd>
<dt><strong>axis</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>ga</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Calculated GA. In the range 0 to +infinity</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>GA is calculated using the following equation given in <a class="reference internal" href="#rd98067e65c14-1" id="id78">[1]</a>:</p>
<div class="math notranslate nohighlight">
\[GA = \sqrt{\sum_{i=1}^3
\log^2{\left ( \lambda_i/&lt;\mathbf{D}&gt; \right )}},
\quad \textrm{where} \quad &lt;\mathbf{D}&gt; =
(\lambda_1\lambda_2\lambda_3)^{1/3}\]</div>
<p>Note that the notation, <span class="math notranslate nohighlight">\(&lt;D&gt;\)</span>, is often used as the mean diffusivity (MD)
of the diffusion tensor and can lead to confusions in the literature
(see <a class="reference internal" href="#rd98067e65c14-1" id="id79">[1]</a> versus <a class="reference internal" href="#rd98067e65c14-2" id="id80">[2]</a> versus <a class="reference internal" href="#rd98067e65c14-3" id="id81">[3]</a> for example). Reference <a class="reference internal" href="#rd98067e65c14-2" id="id82">[2]</a> defines
geodesic anisotropy (GA) with <span class="math notranslate nohighlight">\(&lt;D&gt;\)</span> as the MD in the denominator of the
sum. This is wrong. The original paper <a class="reference internal" href="#rd98067e65c14-1" id="id83">[1]</a> defines GA with
<span class="math notranslate nohighlight">\(&lt;D&gt; = det(D)^{1/3}\)</span>, as the isotropic part of the distance. This might be
an explanation for the confusion. The isotropic part of the diffusion
tensor in Euclidean space is the MD whereas the isotropic part of the
tensor in log-Euclidean space is <span class="math notranslate nohighlight">\(det(D)^{1/3}\)</span>. The Appendix of <a class="reference internal" href="#rd98067e65c14-1" id="id84">[1]</a> and
log-Euclidean derivations from <a class="reference internal" href="#rd98067e65c14-3" id="id85">[3]</a> are clear on this. Hence, all that to
say that <span class="math notranslate nohighlight">\(&lt;D&gt; = det(D)^{1/3}\)</span> here for the GA definition and not MD.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rd98067e65c14-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id78">1</a>, <a class="fn-backref" href="#id79">2</a>, <a class="fn-backref" href="#id83">3</a>, <a class="fn-backref" href="#id84">4</a>, <a class="fn-backref" href="#id86">5</a>)</em> P. G. Batchelor, M. Moakher, D. Atkinson, F. Calamante,
A. Connelly, “A rigorous framework for diffusion tensor calculus”,
Magnetic Resonance in Medicine, vol. 53, pp. 221-225, 2005.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rd98067e65c14-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id80">1</a>, <a class="fn-backref" href="#id82">2</a>, <a class="fn-backref" href="#id87">3</a>)</em> M. M. Correia, V. F. Newcombe, G.B. Williams.
“Contrast-to-noise ratios for indices of anisotropy obtained from
diffusion MRI: a study with standard clinical b-values at 3T”.
NeuroImage, vol. 57, pp. 1103-1115, 2011.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rd98067e65c14-3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><em>(<a class="fn-backref" href="#id81">1</a>, <a class="fn-backref" href="#id85">2</a>, <a class="fn-backref" href="#id88">3</a>)</em> A. D. Lee, etal, P. M. Thompson.
“Comparison of fractional and geodesic anisotropy in diffusion tensor
images of 90 monozygotic and dizygotic twins”. 5th IEEE International
Symposium on Biomedical Imaging (ISBI), pp. 943-946, May 2008.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rd98067e65c14-4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id89">[4]</a></td><td>V. Arsigny, P. Fillard, X. Pennec, N. Ayache.
“Log-Euclidean metrics for fast and simple calculus on diffusion
tensors.” Magnetic Resonance in Medecine, vol 56, pp. 411-421, 2006.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="get-mode">
<h3>get_mode<a class="headerlink" href="#get-mode" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.get_mode">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">get_mode</code><span class="sig-paren">(</span><em>q_form</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.get_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Mode (MO) of a diffusion tensor <a class="reference internal" href="#r8502d494f176-1" id="id90">[1]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>q_form</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The quadratic form of a tensor, or an array with quadratic forms of
tensors. Should be of shape (x, y, z, 3, 3) or (n, 3, 3) or (3, 3).</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>mode</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Calculated tensor mode in each spatial coordinate.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Mode ranges between -1 (planar anisotropy) and +1 (linear anisotropy)
with 0 representing orthotropy. Mode is calculated with the
following equation (equation 9 in <a class="reference internal" href="#r8502d494f176-1" id="id91">[1]</a>):</p>
<div class="math notranslate nohighlight">
\[Mode = 3*\sqrt{6}*det(\widetilde{A}/norm(\widetilde{A}))\]</div>
<p>Where <span class="math notranslate nohighlight">\(\widetilde{A}\)</span> is the deviatoric part of the tensor quadratic form.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r8502d494f176-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id5">1</a>, <a class="fn-backref" href="#id90">2</a>, <a class="fn-backref" href="#id91">3</a>, <a class="fn-backref" href="#id92">4</a>)</em> Daniel B. Ennis and G. Kindlmann, “Orthogonal Tensor
Invariants and the Analysis of Diffusion Tensor Magnetic Resonance
Images”, Magnetic Resonance in Medicine, vol. 55, no. 1, pp. 136-146,
2006.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="get-sphere">
<h3>get_sphere<a class="headerlink" href="#get-sphere" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.get_sphere">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">get_sphere</code><span class="sig-paren">(</span><em>name='symmetric362'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.get_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>provide triangulated spheres</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">which sphere - one of:
* ‘symmetric362’
* ‘symmetric642’
* ‘symmetric724’
* ‘repulsion724’
* ‘repulsion100’
* ‘repulsion200’</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sphere</strong> <span class="classifier-delimiter">:</span> <span class="classifier">a dipy.core.sphere.Sphere class instance</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="k">import</span> <span class="n">get_sphere</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s1">&#39;symmetric362&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="n">sphere</span><span class="o">.</span><span class="n">faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">362</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">faces</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">720</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s1">&#39;not a sphere name&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">DataError</span>: <span class="n">No sphere called &quot;not a sphere name&quot;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="gradient-table">
<h3>gradient_table<a class="headerlink" href="#gradient-table" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.gradient_table">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">gradient_table</code><span class="sig-paren">(</span><em>bvals</em>, <em>bvecs=None</em>, <em>big_delta=None</em>, <em>small_delta=None</em>, <em>b0_threshold=50</em>, <em>atol=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.gradient_table" title="Permalink to this definition">¶</a></dt>
<dd><p>A general function for creating diffusion MR gradients.</p>
<p>It reads, loads and prepares scanner parameters like the b-values and
b-vectors so that they can be useful during the reconstruction process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>bvals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">can be any of the four options</span></dt>
<dd><ol class="first last arabic simple">
<li>an array of shape (N,) or (1, N) or (N, 1) with the b-values.</li>
<li>a path for the file which contains an array like the above (1).</li>
<li>an array of shape (N, 4) or (4, N). Then this parameter is
considered to be a b-table which contains both bvals and bvecs. In
this case the next parameter is skipped.</li>
<li>a path for the file which contains an array like the one at (3).</li>
</ol>
</dd>
<dt><strong>bvecs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">can be any of two options</span></dt>
<dd><ol class="first last arabic simple">
<li>an array of shape (N, 3) or (3, N) with the b-vectors.</li>
<li>a path for the file which contains an array like the previous.</li>
</ol>
</dd>
<dt><strong>big_delta</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">acquisition pulse separation time in seconds (default None)</p>
</dd>
<dt><strong>small_delta</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">acquisition pulse duration time in seconds (default None)</p>
</dd>
<dt><strong>b0_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">All b-values with values less than or equal to <cite>bo_threshold</cite> are
considered as b0s i.e. without diffusion weighting.</p>
</dd>
<dt><strong>atol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">All b-vectors need to be unit vectors up to a tolerance.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>gradients</strong> <span class="classifier-delimiter">:</span> <span class="classifier">GradientTable</span></dt>
<dd><p class="first last">A GradientTable with all the gradient information.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ol class="arabic simple">
<li>Often b0s (b-values which correspond to images without diffusion
weighting) have 0 values however in some cases the scanner cannot
provide b0s of an exact 0 value and it gives a bit higher values
e.g. 6 or 12. This is the purpose of the b0_threshold in the __init__.</li>
<li>We assume that the minimum number of b-values is 7.</li>
<li>B-vectors should be unit vectors.</li>
</ol>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.gradients</span> <span class="k">import</span> <span class="n">gradient_table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span> <span class="o">=</span> <span class="mi">1500</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sq2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="n">sq2</span><span class="p">,</span> <span class="n">sq2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="n">sq2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sq2</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">sq2</span><span class="p">,</span> <span class="n">sq2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span><span class="o">.</span><span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span><span class="o">.</span><span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">bvecs</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">shape</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="literal-eval">
<h3>literal_eval<a class="headerlink" href="#literal-eval" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.literal_eval">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">literal_eval</code><span class="sig-paren">(</span><em>node_or_string</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.literal_eval" title="Permalink to this definition">¶</a></dt>
<dd><p>Safely evaluate an expression node or a string containing a Python
expression.  The string or node provided may only consist of the following
Python literal structures: strings, bytes, numbers, tuples, lists, dicts,
sets, booleans, and None.</p>
</dd></dl>

</div>
<div class="section" id="id93">
<h3>load_nifti<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.load_nifti">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">load_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>return_img=False</em>, <em>return_voxsize=False</em>, <em>return_coords=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.load_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="lower-triangular">
<h3>lower_triangular<a class="headerlink" href="#lower-triangular" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.lower_triangular">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">lower_triangular</code><span class="sig-paren">(</span><em>tensor</em>, <em>b0=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.lower_triangular" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the six lower triangular values of the tensor and a dummy variable
if b0 is not None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>tensor</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array_like (…, 3, 3)</span></dt>
<dd><p class="first last">a collection of 3, 3 diffusion tensors</p>
</dd>
<dt><strong>b0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">if b0 is not none log(b0) is returned as the dummy variable</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>D</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">If b0 is none, then the shape will be (…, 6) otherwise (…, 7)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="mean-diffusivity">
<h3>mean_diffusivity<a class="headerlink" href="#mean-diffusivity" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.mean_diffusivity">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">mean_diffusivity</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.mean_diffusivity" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Diffusivity (MD) of a diffusion tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>evals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array-like</span></dt>
<dd><p class="first last">Eigenvalues of a diffusion tensor.</p>
</dd>
<dt><strong>axis</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>md</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Calculated MD.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>MD is calculated with the following equation:</p>
<div class="math notranslate nohighlight">
\[MD = \frac{\lambda_1 + \lambda_2 + \lambda_3}{3}\]</div>
</dd></dl>

</div>
<div class="section" id="peaks-from-model">
<h3>peaks_from_model<a class="headerlink" href="#peaks-from-model" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.peaks_from_model">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">peaks_from_model</code><span class="sig-paren">(</span><em>model</em>, <em>data</em>, <em>sphere</em>, <em>relative_peak_threshold</em>, <em>min_separation_angle</em>, <em>mask=None</em>, <em>return_odf=False</em>, <em>return_sh=True</em>, <em>gfa_thr=0</em>, <em>normalize_peaks=False</em>, <em>sh_order=8</em>, <em>sh_basis_type=None</em>, <em>npeaks=5</em>, <em>B=None</em>, <em>invB=None</em>, <em>parallel=False</em>, <em>nbr_processes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.peaks_from_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model to data and computes peaks and metrics</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>model</strong> <span class="classifier-delimiter">:</span> <span class="classifier">a model instance</span></dt>
<dd><p class="first last"><cite>model</cite> will be used to fit the data.</p>
</dd>
<dt><strong>sphere</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Sphere</span></dt>
<dd><p class="first last">The Sphere providing discrete directions for evaluation.</p>
</dd>
<dt><strong>relative_peak_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Only return peaks greater than <code class="docutils literal notranslate"><span class="pre">relative_peak_threshold</span> <span class="pre">*</span> <span class="pre">m</span></code> where m
is the largest peak.</p>
</dd>
<dt><strong>min_separation_angle</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float in [0, 90] The minimum distance between</span></dt>
<dd><p class="first last">directions. If two peaks are too close only the larger of the two is
returned.</p>
</dd>
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, optional</span></dt>
<dd><p class="first last">If <cite>mask</cite> is provided, voxels that are False in <cite>mask</cite> are skipped and
no peaks are returned.</p>
</dd>
<dt><strong>return_odf</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True, the odfs are returned.</p>
</dd>
<dt><strong>return_sh</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True, the odf as spherical harmonics coefficients is returned</p>
</dd>
<dt><strong>gfa_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Voxels with gfa less than <cite>gfa_thr</cite> are skipped, no peaks are returned.</p>
</dd>
<dt><strong>normalize_peaks</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If true, all peak values are calculated relative to <cite>max(odf)</cite>.</p>
</dd>
<dt><strong>sh_order</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Maximum SH order in the SH fit.  For <cite>sh_order</cite>, there will be
<code class="docutils literal notranslate"><span class="pre">(sh_order</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">*</span> <span class="pre">(sh_order</span> <span class="pre">+</span> <span class="pre">2)</span> <span class="pre">/</span> <span class="pre">2</span></code> SH coefficients (default 8).</p>
</dd>
<dt><strong>sh_basis_type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{None, ‘tournier07’, ‘descoteaux07’}</span></dt>
<dd><p class="first last"><code class="docutils literal notranslate"><span class="pre">None</span></code> for the default DIPY basis,
<code class="docutils literal notranslate"><span class="pre">tournier07</span></code> for the Tournier 2007 <a class="reference internal" href="#r238c65f161c0-2" id="id94">[2]</a> basis, and
<code class="docutils literal notranslate"><span class="pre">descoteaux07</span></code> for the Descoteaux 2007 <a class="reference internal" href="#r238c65f161c0-1" id="id95">[1]</a> basis
(<code class="docutils literal notranslate"><span class="pre">None</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">descoteaux07</span></code>).</p>
</dd>
<dt><strong>sh_smooth</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Lambda-regularization in the SH fit (default 0.0).</p>
</dd>
<dt><strong>npeaks</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum number of peaks found (default 5 peaks).</p>
</dd>
<dt><strong>B</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray, optional</span></dt>
<dd><p class="first last">Matrix that transforms spherical harmonics to spherical function
<code class="docutils literal notranslate"><span class="pre">sf</span> <span class="pre">=</span> <span class="pre">np.dot(sh,</span> <span class="pre">B)</span></code>.</p>
</dd>
<dt><strong>invB</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray, optional</span></dt>
<dd><p class="first last">Inverse of B.</p>
</dd>
<dt><strong>parallel: bool</strong></dt>
<dd><p class="first last">If True, use multiprocessing to compute peaks and metric
(default False). Temporary files are saved in the default temporary
directory of the system. It can be changed using <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">tempfile</span></code>
and <code class="docutils literal notranslate"><span class="pre">tempfile.tempdir</span> <span class="pre">=</span> <span class="pre">'/path/to/tempdir'</span></code>.</p>
</dd>
<dt><strong>nbr_processes: int</strong></dt>
<dd><p class="first last">If <cite>parallel</cite> is True, the number of subprocesses to use
(default multiprocessing.cpu_count()).</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pam</strong> <span class="classifier-delimiter">:</span> <span class="classifier">PeaksAndMetrics</span></dt>
<dd><p class="first last">An object with <code class="docutils literal notranslate"><span class="pre">gfa</span></code>, <code class="docutils literal notranslate"><span class="pre">peak_directions</span></code>, <code class="docutils literal notranslate"><span class="pre">peak_values</span></code>,
<code class="docutils literal notranslate"><span class="pre">peak_indices</span></code>, <code class="docutils literal notranslate"><span class="pre">odf</span></code>, <code class="docutils literal notranslate"><span class="pre">shm_coeffs</span></code> as attributes</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r238c65f161c0-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id95">1</a>, <a class="fn-backref" href="#id96">2</a>)</em> Descoteaux, M., Angelino, E., Fitzgibbons, S. and Deriche, R.
Regularized, Fast, and Robust Analytical Q-ball Imaging.
Magn. Reson. Med. 2007;58:497-510.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r238c65f161c0-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id94">1</a>, <a class="fn-backref" href="#id97">2</a>)</em> Tournier J.D., Calamante F. and Connelly A. Robust determination
of the fibre orientation distribution in diffusion MRI:
Non-negativity constrained super-resolved spherical deconvolution.
NeuroImage. 2007;35(4):1459-1472.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="peaks-to-niftis">
<h3>peaks_to_niftis<a class="headerlink" href="#peaks-to-niftis" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.peaks_to_niftis">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">peaks_to_niftis</code><span class="sig-paren">(</span><em>pam</em>, <em>fname_shm</em>, <em>fname_dirs</em>, <em>fname_values</em>, <em>fname_indices</em>, <em>fname_gfa</em>, <em>reshape_dirs=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.peaks_to_niftis" title="Permalink to this definition">¶</a></dt>
<dd><p>Save SH, directions, indices and values of peaks to Nifti.</p>
</dd></dl>

</div>
<div class="section" id="radial-diffusivity">
<h3>radial_diffusivity<a class="headerlink" href="#radial-diffusivity" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.radial_diffusivity">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">radial_diffusivity</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.radial_diffusivity" title="Permalink to this definition">¶</a></dt>
<dd><p>Radial Diffusivity (RD) of a diffusion tensor.
Also called perpendicular diffusivity.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>evals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array-like</span></dt>
<dd><p class="first last">Eigenvalues of a diffusion tensor, must be sorted in descending order
along <cite>axis</cite>.</p>
</dd>
<dt><strong>axis</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>rd</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Calculated RD.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>RD is calculated with the following equation:</p>
<div class="math notranslate nohighlight">
\[RD = \frac{\lambda_2 + \lambda_3}{2}\]</div>
</dd></dl>

</div>
<div class="section" id="read-bvals-bvecs">
<h3>read_bvals_bvecs<a class="headerlink" href="#read-bvals-bvecs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.read_bvals_bvecs">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">read_bvals_bvecs</code><span class="sig-paren">(</span><em>fbvals</em>, <em>fbvecs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.read_bvals_bvecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Read b-values and b-vectors from disk</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>fbvals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Full path to file with b-values. None to not read bvals.</p>
</dd>
<dt><strong>fbvecs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Full path of file with b-vectors. None to not read bvecs.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bvals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, (N,) or None</span></dt>
<dd></dd>
<dt><strong>bvecs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, (N, 3) or None</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Files can be either ‘.bvals’/’.bvecs’ or ‘.txt’ or ‘.npy’ (containing
arrays stored with the appropriate values).</p>
</dd></dl>

</div>
<div class="section" id="id98">
<h3>save_nifti<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.save_nifti">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">save_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>data</em>, <em>affine</em>, <em>hdr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.save_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="save-peaks">
<h3>save_peaks<a class="headerlink" href="#save-peaks" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.save_peaks">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">save_peaks</code><span class="sig-paren">(</span><em>fname</em>, <em>pam</em>, <em>affine=None</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.save_peaks" title="Permalink to this definition">¶</a></dt>
<dd><p>Save all important attributes of object PeaksAndMetrics in a PAM5 file
(HDF5).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>fname</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Filename of PAM5 file</p>
</dd>
<dt><strong>pam</strong> <span class="classifier-delimiter">:</span> <span class="classifier">PeaksAndMetrics</span></dt>
<dd><p class="first last">Object holding peak_dirs, shm_coeffs and other attributes</p>
</dd>
<dt><strong>affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">The 4x4 matrix transforming the date from native to world coordinates.
PeaksAndMetrics should have that attribute but if not it can be
provided here. Default None.</p>
</dd>
<dt><strong>verbose</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Print summary information about the saved file.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="split-dki-param">
<h3>split_dki_param<a class="headerlink" href="#split-dki-param" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.split_dki_param">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">split_dki_param</code><span class="sig-paren">(</span><em>dki_params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.split_dki_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the diffusion tensor eigenvalues, the diffusion tensor
eigenvector matrix, and the 15 independent elements of the kurtosis tensor
from the model parameters estimated from the DKI model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>dki_params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray (x, y, z, 27) or (n, 27)</span></dt>
<dd><p class="first">All parameters estimated from the diffusion kurtosis model.
Parameters are ordered as follows:</p>
<blockquote class="last">
<div><ol class="arabic simple">
<li>Three diffusion tensor’s eigenvalues</li>
<li>Three lines of the eigenvector matrix each containing the first,
second and third coordinates of the eigenvector</li>
<li>Fifteen elements of the kurtosis tensor</li>
</ol>
</div></blockquote>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>eigvals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array (x, y, z, 3) or (n, 3)</span></dt>
<dd><p class="first last">Eigenvalues from eigen decomposition of the tensor.</p>
</dd>
<dt><strong>eigvecs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array (x, y, z, 3, 3) or (n, 3, 3)</span></dt>
<dd><p class="first last">Associated eigenvectors from eigen decomposition of the tensor.
Eigenvectors are columnar (e.g. eigvecs[:,j] is associated with
eigvals[j])</p>
</dd>
<dt><strong>kt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array (x, y, z, 15) or (n, 15)</span></dt>
<dd><p class="first last">Fifteen elements of the kurtosis tensor</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id99">
<h3>warn<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.reconst.warn">
<code class="descclassname">dipy.workflows.reconst.</code><code class="descname">warn</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.reconst.warn" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a warning, or maybe ignore it or raise an exception.</p>
</dd></dl>

</div>
<div class="section" id="labelsbundlesflow">
<h3><a class="reference internal" href="#dipy.workflows.segment.LabelsBundlesFlow" title="dipy.workflows.segment.LabelsBundlesFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LabelsBundlesFlow</span></code></a><a class="headerlink" href="#labelsbundlesflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.segment.LabelsBundlesFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.segment.</code><code class="descname">LabelsBundlesFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.LabelsBundlesFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.LabelsBundlesFlow.get_short_name" title="dipy.workflows.segment.LabelsBundlesFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.LabelsBundlesFlow.run" title="dipy.workflows.segment.LabelsBundlesFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(streamline_files,&nbsp;labels_files[,&nbsp;…])</td>
<td>Extract bundles using existing indices (labels)</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.segment.LabelsBundlesFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.LabelsBundlesFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.segment.LabelsBundlesFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.LabelsBundlesFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.LabelsBundlesFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>streamline_files</em>, <em>labels_files</em>, <em>out_dir=''</em>, <em>out_bundle='recognized_orig.trk'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.LabelsBundlesFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract bundles using existing indices (labels)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>streamline_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">The path of streamline files where you want to recognize bundles</p>
</dd>
<dt><strong>labels_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">The path of model bundle files</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_bundle</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Recognized bundle in the space of the model bundle
(default ‘recognized_orig.trk’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r1bded19041bc-garyfallidis17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id100">[Garyfallidis17]</a></td><td>Garyfallidis et al. Recognition of white matter
bundles using local and global streamline-based registration and
clustering, Neuroimage, 2017.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="medianotsuflow">
<h3><a class="reference internal" href="#dipy.workflows.segment.MedianOtsuFlow" title="dipy.workflows.segment.MedianOtsuFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">MedianOtsuFlow</span></code></a><a class="headerlink" href="#medianotsuflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.segment.MedianOtsuFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.segment.</code><code class="descname">MedianOtsuFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.MedianOtsuFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.MedianOtsuFlow.get_short_name" title="dipy.workflows.segment.MedianOtsuFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.MedianOtsuFlow.run" title="dipy.workflows.segment.MedianOtsuFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files[,&nbsp;save_masked,&nbsp;…])</td>
<td>Workflow wrapping the median_otsu segmentation method.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.segment.MedianOtsuFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.MedianOtsuFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.segment.MedianOtsuFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.MedianOtsuFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.MedianOtsuFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>save_masked=False</em>, <em>median_radius=2</em>, <em>numpass=5</em>, <em>autocrop=False</em>, <em>vol_idx=None</em>, <em>dilate=None</em>, <em>out_dir=''</em>, <em>out_mask='brain_mask.nii.gz'</em>, <em>out_masked='dwi_masked.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.MedianOtsuFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow wrapping the median_otsu segmentation method.</p>
<p>Applies median_otsu segmentation on each file found by ‘globing’
<code class="docutils literal notranslate"><span class="pre">input_files</span></code> and saves the results in a directory specified by
<code class="docutils literal notranslate"><span class="pre">out_dir</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input volumes. This path may contain wildcards to
process multiple inputs at once.</p>
</dd>
<dt><strong>save_masked</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Save mask</p>
</dd>
<dt><strong>median_radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Radius (in voxels) of the applied median filter (default 2)</p>
</dd>
<dt><strong>numpass</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Number of pass of the median filter (default 5)</p>
</dd>
<dt><strong>autocrop</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">If True, the masked input_volumes will also be cropped using the
bounding box defined by the masked data. For example, if diffusion
images are of 1x1x1 (mm^3) or higher resolution auto-cropping could
reduce their size in memory and speed up some of the analysis.
(default False)</p>
</dd>
<dt><strong>vol_idx</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable int, optional</span></dt>
<dd><p class="first last">1D array representing indices of <code class="docutils literal notranslate"><span class="pre">axis=3</span></code> of a 4D <cite>input_volume</cite>
‘None’ (the default) corresponds to <code class="docutils literal notranslate"><span class="pre">(0,)</span></code> (assumes first volume
in 4D array). From cmd line use 3 4 5 6. From script use
[3, 4, 5, 6].</p>
</dd>
<dt><strong>dilate</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">number of iterations for binary dilation (default ‘None’)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the mask volume to be saved (default ‘brain_mask.nii.gz’)</p>
</dd>
<dt><strong>out_masked</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the masked volume to be saved (default ‘dwi_masked.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="recobundles">
<h3><a class="reference internal" href="#dipy.workflows.segment.RecoBundles" title="dipy.workflows.segment.RecoBundles"><code class="xref py py-class docutils literal notranslate"><span class="pre">RecoBundles</span></code></a><a class="headerlink" href="#recobundles" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.segment.RecoBundles">
<em class="property">class </em><code class="descclassname">dipy.workflows.segment.</code><code class="descname">RecoBundles</code><span class="sig-paren">(</span><em>streamlines</em>, <em>greater_than=50</em>, <em>less_than=1000000</em>, <em>cluster_map=None</em>, <em>clust_thr=15</em>, <em>nb_pts=20</em>, <em>rng=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.RecoBundles" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.RecoBundles.evaluate_results" title="dipy.workflows.segment.RecoBundles.evaluate_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">evaluate_results</span></code></a>(model_bundle,&nbsp;…)</td>
<td>Comapare the similiarity between two given bundles, model bundle, and extracted bundle.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.RecoBundles.recognize" title="dipy.workflows.segment.RecoBundles.recognize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">recognize</span></code></a>(model_bundle,&nbsp;model_clust_thr[,&nbsp;…])</td>
<td>Recognize the model_bundle in self.streamlines</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.RecoBundles.refine" title="dipy.workflows.segment.RecoBundles.refine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">refine</span></code></a>(model_bundle,&nbsp;pruned_streamlines,&nbsp;…)</td>
<td>Refine and recognize the model_bundle in self.streamlines This method expects once pruned streamlines as input.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.segment.RecoBundles.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>streamlines</em>, <em>greater_than=50</em>, <em>less_than=1000000</em>, <em>cluster_map=None</em>, <em>clust_thr=15</em>, <em>nb_pts=20</em>, <em>rng=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.RecoBundles.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Recognition of bundles</p>
<p>Extract bundles from a participants’ tractograms using model bundles
segmented from a different subject or an atlas of bundles.
See <a class="reference internal" href="#ra1143d88a4bf-garyfallidis17" id="id101">[Garyfallidis17]</a> for the details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd><p class="first last">The tractogram in which you want to recognize bundles.</p>
</dd>
<dt><strong>greater_than</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Keep streamlines that have length greater than
this value (default 50)</p>
</dd>
<dt><strong>less_than</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Keep streamlines have length less than this value (default 1000000)</p>
</dd>
<dt><strong>cluster_map</strong> <span class="classifier-delimiter">:</span> <span class="classifier">QB map</span></dt>
<dd><p class="first last">Provide existing clustering to start RB faster (default None).</p>
</dd>
<dt><strong>clust_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Distance threshold in mm for clustering <cite>streamlines</cite></p>
</dd>
<dt><strong>rng</strong> <span class="classifier-delimiter">:</span> <span class="classifier">RandomState</span></dt>
<dd><p class="first last">If None define RandomState in initialization function.</p>
</dd>
<dt><strong>nb_pts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of points per streamline (default 20)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Make sure that before creating this class that the streamlines and
the model bundles are roughly in the same space.
Also default thresholds are assumed in RAS 1mm^3 space. You may
want to adjust those if your streamlines are not in world coordinates.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="ra1143d88a4bf-garyfallidis17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Garyfallidis17]</td><td><em>(<a class="fn-backref" href="#id101">1</a>, <a class="fn-backref" href="#id102">2</a>)</em> Garyfallidis et al. Recognition of white matter
bundles using local and global streamline-based registration and
clustering, Neuroimage, 2017.</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.RecoBundles.evaluate_results">
<code class="descname">evaluate_results</code><span class="sig-paren">(</span><em>model_bundle</em>, <em>pruned_streamlines</em>, <em>slr_select</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.RecoBundles.evaluate_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Comapare the similiarity between two given bundles, model bundle,
and extracted bundle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>model_bundle</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd></dd>
<dt><strong>pruned_streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd></dd>
<dt><strong>slr_select</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Select the number of streamlines from model to neirborhood of
model to perform the local SLR.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>ba_value</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">bundle analytics value between model bundle and pruned bundle</p>
</dd>
<dt><strong>bmd_value</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">bundle minimum distance value between model bundle and
pruned bundle</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.RecoBundles.recognize">
<code class="descname">recognize</code><span class="sig-paren">(</span><em>model_bundle</em>, <em>model_clust_thr</em>, <em>reduction_thr=10</em>, <em>reduction_distance='mdf'</em>, <em>slr=True</em>, <em>slr_num_threads=None</em>, <em>slr_metric=None</em>, <em>slr_x0=None</em>, <em>slr_bounds=None</em>, <em>slr_select=(400</em>, <em>600)</em>, <em>slr_method='L-BFGS-B'</em>, <em>pruning_thr=5</em>, <em>pruning_distance='mdf'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.RecoBundles.recognize" title="Permalink to this definition">¶</a></dt>
<dd><p>Recognize the model_bundle in self.streamlines</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>model_bundle</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd></dd>
<dt><strong>model_clust_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>reduction_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>reduction_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">mdf or mam (default mam)</p>
</dd>
<dt><strong>slr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Use Streamline-based Linear Registration (SLR) locally
(default True)</p>
</dd>
<dt><strong>slr_metric</strong> <span class="classifier-delimiter">:</span> <span class="classifier">BundleMinDistanceMetric</span></dt>
<dd></dd>
<dt><strong>slr_x0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">(default None)</p>
</dd>
<dt><strong>slr_bounds</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">(default None)</p>
</dd>
<dt><strong>slr_select</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Select the number of streamlines from model to neirborhood of
model to perform the local SLR.</p>
</dd>
<dt><strong>slr_method</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Optimization method (default ‘L-BFGS-B’)</p>
</dd>
<dt><strong>pruning_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>pruning_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">MDF (‘mdf’) and MAM (‘mam’)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>recognized_transf</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd><p class="first last">Recognized bundle in the space of the model tractogram</p>
</dd>
<dt><strong>recognized_labels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Indices of recognized bundle in the original tractogram</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r925a62eea99f-garyfallidis17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id103">[Garyfallidis17]</a></td><td>Garyfallidis et al. Recognition of white matter
bundles using local and global streamline-based registration and
clustering, Neuroimage, 2017.</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.RecoBundles.refine">
<code class="descname">refine</code><span class="sig-paren">(</span><em>model_bundle</em>, <em>pruned_streamlines</em>, <em>model_clust_thr</em>, <em>reduction_thr=14</em>, <em>reduction_distance='mdf'</em>, <em>slr=True</em>, <em>slr_metric=None</em>, <em>slr_x0=None</em>, <em>slr_bounds=None</em>, <em>slr_select=(400</em>, <em>600)</em>, <em>slr_method='L-BFGS-B'</em>, <em>pruning_thr=6</em>, <em>pruning_distance='mdf'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.RecoBundles.refine" title="Permalink to this definition">¶</a></dt>
<dd><p>Refine and recognize the model_bundle in self.streamlines
This method expects once pruned streamlines as input. It refines the
first ouput of recobundle by applying second local slr (optional),
and second pruning. This method is useful when we are dealing with
noisy data or when we want to extract small tracks from tractograms.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>model_bundle</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd></dd>
<dt><strong>pruned_streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd></dd>
<dt><strong>model_clust_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>reduction_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>reduction_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">mdf or mam (default mam)</p>
</dd>
<dt><strong>slr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Use Streamline-based Linear Registration (SLR) locally
(default True)</p>
</dd>
<dt><strong>slr_metric</strong> <span class="classifier-delimiter">:</span> <span class="classifier">BundleMinDistanceMetric</span></dt>
<dd></dd>
<dt><strong>slr_x0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">(default None)</p>
</dd>
<dt><strong>slr_bounds</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">(default None)</p>
</dd>
<dt><strong>slr_select</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Select the number of streamlines from model to neirborhood of
model to perform the local SLR.</p>
</dd>
<dt><strong>slr_method</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Optimization method (default ‘L-BFGS-B’)</p>
</dd>
<dt><strong>pruning_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>pruning_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">MDF (‘mdf’) and MAM (‘mam’)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>recognized_transf</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Streamlines</span></dt>
<dd><p class="first last">Recognized bundle in the space of the model tractogram</p>
</dd>
<dt><strong>recognized_labels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">Indices of recognized bundle in the original tractogram</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r2ea201a40830-garyfallidis17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id104">[Garyfallidis17]</a></td><td>Garyfallidis et al. Recognition of white matter
bundles using local and global streamline-based registration and
clustering, Neuroimage, 2017.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="recobundlesflow">
<h3><a class="reference internal" href="#dipy.workflows.segment.RecoBundlesFlow" title="dipy.workflows.segment.RecoBundlesFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">RecoBundlesFlow</span></code></a><a class="headerlink" href="#recobundlesflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.segment.RecoBundlesFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.segment.</code><code class="descname">RecoBundlesFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.RecoBundlesFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.RecoBundlesFlow.get_short_name" title="dipy.workflows.segment.RecoBundlesFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.RecoBundlesFlow.run" title="dipy.workflows.segment.RecoBundlesFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(streamline_files,&nbsp;model_bundle_files[,&nbsp;…])</td>
<td>Recognize bundles</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.segment.RecoBundlesFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.RecoBundlesFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.segment.RecoBundlesFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.RecoBundlesFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.RecoBundlesFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>streamline_files</em>, <em>model_bundle_files</em>, <em>greater_than=50</em>, <em>less_than=1000000</em>, <em>no_slr=False</em>, <em>clust_thr=15.0</em>, <em>reduction_thr=15.0</em>, <em>reduction_distance='mdf'</em>, <em>model_clust_thr=2.5</em>, <em>pruning_thr=8.0</em>, <em>pruning_distance='mdf'</em>, <em>slr_metric='symmetric'</em>, <em>slr_transform='similarity'</em>, <em>slr_matrix='small'</em>, <em>refine=False</em>, <em>r_reduction_thr=12.0</em>, <em>r_pruning_thr=6.0</em>, <em>no_r_slr=False</em>, <em>out_dir=''</em>, <em>out_recognized_transf='recognized.trk'</em>, <em>out_recognized_labels='labels.npy'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.RecoBundlesFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Recognize bundles</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>streamline_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">The path of streamline files where you want to recognize bundles</p>
</dd>
<dt><strong>model_bundle_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">The path of model bundle files</p>
</dd>
<dt><strong>greater_than</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Keep streamlines that have length greater than
this value (default 50) in mm.</p>
</dd>
<dt><strong>less_than</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Keep streamlines have length less than this value
(default 1000000) in mm.</p>
</dd>
<dt><strong>no_slr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Don’t enable local Streamline-based Linear
Registration (default False).</p>
</dd>
<dt><strong>clust_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">MDF distance threshold for all streamlines (default 15)</p>
</dd>
<dt><strong>reduction_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Reduce search space by (mm) (default 15)</p>
</dd>
<dt><strong>reduction_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Reduction distance type can be mdf or mam (default mdf)</p>
</dd>
<dt><strong>model_clust_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">MDF distance threshold for the model bundles (default 2.5)</p>
</dd>
<dt><strong>pruning_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Pruning after matching (default 8).</p>
</dd>
<dt><strong>pruning_distance</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Pruning distance type can be mdf or mam (default mdf)</p>
</dd>
<dt><strong>slr_metric</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Options are None, symmetric, asymmetric or diagonal
(default symmetric).</p>
</dd>
<dt><strong>slr_transform</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Transformation allowed. translation, rigid, similarity or scaling
(Default ‘similarity’).</p>
</dd>
<dt><strong>slr_matrix</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Options are ‘nano’, ‘tiny’, ‘small’, ‘medium’, ‘large’, ‘huge’
(default ‘small’)</p>
</dd>
<dt><strong>refine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Enable refine recognized bunle (default False)</p>
</dd>
<dt><strong>r_reduction_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Refine reduce search space by (mm) (default 12)</p>
</dd>
<dt><strong>r_pruning_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Refine pruning after matching (default 6).</p>
</dd>
<dt><strong>no_r_slr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Don’t enable Refine local Streamline-based Linear
Registration (default False).</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_recognized_transf</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Recognized bundle in the space of the model bundle
(default ‘recognized.trk’)</p>
</dd>
<dt><strong>out_recognized_labels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Indices of recognized bundle in the original tractogram
(default ‘labels.npy’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rbfdf3a404c62-garyfallidis17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id105">[Garyfallidis17]</a></td><td>Garyfallidis et al. Recognition of white matter
bundles using local and global streamline-based registration and
clustering, Neuroimage, 2017.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id106">
<h3><a class="reference internal" href="#dipy.workflows.segment.Workflow" title="dipy.workflows.segment.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.segment.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.segment.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.Workflow.get_io_iterator" title="dipy.workflows.segment.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.Workflow.get_short_name" title="dipy.workflows.segment.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.Workflow.get_sub_runs" title="dipy.workflows.segment.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.segment.Workflow.manage_output_overwrite" title="dipy.workflows.segment.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.segment.Workflow.run" title="dipy.workflows.segment.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.segment.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.segment.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.segment.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id107">
<h3>load_nifti<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.segment.load_nifti">
<code class="descclassname">dipy.workflows.segment.</code><code class="descname">load_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>return_img=False</em>, <em>return_voxsize=False</em>, <em>return_coords=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.load_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="id108">
<h3>load_trk<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.segment.load_trk">
<code class="descclassname">dipy.workflows.segment.</code><code class="descname">load_trk</code><span class="sig-paren">(</span><em>filename</em>, <em>lazy_load=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.load_trk" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads tractogram files (<a href="#id109"><span class="problematic" id="id110">*</span></a>.tck)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">input trk filename</p>
</dd>
<dt><strong>lazy_load</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{False, True}, optional</span></dt>
<dd><p class="first last">If True, load streamlines in a lazy manner i.e. they will not be kept
in memory and only be loaded when needed.
Otherwise, load all streamlines in memory.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2D arrays</span></dt>
<dd><p class="first last">Each 2D array represents a sequence of 3D points (points, 3).</p>
</dd>
<dt><strong>hdr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">header from a trk file</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="median-otsu">
<h3>median_otsu<a class="headerlink" href="#median-otsu" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.segment.median_otsu">
<code class="descclassname">dipy.workflows.segment.</code><code class="descname">median_otsu</code><span class="sig-paren">(</span><em>input_volume</em>, <em>median_radius=4</em>, <em>numpass=4</em>, <em>autocrop=False</em>, <em>vol_idx=None</em>, <em>dilate=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.median_otsu" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple brain extraction tool method for images from DWI data.</p>
<p>It uses a median filter smoothing of the input_volumes <cite>vol_idx</cite> and an
automatic histogram Otsu thresholding technique, hence the name
<em>median_otsu</em>.</p>
<p>This function is inspired from Mrtrix’s bet which has default values
<code class="docutils literal notranslate"><span class="pre">median_radius=3</span></code>, <code class="docutils literal notranslate"><span class="pre">numpass=2</span></code>. However, from tests on multiple 1.5T
and 3T data     from GE, Philips, Siemens, the most robust choice is
<code class="docutils literal notranslate"><span class="pre">median_radius=4</span></code>, <code class="docutils literal notranslate"><span class="pre">numpass=4</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>input_volume</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">ndarray of the brain volume</p>
</dd>
<dt><strong>median_radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Radius (in voxels) of the applied median filter (default: 4).</p>
</dd>
<dt><strong>numpass: int</strong></dt>
<dd><p class="first last">Number of pass of the median filter (default: 4).</p>
</dd>
<dt><strong>autocrop: bool, optional</strong></dt>
<dd><p class="first last">if True, the masked input_volume will also be cropped using the
bounding box defined by the masked data. Should be on if DWI is
upsampled to 1x1x1 resolution. (default: False).</p>
</dd>
<dt><strong>vol_idx</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None or array, optional</span></dt>
<dd><p class="first last">1D array representing indices of <code class="docutils literal notranslate"><span class="pre">axis=3</span></code> of a 4D <cite>input_volume</cite> None
(the default) corresponds to <code class="docutils literal notranslate"><span class="pre">(0,)</span></code> (assumes first volume in
4D array).</p>
</dd>
<dt><strong>dilate</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None or int, optional</span></dt>
<dd><p class="first last">number of iterations for binary dilation</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>maskedvolume</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Masked input_volume</p>
</dd>
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">3D ndarray</span></dt>
<dd><p class="first last">The binary brain mask</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Copyright (C) 2011, the scikit-image team
All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in
the documentation and/or other materials provided with the
distribution.</li>
<li>Neither the name of skimage nor the names of its contributors may be
used to endorse or promote products derived from this software without
specific prior written permission.</li>
</ol>
</div></blockquote>
<p>THIS SOFTWARE IS PROVIDED BY THE AUTHOR <a href="#id111"><span class="problematic" id="id112">``</span></a>AS IS’’ AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.</p>
</dd></dl>

</div>
<div class="section" id="id113">
<h3>save_nifti<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.segment.save_nifti">
<code class="descclassname">dipy.workflows.segment.</code><code class="descname">save_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>data</em>, <em>affine</em>, <em>hdr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.segment.save_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="time">
<h3>time<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.segment.time">
<code class="descclassname">dipy.workflows.segment.</code><code class="descname">time</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; floating point number<a class="headerlink" href="#dipy.workflows.segment.time" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current time in seconds since the Epoch.
Fractions of a second may be present if the system clock provides them.</p>
</dd></dl>

</div>
<div class="section" id="bundleanalysispopulationflow">
<h3><a class="reference internal" href="#dipy.workflows.stats.BundleAnalysisPopulationFlow" title="dipy.workflows.stats.BundleAnalysisPopulationFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">BundleAnalysisPopulationFlow</span></code></a><a class="headerlink" href="#bundleanalysispopulationflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.stats.BundleAnalysisPopulationFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.stats.</code><code class="descname">BundleAnalysisPopulationFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.BundleAnalysisPopulationFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.BundleAnalysisPopulationFlow.get_short_name" title="dipy.workflows.stats.BundleAnalysisPopulationFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.BundleAnalysisPopulationFlow.run" title="dipy.workflows.stats.BundleAnalysisPopulationFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(model_bundle_folder,&nbsp;subject_folder[,&nbsp;…])</td>
<td>Workflow of bundle analytics.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.stats.BundleAnalysisPopulationFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.BundleAnalysisPopulationFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.stats.BundleAnalysisPopulationFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.BundleAnalysisPopulationFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.stats.BundleAnalysisPopulationFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>model_bundle_folder</em>, <em>subject_folder</em>, <em>no_disks=100</em>, <em>out_dir=''</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.BundleAnalysisPopulationFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow of bundle analytics.</p>
<p>Applies statistical analysis on bundles of subjects and saves the
results in a directory specified by <code class="docutils literal notranslate"><span class="pre">out_dir</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>model_bundle_folder</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input model bundle files. This path may
contain wildcards to process multiple inputs at once.</p>
</dd>
<dt><strong>subject_folder</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input subject folder. This path may contain
wildcards to process multiple inputs at once.</p>
</dd>
<dt><strong>no_disks</strong> <span class="classifier-delimiter">:</span> <span class="classifier">integer, optional</span></dt>
<dd><p class="first last">Number of disks used for dividing bundle into disks. (Default 100)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r0dbfe1688493-chandio19" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id114">[Chandio19]</a></td><td>Chandio, B.Q., S. Koudoro, D. Reagan, J. Harezlak,</td></tr>
</tbody>
</table>
<p>E. Garyfallidis, Bundle Analytics: a computational and statistical
analyses framework for tractometric studies, Proceedings of:
International Society of Magnetic Resonance in Medicine (ISMRM),
Montreal, Canada, 2019.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="linearmixedmodelsflow">
<h3><a class="reference internal" href="#dipy.workflows.stats.LinearMixedModelsFlow" title="dipy.workflows.stats.LinearMixedModelsFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinearMixedModelsFlow</span></code></a><a class="headerlink" href="#linearmixedmodelsflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.stats.LinearMixedModelsFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.stats.</code><code class="descname">LinearMixedModelsFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.LinearMixedModelsFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.LinearMixedModelsFlow.get_short_name" title="dipy.workflows.stats.LinearMixedModelsFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.LinearMixedModelsFlow.run" title="dipy.workflows.stats.LinearMixedModelsFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(h5_files[,&nbsp;no_disks,&nbsp;out_dir])</td>
<td>Workflow of linear Mixed Models.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.stats.LinearMixedModelsFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.LinearMixedModelsFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.stats.LinearMixedModelsFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.LinearMixedModelsFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.stats.LinearMixedModelsFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>h5_files</em>, <em>no_disks=100</em>, <em>out_dir=''</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.LinearMixedModelsFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow of linear Mixed Models.</p>
<p>Applies linear Mixed Models on bundles of subjects and saves the
results in a directory specified by <code class="docutils literal notranslate"><span class="pre">out_dir</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>h5_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input metric files. This path may
contain wildcards to process multiple inputs at once.</p>
</dd>
<dt><strong>no_disks</strong> <span class="classifier-delimiter">:</span> <span class="classifier">integer, optional</span></dt>
<dd><p class="first last">Number of disks used for dividing bundle into disks. (Default 100)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="snrinccflow">
<h3><a class="reference internal" href="#dipy.workflows.stats.SNRinCCFlow" title="dipy.workflows.stats.SNRinCCFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">SNRinCCFlow</span></code></a><a class="headerlink" href="#snrinccflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.stats.SNRinCCFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.stats.</code><code class="descname">SNRinCCFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.SNRinCCFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.SNRinCCFlow.get_short_name" title="dipy.workflows.stats.SNRinCCFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.SNRinCCFlow.run" title="dipy.workflows.stats.SNRinCCFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(data_files,&nbsp;bvals_files,&nbsp;bvecs_files,&nbsp;…)</td>
<td>Compute the signal-to-noise ratio in the corpus callosum.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.stats.SNRinCCFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.SNRinCCFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.stats.SNRinCCFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.SNRinCCFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.stats.SNRinCCFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>data_files, bvals_files, bvecs_files, mask_files, bbox_threshold=[0.6, 1, 0, 0.1, 0, 0.1], out_dir='', out_file='product.json', out_mask_cc='cc.nii.gz', out_mask_noise='mask_noise.nii.gz'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.SNRinCCFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the signal-to-noise ratio in the corpus callosum.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>data_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the dwi.nii.gz file. This path may contain wildcards to
process multiple inputs at once.</p>
</dd>
<dt><strong>bvals_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of bvals.</p>
</dd>
<dt><strong>bvecs_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of bvecs.</p>
</dd>
<dt><strong>mask_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of brain mask</p>
</dd>
<dt><strong>bbox_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable float, optional</span></dt>
<dd><p class="first last">Threshold for bounding box, values separated with commas for ex.
[0.6,1,0,0.1,0,0.1]. (default (0.6, 1, 0, 0.1, 0, 0.1))</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Where the resulting file will be saved. (default ‘’)</p>
</dd>
<dt><strong>out_file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the result file to be saved. (default ‘product.json’)</p>
</dd>
<dt><strong>out_mask_cc</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the CC mask volume to be saved (default ‘cc.nii.gz’)</p>
</dd>
<dt><strong>out_mask_noise</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the mask noise volume to be saved
(default ‘mask_noise.nii.gz’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id115">
<h3><a class="reference internal" href="#dipy.workflows.stats.TensorModel" title="dipy.workflows.stats.TensorModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TensorModel</span></code></a><a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.stats.TensorModel">
<em class="property">class </em><code class="descclassname">dipy.workflows.stats.</code><code class="descname">TensorModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>fit_method='WLS'</em>, <em>return_S0_hat=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.TensorModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.reconst.base.ReconstModel</span></code></a></p>
<p>Diffusion Tensor</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.TensorModel.fit" title="dipy.workflows.stats.TensorModel.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td>Fit method of the DTI model class</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.TensorModel.predict" title="dipy.workflows.stats.TensorModel.predict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">predict</span></code></a>(dti_params[,&nbsp;S0])</td>
<td>Predict a signal for this TensorModel class instance given parameters.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.stats.TensorModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>fit_method='WLS'</em>, <em>return_S0_hat=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.TensorModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>A Diffusion Tensor Model <a class="reference internal" href="#r6966379adcdc-1" id="id116">[1]</a>, <a class="reference internal" href="#r6966379adcdc-2" id="id117">[2]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>gtab</strong> <span class="classifier-delimiter">:</span> <span class="classifier">GradientTable class instance</span></dt>
<dd></dd>
<dt><strong>fit_method</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or callable</span></dt>
<dd><p class="first">str can be one of the following:</p>
<dl class="last docutils">
<dt>‘WLS’ for weighted least squares</dt>
<dd><p class="first last"><code class="xref py py-func docutils literal notranslate"><span class="pre">dti.wls_fit_tensor()</span></code></p>
</dd>
<dt>‘LS’ or ‘OLS’ for ordinary least squares</dt>
<dd><p class="first last"><code class="xref py py-func docutils literal notranslate"><span class="pre">dti.ols_fit_tensor()</span></code></p>
</dd>
<dt>‘NLLS’ for non-linear least-squares</dt>
<dd><p class="first last"><code class="xref py py-func docutils literal notranslate"><span class="pre">dti.nlls_fit_tensor()</span></code></p>
</dd>
<dt>‘RT’ or ‘restore’ or ‘RESTORE’ for RESTORE robust tensor</dt>
<dd><p class="first last">fitting <a class="reference internal" href="#r6966379adcdc-3" id="id118">[3]</a>
<code class="xref py py-func docutils literal notranslate"><span class="pre">dti.restore_fit_tensor()</span></code></p>
</dd>
<dt>callable has to have the signature:</dt>
<dd><p class="first last">fit_method(design_matrix, data, <a href="#id119"><span class="problematic" id="id120">*</span></a>args, <a href="#id121"><span class="problematic" id="id122">**</span></a>kwargs)</p>
</dd>
</dl>
</dd>
<dt><strong>return_S0_hat</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Boolean to return (True) or not (False) the S0 values for the fit.</p>
</dd>
<dt><strong>args, kwargs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">arguments and key-word arguments passed to the</span></dt>
<dd><p class="first last">fit_method. See dti.wls_fit_tensor, dti.ols_fit_tensor for details</p>
</dd>
<dt><strong>min_signal</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The minimum signal value. Needs to be a strictly positive
number. Default: minimal signal in the data provided to <cite>fit</cite>.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>In order to increase speed of processing, tensor fitting is done
simultaneously over many voxels. Many fit_methods use the ‘step’
parameter to set the number of voxels that will be fit at once in each
iteration. This is the chunk size as a number of voxels. A larger step
value should speed things up, but it will also take up more memory. It
is advisable to keep an eye on memory consumption as this value is
increased.</p>
<p>Example : In <code class="xref py py-func docutils literal notranslate"><span class="pre">iter_fit_tensor()</span></code> we have a default step value of
1e4</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r6966379adcdc-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id116">1</a>, <a class="fn-backref" href="#id123">2</a>)</em> Basser, P.J., Mattiello, J., LeBihan, D., 1994. Estimation of
the effective self-diffusion tensor from the NMR spin echo. J Magn
Reson B 103, 247-254.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r6966379adcdc-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id117">1</a>, <a class="fn-backref" href="#id124">2</a>)</em> Basser, P., Pierpaoli, C., 1996. Microstructural and
physiological features of tissues elucidated by quantitative
diffusion-tensor MRI.  Journal of Magnetic Resonance 111, 209-219.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r6966379adcdc-3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><em>(<a class="fn-backref" href="#id118">1</a>, <a class="fn-backref" href="#id125">2</a>)</em> Lin-Ching C., Jones D.K., Pierpaoli, C. 2005. RESTORE: Robust
estimation of tensors by outlier rejection. MRM 53: 1088-1095</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.stats.TensorModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.TensorModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit method of the DTI model class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">The measured signal from one voxel.</p>
</dd>
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">A boolean array used to mark the coordinates in the data that
should be analyzed that has the shape data.shape[:-1]</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.stats.TensorModel.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>dti_params</em>, <em>S0=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.TensorModel.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict a signal for this TensorModel class instance given parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dti_params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The last dimension should have 12 tensor parameters: 3
eigenvalues, followed by the 3 eigenvectors</p>
</dd>
<dt><strong>S0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float or ndarray</span></dt>
<dd><p class="first last">The non diffusion-weighted signal in every voxel, or across all
voxels. Default: 1</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id126">
<h3><a class="reference internal" href="#dipy.workflows.stats.Workflow" title="dipy.workflows.stats.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.stats.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.stats.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.Workflow.get_io_iterator" title="dipy.workflows.stats.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.Workflow.get_short_name" title="dipy.workflows.stats.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.Workflow.get_sub_runs" title="dipy.workflows.stats.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.stats.Workflow.manage_output_overwrite" title="dipy.workflows.stats.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.stats.Workflow.run" title="dipy.workflows.stats.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.stats.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.stats.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.stats.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.stats.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.stats.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.stats.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="binary-dilation">
<h3>binary_dilation<a class="headerlink" href="#binary-dilation" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.binary_dilation">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">binary_dilation</code><span class="sig-paren">(</span><em>input</em>, <em>structure=None</em>, <em>iterations=1</em>, <em>mask=None</em>, <em>output=None</em>, <em>border_value=0</em>, <em>origin=0</em>, <em>brute_force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.binary_dilation" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi-dimensional binary dilation with the given structuring element.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>input</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array_like</span></dt>
<dd><p class="first last">Binary array_like to be dilated. Non-zero (True) elements form
the subset to be dilated.</p>
</dd>
<dt><strong>structure</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array_like, optional</span></dt>
<dd><p class="first last">Structuring element used for the dilation. Non-zero elements are
considered True. If no structuring element is provided an element
is generated with a square connectivity equal to one.</p>
</dd>
<dt><strong>iterations</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{int, float}, optional</span></dt>
<dd><p class="first last">The dilation is repeated <cite>iterations</cite> times (one, by default).
If iterations is less than 1, the dilation is repeated until the
result does not change anymore.</p>
</dd>
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array_like, optional</span></dt>
<dd><p class="first last">If a mask is given, only those elements with a True value at
the corresponding mask element are modified at each iteration.</p>
</dd>
<dt><strong>output</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray, optional</span></dt>
<dd><p class="first last">Array of the same shape as input, into which the output is placed.
By default, a new array is created.</p>
</dd>
<dt><strong>border_value</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (cast to 0 or 1), optional</span></dt>
<dd><p class="first last">Value at the border in the output array.</p>
</dd>
<dt><strong>origin</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or tuple of ints, optional</span></dt>
<dd><p class="first last">Placement of the filter, by default 0.</p>
</dd>
<dt><strong>brute_force</strong> <span class="classifier-delimiter">:</span> <span class="classifier">boolean, optional</span></dt>
<dd><p class="first last">Memory condition: if False, only the pixels whose value was changed in
the last iteration are tracked as candidates to be updated (dilated)
in the current iteration; if True all pixels are considered as
candidates for dilation, regardless of what happened in the previous
iteration. False by default.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>binary_dilation</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray of bools</span></dt>
<dd><p class="first last">Dilation of the input by the structuring element.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grey_dilation</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">binary_erosion</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">binary_closing</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">binary_opening</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">generate_binary_structure</span></code></p>
</div>
<p class="rubric">Notes</p>
<p>Dilation <a class="reference internal" href="#rf074e351565f-1" id="id127">[1]</a> is a mathematical morphology operation <a class="reference internal" href="#rf074e351565f-2" id="id128">[2]</a> that uses a
structuring element for expanding the shapes in an image. The binary
dilation of an image by a structuring element is the locus of the points
covered by the structuring element, when its center lies within the
non-zero points of the image.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rf074e351565f-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id127">1</a>, <a class="fn-backref" href="#id129">2</a>)</em> <a class="reference external" href="http://en.wikipedia.org/wiki/Dilation_%28morphology%29">http://en.wikipedia.org/wiki/Dilation_%28morphology%29</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rf074e351565f-2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id128">1</a>, <a class="fn-backref" href="#id130">2</a>)</em> <a class="reference external" href="http://en.wikipedia.org/wiki/Mathematical_morphology">http://en.wikipedia.org/wiki/Mathematical_morphology</a></td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="k">import</span> <span class="n">ndimage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[ 0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">binary_dilation</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([[False, False, False, False, False],</span>
<span class="go">       [False, False,  True, False, False],</span>
<span class="go">       [False,  True,  True,  True, False],</span>
<span class="go">       [False, False,  True, False, False],</span>
<span class="go">       [False, False, False, False, False]], dtype=bool)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">binary_dilation</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="go">array([[ 0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 3x3 structuring element with connectivity 1, used by default</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">struct1</span> <span class="o">=</span> <span class="n">ndimage</span><span class="o">.</span><span class="n">generate_binary_structure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">struct1</span>
<span class="go">array([[False,  True, False],</span>
<span class="go">       [ True,  True,  True],</span>
<span class="go">       [False,  True, False]], dtype=bool)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 3x3 structuring element with connectivity 2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">struct2</span> <span class="o">=</span> <span class="n">ndimage</span><span class="o">.</span><span class="n">generate_binary_structure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">struct2</span>
<span class="go">array([[ True,  True,  True],</span>
<span class="go">       [ True,  True,  True],</span>
<span class="go">       [ True,  True,  True]], dtype=bool)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">binary_dilation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">structure</span><span class="o">=</span><span class="n">struct1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="go">array([[ 0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">binary_dilation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">structure</span><span class="o">=</span><span class="n">struct2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="go">array([[ 0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.,  1.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.,  1.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">binary_dilation</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">structure</span><span class="o">=</span><span class="n">struct1</span><span class="p">,</span>\
<span class="gp">... </span><span class="n">iterations</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="go">array([[ 0.,  0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.,  1.,  0.],</span>
<span class="go">       [ 1.,  1.,  1.,  1.,  1.],</span>
<span class="go">       [ 0.,  1.,  1.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.,  0.,  0.]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="bounding-box">
<h3>bounding_box<a class="headerlink" href="#bounding-box" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.bounding_box">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">bounding_box</code><span class="sig-paren">(</span><em>vol</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.bounding_box" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the bounding box of nonzero intensity voxels in the volume.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>vol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Volume to compute bounding box on.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>npmins</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">Array containg minimum index of each dimension</p>
</dd>
<dt><strong>npmaxs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">Array containg maximum index of each dimension</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="bundle-analysis">
<h3>bundle_analysis<a class="headerlink" href="#bundle-analysis" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.bundle_analysis">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">bundle_analysis</code><span class="sig-paren">(</span><em>model_bundle_folder</em>, <em>bundle_folder</em>, <em>orig_bundle_folder</em>, <em>metric_folder</em>, <em>group</em>, <em>subject</em>, <em>no_disks=100</em>, <em>out_dir=''</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.bundle_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies statistical analysis on bundles and saves the results
in a directory specified by <code class="docutils literal notranslate"><span class="pre">out_dir</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>model_bundle_folder</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input model bundle files. This path may contain
wildcards to process multiple inputs at once.</p>
</dd>
<dt><strong>bundle_folder</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input bundle files in common space. This path may
contain wildcards to process multiple inputs at once.</p>
</dd>
<dt><strong>orig_folder</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input bundle files in native space. This path may
contain wildcards to process multiple inputs at once.</p>
</dd>
<dt><strong>metric_folder</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path to the input dti metric or/and peak files. It will be used as
metric for statistical analysis of bundles.</p>
</dd>
<dt><strong>group</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">what group subject belongs to e.g. control or patient</p>
</dd>
<dt><strong>subject</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">subject id e.g. 10001</p>
</dd>
<dt><strong>no_disks</strong> <span class="classifier-delimiter">:</span> <span class="classifier">integer, optional</span></dt>
<dd><p class="first last">Number of disks used for dividing bundle into disks. (Default 100)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rb50b70434d87-chandio19" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id131">[Chandio19]</a></td><td>Chandio, B.Q., S. Koudoro, D. Reagan, J. Harezlak,</td></tr>
</tbody>
</table>
<p>E. Garyfallidis, Bundle Analytics: a computational and statistical
analyses framework for tractometric studies, Proceedings of:
International Society of Magnetic Resonance in Medicine (ISMRM),
Montreal, Canada, 2019.</p>
</dd></dl>

</div>
<div class="section" id="id132">
<h3>gradient_table<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.gradient_table">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">gradient_table</code><span class="sig-paren">(</span><em>bvals</em>, <em>bvecs=None</em>, <em>big_delta=None</em>, <em>small_delta=None</em>, <em>b0_threshold=50</em>, <em>atol=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.gradient_table" title="Permalink to this definition">¶</a></dt>
<dd><p>A general function for creating diffusion MR gradients.</p>
<p>It reads, loads and prepares scanner parameters like the b-values and
b-vectors so that they can be useful during the reconstruction process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>bvals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">can be any of the four options</span></dt>
<dd><ol class="first last arabic simple">
<li>an array of shape (N,) or (1, N) or (N, 1) with the b-values.</li>
<li>a path for the file which contains an array like the above (1).</li>
<li>an array of shape (N, 4) or (4, N). Then this parameter is
considered to be a b-table which contains both bvals and bvecs. In
this case the next parameter is skipped.</li>
<li>a path for the file which contains an array like the one at (3).</li>
</ol>
</dd>
<dt><strong>bvecs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">can be any of two options</span></dt>
<dd><ol class="first last arabic simple">
<li>an array of shape (N, 3) or (3, N) with the b-vectors.</li>
<li>a path for the file which contains an array like the previous.</li>
</ol>
</dd>
<dt><strong>big_delta</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">acquisition pulse separation time in seconds (default None)</p>
</dd>
<dt><strong>small_delta</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">acquisition pulse duration time in seconds (default None)</p>
</dd>
<dt><strong>b0_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">All b-values with values less than or equal to <cite>bo_threshold</cite> are
considered as b0s i.e. without diffusion weighting.</p>
</dd>
<dt><strong>atol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">All b-vectors need to be unit vectors up to a tolerance.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>gradients</strong> <span class="classifier-delimiter">:</span> <span class="classifier">GradientTable</span></dt>
<dd><p class="first last">A GradientTable with all the gradient information.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ol class="arabic simple">
<li>Often b0s (b-values which correspond to images without diffusion
weighting) have 0 values however in some cases the scanner cannot
provide b0s of an exact 0 value and it gives a bit higher values
e.g. 6 or 12. This is the purpose of the b0_threshold in the __init__.</li>
<li>We assume that the minimum number of b-values is 7.</li>
<li>B-vectors should be unit vectors.</li>
</ol>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.gradients</span> <span class="k">import</span> <span class="n">gradient_table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span> <span class="o">=</span> <span class="mi">1500</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sq2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="n">sq2</span><span class="p">,</span> <span class="n">sq2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="n">sq2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sq2</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">sq2</span><span class="p">,</span> <span class="n">sq2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span><span class="o">.</span><span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">bvals</span><span class="p">,</span> <span class="n">bvecs</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gt</span><span class="o">.</span><span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">bvecs</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">shape</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id133">
<h3>load_nifti<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.load_nifti">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">load_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>return_img=False</em>, <em>return_voxsize=False</em>, <em>return_coords=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.load_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="id134">
<h3>median_otsu<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.median_otsu">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">median_otsu</code><span class="sig-paren">(</span><em>input_volume</em>, <em>median_radius=4</em>, <em>numpass=4</em>, <em>autocrop=False</em>, <em>vol_idx=None</em>, <em>dilate=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.median_otsu" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple brain extraction tool method for images from DWI data.</p>
<p>It uses a median filter smoothing of the input_volumes <cite>vol_idx</cite> and an
automatic histogram Otsu thresholding technique, hence the name
<em>median_otsu</em>.</p>
<p>This function is inspired from Mrtrix’s bet which has default values
<code class="docutils literal notranslate"><span class="pre">median_radius=3</span></code>, <code class="docutils literal notranslate"><span class="pre">numpass=2</span></code>. However, from tests on multiple 1.5T
and 3T data     from GE, Philips, Siemens, the most robust choice is
<code class="docutils literal notranslate"><span class="pre">median_radius=4</span></code>, <code class="docutils literal notranslate"><span class="pre">numpass=4</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>input_volume</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">ndarray of the brain volume</p>
</dd>
<dt><strong>median_radius</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Radius (in voxels) of the applied median filter (default: 4).</p>
</dd>
<dt><strong>numpass: int</strong></dt>
<dd><p class="first last">Number of pass of the median filter (default: 4).</p>
</dd>
<dt><strong>autocrop: bool, optional</strong></dt>
<dd><p class="first last">if True, the masked input_volume will also be cropped using the
bounding box defined by the masked data. Should be on if DWI is
upsampled to 1x1x1 resolution. (default: False).</p>
</dd>
<dt><strong>vol_idx</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None or array, optional</span></dt>
<dd><p class="first last">1D array representing indices of <code class="docutils literal notranslate"><span class="pre">axis=3</span></code> of a 4D <cite>input_volume</cite> None
(the default) corresponds to <code class="docutils literal notranslate"><span class="pre">(0,)</span></code> (assumes first volume in
4D array).</p>
</dd>
<dt><strong>dilate</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None or int, optional</span></dt>
<dd><p class="first last">number of iterations for binary dilation</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>maskedvolume</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Masked input_volume</p>
</dd>
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">3D ndarray</span></dt>
<dd><p class="first last">The binary brain mask</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Copyright (C) 2011, the scikit-image team
All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in
the documentation and/or other materials provided with the
distribution.</li>
<li>Neither the name of skimage nor the names of its contributors may be
used to endorse or promote products derived from this software without
specific prior written permission.</li>
</ol>
</div></blockquote>
<p>THIS SOFTWARE IS PROVIDED BY THE AUTHOR <a href="#id135"><span class="problematic" id="id136">``</span></a>AS IS’’ AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.</p>
</dd></dl>

</div>
<div class="section" id="optional-package">
<h3>optional_package<a class="headerlink" href="#optional-package" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.optional_package">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">optional_package</code><span class="sig-paren">(</span><em>name</em>, <em>trip_msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.optional_package" title="Permalink to this definition">¶</a></dt>
<dd><p>Return package-like thing and module setup for package <cite>name</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">package name</p>
</dd>
<dt><strong>trip_msg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None or str</span></dt>
<dd><p class="first last">message to give when someone tries to use the return package, but we
could not import it, and have returned a TripWire object instead.
Default message if None.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pkg_like</strong> <span class="classifier-delimiter">:</span> <span class="classifier">module or <code class="docutils literal notranslate"><span class="pre">TripWire</span></code> instance</span></dt>
<dd><p class="first last">If we can import the package, return it.  Otherwise return an object
raising an error when accessed</p>
</dd>
<dt><strong>have_pkg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">True if import for package was successful, false otherwise</p>
</dd>
<dt><strong>module_setup</strong> <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">callable usually set as <code class="docutils literal notranslate"><span class="pre">setup_module</span></code> in calling namespace, to allow
skipping tests.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id137">
<h3>read_bvals_bvecs<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.read_bvals_bvecs">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">read_bvals_bvecs</code><span class="sig-paren">(</span><em>fbvals</em>, <em>fbvecs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.read_bvals_bvecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Read b-values and b-vectors from disk</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>fbvals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Full path to file with b-values. None to not read bvals.</p>
</dd>
<dt><strong>fbvecs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Full path of file with b-vectors. None to not read bvecs.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>bvals</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, (N,) or None</span></dt>
<dd></dd>
<dt><strong>bvecs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, (N, 3) or None</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Files can be either ‘.bvals’/’.bvecs’ or ‘.txt’ or ‘.npy’ (containing
arrays stored with the appropriate values).</p>
</dd></dl>

</div>
<div class="section" id="id138">
<h3>save_nifti<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.save_nifti">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">save_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>data</em>, <em>affine</em>, <em>hdr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.save_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="segment-from-cfa">
<h3>segment_from_cfa<a class="headerlink" href="#segment-from-cfa" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.segment_from_cfa">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">segment_from_cfa</code><span class="sig-paren">(</span><em>tensor_fit</em>, <em>roi</em>, <em>threshold</em>, <em>return_cfa=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.segment_from_cfa" title="Permalink to this definition">¶</a></dt>
<dd><p>Segment the cfa inside roi using the values from threshold as bounds.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>tensor_fit</strong> <span class="classifier-delimiter">:</span> <span class="classifier">TensorFit object</span></dt>
<dd><p class="first last">TensorFit object</p>
</dd>
<dt><strong>roi</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">A binary mask, which contains the bounding box for the segmentation.</p>
</dd>
<dt><strong>threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array-like</span></dt>
<dd><p class="first last">An iterable that defines the min and max values to use for the
thresholding.
The values are specified as (R_min, R_max, G_min, G_max, B_min, B_max)</p>
</dd>
<dt><strong>return_cfa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">If True, the cfa is also returned.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Binary mask of the segmentation.</p>
</dd>
<dt><strong>cfa</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray, optional</span></dt>
<dd><p class="first last">Array with shape = (…, 3), where … is the shape of tensor_fit.
The color fractional anisotropy, ordered as a nd array with the last
dimension of size 3 for the R, G and B channels.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="simple-plot">
<h3>simple_plot<a class="headerlink" href="#simple-plot" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.stats.simple_plot">
<code class="descclassname">dipy.workflows.stats.</code><code class="descname">simple_plot</code><span class="sig-paren">(</span><em>file_name</em>, <em>title</em>, <em>x</em>, <em>y</em>, <em>xlabel</em>, <em>ylabel</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.stats.simple_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the simple plot with given x and y values</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>file_name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">file name for saving the plot</p>
</dd>
<dt><strong>title</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">title of the plot</p>
</dd>
<dt><strong>x</strong> <span class="classifier-delimiter">:</span> <span class="classifier">integer list</span></dt>
<dd><p class="first last">x-axis values to be ploted</p>
</dd>
<dt><strong>y</strong> <span class="classifier-delimiter">:</span> <span class="classifier">integer list</span></dt>
<dd><p class="first last">y-axis values to be ploted</p>
</dd>
<dt><strong>xlabel</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">label for x-axis</p>
</dd>
<dt><strong>ylable</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">label for y-axis</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="closestpeakdirectiongetter">
<h3><a class="reference internal" href="#dipy.workflows.tracking.ClosestPeakDirectionGetter" title="dipy.workflows.tracking.ClosestPeakDirectionGetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClosestPeakDirectionGetter</span></code></a><a class="headerlink" href="#closestpeakdirectiongetter" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.ClosestPeakDirectionGetter">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">ClosestPeakDirectionGetter</code><a class="headerlink" href="#dipy.workflows.tracking.ClosestPeakDirectionGetter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.direction.closest_peak_direction_getter.PmfGenDirectionGetter</span></code></p>
<p>A direction getter that returns the closest odf peak to previous tracking
direction.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_pmf</span></code></td>
<td>Constructor for making a DirectionGetter from an array of Pmfs</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_shcoeff</span></code></td>
<td>Probabilistic direction getter from a distribution of directions on the sphere</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">initial_direction</span></code></td>
<td>Returns best directions at seed location to start tracking.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="63%" />
<col width="37%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get_direction</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.tracking.ClosestPeakDirectionGetter.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>$self</em>, <em>/</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.ClosestPeakDirectionGetter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cmctissueclassifier">
<h3><a class="reference internal" href="#dipy.workflows.tracking.CmcTissueClassifier" title="dipy.workflows.tracking.CmcTissueClassifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">CmcTissueClassifier</span></code></a><a class="headerlink" href="#cmctissueclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.CmcTissueClassifier">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">CmcTissueClassifier</code><a class="headerlink" href="#dipy.workflows.tracking.CmcTissueClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.tracking.local.tissue_classifier.ConstrainedTissueClassifier</span></code></p>
<p>Continuous map criterion (CMC) stopping criteria from <a class="reference internal" href="#r80c64a47e37c-1" id="id139">[1]</a>.
This implements the use of partial volume fraction (PVE) maps to
determine when the tracking stops.</p>
<dl class="docutils">
<dt>cdef:</dt>
<dd>double interp_out_double[1]
double[:]  interp_out_view = interp_out_view
double[:, :, :] include_map, exclude_map
double step_size
double average_voxel_size
double correction_factor</dd>
</dl>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r80c64a47e37c-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id8">1</a>, <a class="fn-backref" href="#id139">2</a>, <a class="fn-backref" href="#id140">3</a>)</em> Girard, G., Whittingstall, K., Deriche, R., &amp; Descoteaux, M.</td></tr>
</tbody>
</table>
<p>“Towards quantitative connectivity analysis: reducing tractography biases.”
NeuroImage, 98, 266-278, 2014.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_pve</span></code></td>
<td>ConstrainedTissueClassifier from partial volume fraction (PVE) maps.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>check_point</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>get_exclude</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><strong>get_include</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.tracking.CmcTissueClassifier.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>$self</em>, <em>/</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.CmcTissueClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="deterministicmaximumdirectiongetter">
<h3><a class="reference internal" href="#dipy.workflows.tracking.DeterministicMaximumDirectionGetter" title="dipy.workflows.tracking.DeterministicMaximumDirectionGetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeterministicMaximumDirectionGetter</span></code></a><a class="headerlink" href="#deterministicmaximumdirectiongetter" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.DeterministicMaximumDirectionGetter">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">DeterministicMaximumDirectionGetter</code><a class="headerlink" href="#dipy.workflows.tracking.DeterministicMaximumDirectionGetter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.direction.probabilistic_direction_getter.ProbabilisticDirectionGetter</span></code></p>
<p>Return direction of a sphere with the highest probability mass
function (pmf).</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_pmf</span></code></td>
<td>Constructor for making a DirectionGetter from an array of Pmfs</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_shcoeff</span></code></td>
<td>Probabilistic direction getter from a distribution of directions on the sphere</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">initial_direction</span></code></td>
<td>Returns best directions at seed location to start tracking.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="63%" />
<col width="37%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get_direction</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.tracking.DeterministicMaximumDirectionGetter.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>$self</em>, <em>/</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.DeterministicMaximumDirectionGetter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="localfibertrackingpamflow">
<h3><a class="reference internal" href="#dipy.workflows.tracking.LocalFiberTrackingPAMFlow" title="dipy.workflows.tracking.LocalFiberTrackingPAMFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalFiberTrackingPAMFlow</span></code></a><a class="headerlink" href="#localfibertrackingpamflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.LocalFiberTrackingPAMFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">LocalFiberTrackingPAMFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.LocalFiberTrackingPAMFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.LocalFiberTrackingPAMFlow.get_short_name" title="dipy.workflows.tracking.LocalFiberTrackingPAMFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.LocalFiberTrackingPAMFlow.run" title="dipy.workflows.tracking.LocalFiberTrackingPAMFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(pam_files,&nbsp;stopping_files,&nbsp;seeding_files)</td>
<td>Workflow for Local Fiber Tracking.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.tracking.LocalFiberTrackingPAMFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.LocalFiberTrackingPAMFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.tracking.LocalFiberTrackingPAMFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.LocalFiberTrackingPAMFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.LocalFiberTrackingPAMFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>pam_files</em>, <em>stopping_files</em>, <em>seeding_files</em>, <em>stopping_thr=0.2</em>, <em>seed_density=1</em>, <em>tracking_method='deterministic'</em>, <em>pmf_threshold=0.1</em>, <em>max_angle=30.0</em>, <em>out_dir=''</em>, <em>out_tractogram='tractogram.trk'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.LocalFiberTrackingPAMFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow for Local Fiber Tracking.</p>
<p>This workflow use a saved peaks and metrics (PAM) file as input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pam_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><dl class="first last docutils">
<dt>Path to the peaks and metrics files. This path may contain</dt>
<dd><p class="first last">wildcards to use multiple masks at once.</p>
</dd>
</dl>
</dd>
<dt><strong>stopping_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of FA or other images used for stopping criteria for tracking.</p>
</dd>
<dt><strong>seeding_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">A binary image showing where we need to seed for tracking.</p>
</dd>
<dt><strong>stopping_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Threshold applied to stopping volume’s data to identify where</dt>
<dd><p class="first last">tracking has to stop (default 0.25).</p>
</dd>
</dl>
</dd>
<dt><strong>seed_density</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Number of seeds per dimension inside voxel (default 1).</dt>
<dd><p class="first last">For example, seed_density of 2 means 8 regularly distributed
points in the voxel. And seed density of 1 means 1 point at the
center of the voxel.</p>
</dd>
</dl>
</dd>
<dt><strong>tracking_method</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Select direction getter strategy:</dt>
<dd><ul class="first last simple">
<li>“eudx” (Uses the peaks saved in the pam_files)</li>
<li>“deterministic” or “det” for a deterministic tracking
(Uses the sh saved in the pam_files, default)</li>
<li>“probabilistic” or “prob” for a Probabilistic tracking
(Uses the sh saved in the pam_files)</li>
<li>“closestpeaks” or “cp” for a ClosestPeaks tracking
(Uses the sh saved in the pam_files)</li>
</ul>
</dd>
</dl>
</dd>
<dt><strong>pmf_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold for ODF functions. (default 0.1)</p>
</dd>
<dt><strong>max_angle</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Maximum angle between tract segments. This angle can be more
generous (larger) than values typically used with probabilistic
direction getters. The angle range is (0, 90)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_tractogram</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the tractogram file to be saved (default ‘tractogram.trk’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<p>Garyfallidis, University of Cambridge, PhD thesis 2012.
Amirbekian, University of California San Francisco, PhD thesis 2017.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="localtracking">
<h3><a class="reference internal" href="#dipy.workflows.tracking.LocalTracking" title="dipy.workflows.tracking.LocalTracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalTracking</span></code></a><a class="headerlink" href="#localtracking" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.LocalTracking">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">LocalTracking</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>fixedstep=True</em>, <em>return_all=True</em>, <em>random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.LocalTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="dipy.workflows.tracking.LocalTracking.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>fixedstep=True</em>, <em>return_all=True</em>, <em>random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.LocalTracking.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates streamlines by using local fiber-tracking.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>direction_getter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of DirectionGetter</span></dt>
<dd><p class="first last">Used to get directions for fiber tracking.</p>
</dd>
<dt><strong>tissue_classifier</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of TissueClassifier</span></dt>
<dd><p class="first last">Identifies endpoints and invalid points to inform tracking.</p>
</dd>
<dt><strong>seeds</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array (N, 3)</span></dt>
<dd><p class="first last">Points to seed the tracking. Seed points should be given in point
space of the track (see <code class="docutils literal notranslate"><span class="pre">affine</span></code>).</p>
</dd>
<dt><strong>affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array (4, 4)</span></dt>
<dd><p class="first last">Coordinate space for the streamline point with respect to voxel
indices of input data. This affine can contain scaling, rotational,
and translational components but should not contain any shearing.
An identity matrix can be used to generate streamlines in “voxel
coordinates” as long as isotropic voxels were used to acquire the
data.</p>
</dd>
<dt><strong>step_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Step size used for tracking.</p>
</dd>
<dt><strong>max_cross</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or None</span></dt>
<dd><p class="first last">The maximum number of direction to track from each seed in crossing
voxels. By default all initial directions are tracked.</p>
</dd>
<dt><strong>maxlen</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum number of steps to track from seed. Used to prevent
infinite loops.</p>
</dd>
<dt><strong>fixedstep</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If true, a fixed stepsize is used, otherwise a variable step size
is used.</p>
</dd>
<dt><strong>return_all</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If true, return all generated streamlines, otherwise only
streamlines reaching end points or exiting the image.</p>
</dd>
<dt><strong>random_seed</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">The seed for the random seed generator (numpy.random.seed and
random.seed).</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="pftrackingpamflow">
<h3><a class="reference internal" href="#dipy.workflows.tracking.PFTrackingPAMFlow" title="dipy.workflows.tracking.PFTrackingPAMFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">PFTrackingPAMFlow</span></code></a><a class="headerlink" href="#pftrackingpamflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.PFTrackingPAMFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">PFTrackingPAMFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.PFTrackingPAMFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.PFTrackingPAMFlow.get_short_name" title="dipy.workflows.tracking.PFTrackingPAMFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.PFTrackingPAMFlow.run" title="dipy.workflows.tracking.PFTrackingPAMFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(pam_files,&nbsp;wm_files,&nbsp;gm_files,&nbsp;…[,&nbsp;…])</td>
<td>Workflow for Particle Filtering Tracking.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.tracking.PFTrackingPAMFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.PFTrackingPAMFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.tracking.PFTrackingPAMFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.PFTrackingPAMFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.PFTrackingPAMFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>pam_files</em>, <em>wm_files</em>, <em>gm_files</em>, <em>csf_files</em>, <em>seeding_files</em>, <em>step_size=0.2</em>, <em>back_tracking_dist=2</em>, <em>front_tracking_dist=1</em>, <em>max_trial=20</em>, <em>particle_count=15</em>, <em>seed_density=1</em>, <em>pmf_threshold=0.1</em>, <em>max_angle=30.0</em>, <em>out_dir=''</em>, <em>out_tractogram='tractogram.trk'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.PFTrackingPAMFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow for Particle Filtering Tracking.</p>
<p>This workflow use a saved peaks and metrics (PAM) file as input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pam_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><dl class="first last docutils">
<dt>Path to the peaks and metrics files. This path may contain</dt>
<dd><p class="first last">wildcards to use multiple masks at once.</p>
</dd>
</dl>
</dd>
<dt><strong>wm_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of White matter for stopping criteria for tracking.</p>
</dd>
<dt><strong>gm_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of grey matter for stopping criteria for tracking.</p>
</dd>
<dt><strong>csf_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Path of cerebrospinal fluid for stopping criteria for tracking.</p>
</dd>
<dt><strong>seeding_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">A binary image showing where we need to seed for tracking.</p>
</dd>
<dt><strong>step_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Step size used for tracking.</p>
</dd>
<dt><strong>back_tracking_dist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Distance in mm to back track before starting the particle filtering
tractography. The total particle filtering tractography distance is
equal to back_tracking_dist + front_tracking_dist.
By default this is set to 2 mm.</p>
</dd>
<dt><strong>front_tracking_dist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Distance in mm to run the particle filtering tractography after the
the back track distance. The total particle filtering tractography
distance is equal to back_tracking_dist + front_tracking_dist. By
default this is set to 1 mm.</p>
</dd>
<dt><strong>max_trial</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Maximum number of trial for the particle filtering tractography
(Prevents infinite loops, default=20).</p>
</dd>
<dt><strong>particle_count</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Number of particles to use in the particle filter. (default 15)</p>
</dd>
<dt><strong>seed_density</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><dl class="first last docutils">
<dt>Number of seeds per dimension inside voxel (default 1).</dt>
<dd><p class="first last">For example, seed_density of 2 means 8 regularly distributed
points in the voxel. And seed density of 1 means 1 point at the
center of the voxel.</p>
</dd>
</dl>
</dd>
<dt><strong>pmf_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Threshold for ODF functions. (default 0.1)</p>
</dd>
<dt><strong>max_angle</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Maximum angle between tract segments. This angle can be more
generous (larger) than values typically used with probabilistic
direction getters. The angle range is (0, 90)</p>
</dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Output directory (default input file directory)</p>
</dd>
<dt><strong>out_tractogram</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd><p class="first last">Name of the tractogram file to be saved (default ‘tractogram.trk’)</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<dl class="docutils">
<dt>Girard, G., Whittingstall, K., Deriche, R., &amp; Descoteaux, M.</dt>
<dd>Towards quantitative connectivity analysis: reducing
tractography biases. NeuroImage, 98, 266-278, 2014..</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="particlefilteringtracking">
<h3><a class="reference internal" href="#dipy.workflows.tracking.ParticleFilteringTracking" title="dipy.workflows.tracking.ParticleFilteringTracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParticleFilteringTracking</span></code></a><a class="headerlink" href="#particlefilteringtracking" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.ParticleFilteringTracking">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">ParticleFilteringTracking</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>pft_back_tracking_dist=2</em>, <em>pft_front_tracking_dist=1</em>, <em>pft_max_trial=20</em>, <em>particle_count=15</em>, <em>return_all=True</em>, <em>random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.ParticleFilteringTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.tracking.html#dipy.tracking.local.localtracking.LocalTracking" title="dipy.tracking.local.localtracking.LocalTracking"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.tracking.local.localtracking.LocalTracking</span></code></a></p>
<dl class="method">
<dt id="dipy.workflows.tracking.ParticleFilteringTracking.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>pft_back_tracking_dist=2</em>, <em>pft_front_tracking_dist=1</em>, <em>pft_max_trial=20</em>, <em>particle_count=15</em>, <em>return_all=True</em>, <em>random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.ParticleFilteringTracking.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>A streamline generator using the particle filtering tractography
method <a class="reference internal" href="#rc5e8c566eb0a-1" id="id141">[1]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>direction_getter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of ProbabilisticDirectionGetter</span></dt>
<dd><p class="first last">Used to get directions for fiber tracking.</p>
</dd>
<dt><strong>tissue_classifier</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of ConstrainedTissueClassifier</span></dt>
<dd><p class="first last">Identifies endpoints and invalid points to inform tracking.</p>
</dd>
<dt><strong>seeds</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array (N, 3)</span></dt>
<dd><p class="first last">Points to seed the tracking. Seed points should be given in point
space of the track (see <code class="docutils literal notranslate"><span class="pre">affine</span></code>).</p>
</dd>
<dt><strong>affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array (4, 4)</span></dt>
<dd><p class="first last">Coordinate space for the streamline point with respect to voxel
indices of input data. This affine can contain scaling, rotational,
and translational components but should not contain any shearing.
An identity matrix can be used to generate streamlines in “voxel
coordinates” as long as isotropic voxels were used to acquire the
data.</p>
</dd>
<dt><strong>step_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Step size used for tracking.</p>
</dd>
<dt><strong>max_cross</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or None</span></dt>
<dd><p class="first last">The maximum number of direction to track from each seed in crossing
voxels. By default all initial directions are tracked.</p>
</dd>
<dt><strong>maxlen</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum number of steps to track from seed. Used to prevent
infinite loops.</p>
</dd>
<dt><strong>pft_back_tracking_dist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Distance in mm to back track before starting the particle filtering
tractography. The total particle filtering tractography distance is
equal to back_tracking_dist + front_tracking_dist.
By default this is set to 2 mm.</p>
</dd>
<dt><strong>pft_front_tracking_dist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Distance in mm to run the particle filtering tractography after the
the back track distance. The total particle filtering tractography
distance is equal to back_tracking_dist + front_tracking_dist. By
default this is set to 1 mm.</p>
</dd>
<dt><strong>pft_max_trial</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Maximum number of trial for the particle filtering tractography
(Prevents infinite loops).</p>
</dd>
<dt><strong>particle_count</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of particles to use in the particle filter.</p>
</dd>
<dt><strong>return_all</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If true, return all generated streamlines, otherwise only
streamlines reaching end points or exiting the image.</p>
</dd>
<dt><strong>random_seed</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">The seed for the random seed generator (numpy.random.seed and
random.seed).</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rc5e8c566eb0a-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id141">1</a>, <a class="fn-backref" href="#id142">2</a>)</em> Girard, G., Whittingstall, K., Deriche, R., &amp; Descoteaux, M.
Towards quantitative connectivity analysis: reducing
tractography biases. NeuroImage, 98, 266-278, 2014.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="probabilisticdirectiongetter">
<h3><a class="reference internal" href="#dipy.workflows.tracking.ProbabilisticDirectionGetter" title="dipy.workflows.tracking.ProbabilisticDirectionGetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilisticDirectionGetter</span></code></a><a class="headerlink" href="#probabilisticdirectiongetter" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.ProbabilisticDirectionGetter">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">ProbabilisticDirectionGetter</code><a class="headerlink" href="#dipy.workflows.tracking.ProbabilisticDirectionGetter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.direction.closest_peak_direction_getter.PmfGenDirectionGetter</span></code></p>
<p>Randomly samples direction of a sphere based on probability mass
function (pmf).</p>
<p>The main constructors for this class are current from_pmf and from_shcoeff.
The pmf gives the probability that each direction on the sphere should be
chosen as the next direction. To get the true pmf from the “raw pmf”
directions more than <code class="docutils literal notranslate"><span class="pre">max_angle</span></code> degrees from the incoming direction are
set to 0 and the result is normalized.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_pmf</span></code></td>
<td>Constructor for making a DirectionGetter from an array of Pmfs</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_shcoeff</span></code></td>
<td>Probabilistic direction getter from a distribution of directions on the sphere</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">initial_direction</span></code></td>
<td>Returns best directions at seed location to start tracking.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="63%" />
<col width="37%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>get_direction</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.tracking.ProbabilisticDirectionGetter.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.ProbabilisticDirectionGetter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Direction getter from a pmf generator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pmf_gen</strong> <span class="classifier-delimiter">:</span> <span class="classifier">PmfGen</span></dt>
<dd><p class="first last">Used to get probability mass function for selecting tracking
directions.</p>
</dd>
<dt><strong>max_angle</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, [0, 90]</span></dt>
<dd><p class="first last">The maximum allowed angle between incoming direction and new
direction.</p>
</dd>
<dt><strong>sphere</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Sphere</span></dt>
<dd><p class="first last">The set of directions to be used for tracking.</p>
</dd>
<dt><strong>pmf_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float [0., 1.]</span></dt>
<dd><p class="first last">Used to remove direction from the probability mass function for
selecting the tracking direction.</p>
</dd>
<dt><strong>relative_peak_threshold</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float in [0., 1.]</span></dt>
<dd><p class="first last">Used for extracting initial tracking directions. Passed to
peak_directions.</p>
</dd>
<dt><strong>min_separation_angle</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float in [0, 90]</span></dt>
<dd><p class="first last">Used for extracting initial tracking directions. Passed to
peak_directions.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="dipy.direction.html#dipy.direction.peaks.peak_directions" title="dipy.direction.peaks.peak_directions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dipy.direction.peaks.peak_directions</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="thresholdtissueclassifier">
<h3><a class="reference internal" href="#dipy.workflows.tracking.ThresholdTissueClassifier" title="dipy.workflows.tracking.ThresholdTissueClassifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThresholdTissueClassifier</span></code></a><a class="headerlink" href="#thresholdtissueclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.ThresholdTissueClassifier">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">ThresholdTissueClassifier</code><a class="headerlink" href="#dipy.workflows.tracking.ThresholdTissueClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.tracking.local.tissue_classifier.TissueClassifier</span></code></p>
<p># Declarations from tissue_classifier.pxd bellow
cdef:</p>
<blockquote>
<div>double threshold, interp_out_double[1]
double[:]  interp_out_view = interp_out_view
double[:, :, :] metric_map</div></blockquote>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>check_point</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.tracking.ThresholdTissueClassifier.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>$self</em>, <em>/</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.ThresholdTissueClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tractogram">
<h3><a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a><a class="headerlink" href="#tractogram" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.Tractogram">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">Tractogram</code><span class="sig-paren">(</span><em>streamlines=None</em>, <em>data_per_streamline=None</em>, <em>data_per_point=None</em>, <em>affine_to_rasmm=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Tractogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Container for streamlines and their data information.</p>
<p>Streamlines of a tractogram can be in any coordinate system of your
choice as long as you provide the correct <cite>affine_to_rasmm</cite> matrix, at
construction time. When applied to streamlines coordinates, that
transformation matrix should bring the streamlines back to world space
(RAS+ and mm space) <a href="#id157"><span class="problematic" id="id143">[1]_</span></a>.</p>
<p>Moreover, when streamlines are mapped back to voxel space <a href="#id158"><span class="problematic" id="id144">[2]_</span></a>, a
streamline point located at an integer coordinate (i,j,k) is considered
to be at the center of the corresponding voxel. This is in contrast with
other conventions where it might have referred to a corner.</p>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="http://nipy.org/nibabel/coordinate_systems.html#naming-reference-spaces">http://nipy.org/nibabel/coordinate_systems.html#naming-reference-spaces</a>
[2] <a class="reference external" href="http://nipy.org/nibabel/coordinate_systems.html#voxel-coordinates-are-in-voxel-space">http://nipy.org/nibabel/coordinate_systems.html#voxel-coordinates-are-in-voxel-space</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArraySequence</span></code> object</span></dt>
<dd><p class="first last">Sequence of <span class="math notranslate nohighlight">\(T\)</span> streamlines. Each streamline is an ndarray of
shape (<span class="math notranslate nohighlight">\(N_t\)</span>, 3) where <span class="math notranslate nohighlight">\(N_t\)</span> is the number of points of
streamline <span class="math notranslate nohighlight">\(t\)</span>.</p>
</dd>
<dt><strong>data_per_streamline</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">PerArrayDict</span></code> object</span></dt>
<dd><p class="first last">Dictionary where the items are (str, 2D array).  Each key represents a
piece of information <span class="math notranslate nohighlight">\(i\)</span> to be kept alongside every streamline, and its
associated value is a 2D array of shape (<span class="math notranslate nohighlight">\(T\)</span>, <span class="math notranslate nohighlight">\(P_i\)</span>) where <span class="math notranslate nohighlight">\(T\)</span> is the
number of streamlines and <span class="math notranslate nohighlight">\(P_i\)</span> is the number of values to store for
that particular piece of information <span class="math notranslate nohighlight">\(i\)</span>.</p>
</dd>
<dt><strong>data_per_point</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">PerArraySequenceDict</span></code> object</span></dt>
<dd><p class="first last">Dictionary where the items are (str, <code class="xref py py-class docutils literal notranslate"><span class="pre">ArraySequence</span></code>).  Each key
represents a piece of information <span class="math notranslate nohighlight">\(i\)</span> to be kept alongside every point
of every streamline, and its associated value is an iterable of
ndarrays of shape (<span class="math notranslate nohighlight">\(N_t\)</span>, <span class="math notranslate nohighlight">\(M_i\)</span>) where <span class="math notranslate nohighlight">\(N_t\)</span> is the number of points
for a particular streamline <span class="math notranslate nohighlight">\(t\)</span> and <span class="math notranslate nohighlight">\(M_i\)</span> is the number values to store
for that particular piece of information <span class="math notranslate nohighlight">\(i\)</span>.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.Tractogram.apply_affine" title="dipy.workflows.tracking.Tractogram.apply_affine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_affine</span></code></a>(affine[,&nbsp;lazy])</td>
<td>Applies an affine transformation on the points of each streamline.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.Tractogram.copy" title="dipy.workflows.tracking.Tractogram.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a>()</td>
<td>Returns a copy of this <a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a> object.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.Tractogram.extend" title="dipy.workflows.tracking.Tractogram.extend"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extend</span></code></a>(other)</td>
<td>Appends the data of another <a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.Tractogram.to_world" title="dipy.workflows.tracking.Tractogram.to_world"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_world</span></code></a>([lazy])</td>
<td>Brings the streamlines to world space (i.e.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.tracking.Tractogram.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>streamlines=None</em>, <em>data_per_streamline=None</em>, <em>data_per_point=None</em>, <em>affine_to_rasmm=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Tractogram.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">iterable of ndarrays or <code class="xref py py-class docutils literal notranslate"><span class="pre">ArraySequence</span></code>, optional</span></dt>
<dd><p class="first last">Sequence of <span class="math notranslate nohighlight">\(T\)</span> streamlines. Each streamline is an ndarray of
shape (<span class="math notranslate nohighlight">\(N_t\)</span>, 3) where <span class="math notranslate nohighlight">\(N_t\)</span> is the number of points of
streamline <span class="math notranslate nohighlight">\(t\)</span>.</p>
</dd>
<dt><strong>data_per_streamline</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict of iterable of ndarrays, optional</span></dt>
<dd><p class="first last">Dictionary where the items are (str, iterable).
Each key represents an information <span class="math notranslate nohighlight">\(i\)</span> to be kept alongside every
streamline, and its associated value is an iterable of ndarrays of
shape (<span class="math notranslate nohighlight">\(P_i\)</span>,) where <span class="math notranslate nohighlight">\(P_i\)</span> is the number of scalar values to store
for that particular information <span class="math notranslate nohighlight">\(i\)</span>.</p>
</dd>
<dt><strong>data_per_point</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict of iterable of ndarrays, optional</span></dt>
<dd><p class="first last">Dictionary where the items are (str, iterable).
Each key represents an information <span class="math notranslate nohighlight">\(i\)</span> to be kept alongside every
point of every streamline, and its associated value is an iterable
of ndarrays of shape (<span class="math notranslate nohighlight">\(N_t\)</span>, <span class="math notranslate nohighlight">\(M_i\)</span>) where <span class="math notranslate nohighlight">\(N_t\)</span> is the number of
points for a particular streamline <span class="math notranslate nohighlight">\(t\)</span> and <span class="math notranslate nohighlight">\(M_i\)</span> is the number
scalar values to store for that particular information <span class="math notranslate nohighlight">\(i\)</span>.</p>
</dd>
<dt><strong>affine_to_rasmm</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray of shape (4, 4) or None, optional</span></dt>
<dd><p class="first last">Transformation matrix that brings the streamlines contained in
this tractogram to <em>RAS+</em> and <em>mm</em> space where coordinate (0,0,0)
refers to the center of the voxel. By default, the streamlines
are in an unknown space, i.e. affine_to_rasmm is None.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.tracking.Tractogram.affine_to_rasmm">
<code class="descname">affine_to_rasmm</code><a class="headerlink" href="#dipy.workflows.tracking.Tractogram.affine_to_rasmm" title="Permalink to this definition">¶</a></dt>
<dd><p>Affine bringing streamlines in this tractogram to RAS+mm.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.Tractogram.apply_affine">
<code class="descname">apply_affine</code><span class="sig-paren">(</span><em>affine</em>, <em>lazy=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Tractogram.apply_affine" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies an affine transformation on the points of each streamline.</p>
<p>If <cite>lazy</cite> is not specified, this is performed <em>in-place</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>affine</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray of shape (4, 4)</span></dt>
<dd><p class="first last">Transformation that will be applied to every streamline.</p>
</dd>
<dt><strong>lazy</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{False, True}, optional</span></dt>
<dd><p class="first last">If True, streamlines are <em>not</em> transformed in-place and a
<code class="xref py py-class docutils literal notranslate"><span class="pre">LazyTractogram</span></code> object is returned. Otherwise, streamlines
are modified in-place.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>tractogram</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">LazyTractogram</span></code> object</span></dt>
<dd><p class="first last">Tractogram where the streamlines have been transformed according
to the given affine transformation. If the <cite>lazy</cite> option is true,
it returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">LazyTractogram</span></code> object, otherwise it returns a
reference to this <a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a> object with updated
streamlines.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.Tractogram.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Tractogram.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of this <a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a> object.</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.tracking.Tractogram.data_per_point">
<code class="descname">data_per_point</code><a class="headerlink" href="#dipy.workflows.tracking.Tractogram.data_per_point" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.tracking.Tractogram.data_per_streamline">
<code class="descname">data_per_streamline</code><a class="headerlink" href="#dipy.workflows.tracking.Tractogram.data_per_streamline" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.Tractogram.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Tractogram.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends the data of another <a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a>.</p>
<p>Data that will be appended includes the streamlines and the content
of both dictionaries <cite>data_per_streamline</cite> and <cite>data_per_point</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>other</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a> object</span></dt>
<dd><p class="first last">Its data will be appended to the data of this tractogram.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The entries in both dictionaries <cite>self.data_per_streamline</cite> and
<cite>self.data_per_point</cite> must match respectively those contained in
the other tractogram.</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.workflows.tracking.Tractogram.streamlines">
<code class="descname">streamlines</code><a class="headerlink" href="#dipy.workflows.tracking.Tractogram.streamlines" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.Tractogram.to_world">
<code class="descname">to_world</code><span class="sig-paren">(</span><em>lazy=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Tractogram.to_world" title="Permalink to this definition">¶</a></dt>
<dd><p>Brings the streamlines to world space (i.e. RAS+ and mm).</p>
<p>If <cite>lazy</cite> is not specified, this is performed <em>in-place</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>lazy</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{False, True}, optional</span></dt>
<dd><p class="first last">If True, streamlines are <em>not</em> transformed in-place and a
<code class="xref py py-class docutils literal notranslate"><span class="pre">LazyTractogram</span></code> object is returned. Otherwise, streamlines
are modified in-place.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>tractogram</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">LazyTractogram</span></code> object</span></dt>
<dd><p class="first last">Tractogram where the streamlines have been sent to world space.
If the <cite>lazy</cite> option is true, it returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">LazyTractogram</span></code>
object, otherwise it returns a reference to this
<a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a> object with updated streamlines.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id145">
<h3><a class="reference internal" href="#dipy.workflows.tracking.Workflow" title="dipy.workflows.tracking.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.tracking.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.tracking.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.Workflow.get_io_iterator" title="dipy.workflows.tracking.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.Workflow.get_short_name" title="dipy.workflows.tracking.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.Workflow.get_sub_runs" title="dipy.workflows.tracking.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.tracking.Workflow.manage_output_overwrite" title="dipy.workflows.tracking.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.tracking.Workflow.run" title="dipy.workflows.tracking.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.tracking.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.tracking.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.tracking.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id146">
<h3>load_nifti<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.tracking.load_nifti">
<code class="descclassname">dipy.workflows.tracking.</code><code class="descname">load_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>return_img=False</em>, <em>return_voxsize=False</em>, <em>return_coords=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.load_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="load-peaks">
<h3>load_peaks<a class="headerlink" href="#load-peaks" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.tracking.load_peaks">
<code class="descclassname">dipy.workflows.tracking.</code><code class="descname">load_peaks</code><span class="sig-paren">(</span><em>fname</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.load_peaks" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a PeaksAndMetrics HDF5 file (PAM5)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>fname</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Filename of PAM5 file.</p>
</dd>
<dt><strong>verbose</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Print summary information about the loaded file.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pam</strong> <span class="classifier-delimiter">:</span> <span class="classifier">PeaksAndMetrics object</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="save">
<h3>save<a class="headerlink" href="#save" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.tracking.save">
<code class="descclassname">dipy.workflows.tracking.</code><code class="descname">save</code><span class="sig-paren">(</span><em>tractogram</em>, <em>filename</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.tracking.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a tractogram to a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>tractogram</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a> object or <code class="xref py py-class docutils literal notranslate"><span class="pre">TractogramFile</span></code> object</span></dt>
<dd><p class="first last">If <a class="reference internal" href="#dipy.workflows.tracking.Tractogram" title="dipy.workflows.tracking.Tractogram"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tractogram</span></code></a> object, the file format will be guessed from
<cite>filename</cite> and a <code class="xref py py-class docutils literal notranslate"><span class="pre">TractogramFile</span></code> object will be created using
provided keyword arguments.
If <code class="xref py py-class docutils literal notranslate"><span class="pre">TractogramFile</span></code> object, the file format is known and will
be used to save its content to <cite>filename</cite>.</p>
</dd>
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Name of the file where the tractogram will be saved.</p>
</dd>
<dt><strong>**kwargs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">keyword arguments</span></dt>
<dd><p class="first last">Keyword arguments passed to <code class="xref py py-class docutils literal notranslate"><span class="pre">TractogramFile</span></code> constructor.
Should not be specified if <cite>tractogram</cite> is already an instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">TractogramFile</span></code>.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="horizonflow">
<h3><a class="reference internal" href="#dipy.workflows.viz.HorizonFlow" title="dipy.workflows.viz.HorizonFlow"><code class="xref py py-class docutils literal notranslate"><span class="pre">HorizonFlow</span></code></a><a class="headerlink" href="#horizonflow" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.viz.HorizonFlow">
<em class="property">class </em><code class="descclassname">dipy.workflows.viz.</code><code class="descname">HorizonFlow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.HorizonFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">dipy.workflows.workflow.Workflow</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.viz.HorizonFlow.get_short_name" title="dipy.workflows.viz.HorizonFlow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.viz.HorizonFlow.run" title="dipy.workflows.viz.HorizonFlow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(input_files[,&nbsp;cluster,&nbsp;cluster_thr,&nbsp;…])</td>
<td>Highly interactive visualization - invert the Horizon!</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.viz.HorizonFlow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.HorizonFlow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.viz.HorizonFlow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.HorizonFlow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.viz.HorizonFlow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>input_files</em>, <em>cluster=False</em>, <em>cluster_thr=15.0</em>, <em>random_colors=False</em>, <em>length_lt=1000</em>, <em>length_gt=0</em>, <em>clusters_lt=100000000</em>, <em>clusters_gt=0</em>, <em>native_coords=False</em>, <em>stealth=False</em>, <em>out_dir=''</em>, <em>out_stealth_png='tmp.png'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.HorizonFlow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Highly interactive visualization - invert the Horizon!</p>
<p>Interact with any number of .trk, .tck or .dpy tractograms and anatomy
files .nii or .nii.gz. Cluster streamlines on loading.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>input_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">variable string</span></dt>
<dd></dd>
<dt><strong>cluster</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd></dd>
<dt><strong>cluster_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>random_colors</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd></dd>
<dt><strong>length_lt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>length_gt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>clusters_lt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd></dd>
<dt><strong>clusters_gt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd></dd>
<dt><strong>native_coords</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd></dd>
<dt><strong>stealth</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd></dd>
<dt><strong>out_dir</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd></dd>
<dt><strong>out_stealth_png</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r1c3f2df048ff-horizon-ismrm19" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id147">[Horizon_ISMRM19]</a></td><td>Garyfallidis E., M-A. Cote, B.Q. Chandio,
S. Fadnavis, J. Guaje, R. Aggarwal, E. St-Onge, K.S. Juneja,
S. Koudoro, D. Reagan, DIPY Horizon: fast, modular, unified and
adaptive visualization, Proceedings of: International Society of
Magnetic Resonance in Medicine (ISMRM), Montreal, Canada, 2019.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id148">
<h3><a class="reference internal" href="#dipy.workflows.viz.Workflow" title="dipy.workflows.viz.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.viz.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.viz.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.viz.Workflow.get_io_iterator" title="dipy.workflows.viz.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.viz.Workflow.get_short_name" title="dipy.workflows.viz.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.viz.Workflow.get_sub_runs" title="dipy.workflows.viz.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.viz.Workflow.manage_output_overwrite" title="dipy.workflows.viz.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.viz.Workflow.run" title="dipy.workflows.viz.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.viz.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.viz.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.viz.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.viz.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.viz.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.viz.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="horizon">
<h3>horizon<a class="headerlink" href="#horizon" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.viz.horizon">
<code class="descclassname">dipy.workflows.viz.</code><code class="descname">horizon</code><span class="sig-paren">(</span><em>tractograms</em>, <em>images</em>, <em>cluster</em>, <em>cluster_thr</em>, <em>random_colors</em>, <em>length_lt</em>, <em>length_gt</em>, <em>clusters_lt</em>, <em>clusters_gt</em>, <em>world_coords=True</em>, <em>interactive=True</em>, <em>out_png='tmp.png'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.horizon" title="Permalink to this definition">¶</a></dt>
<dd><p>Highly interactive visualization - invert the Horizon!</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>tractograms</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence</span></dt>
<dd><p class="first last">Sequence of Streamlines objects</p>
</dd>
<dt><strong>images</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence of tuples</span></dt>
<dd><p class="first last">Each tuple contains data and affine</p>
</dd>
<dt><strong>cluster</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Enable QuickBundlesX clustering</p>
</dd>
<dt><strong>cluster_thr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Distance threshold used for clustering</p>
</dd>
<dt><strong>random_colors</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd></dd>
<dt><strong>length_lt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>length_gt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd></dd>
<dt><strong>clusters_lt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd></dd>
<dt><strong>clusters_gt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd></dd>
<dt><strong>world_coords</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd></dd>
<dt><strong>interactive</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd></dd>
<dt><strong>out_png</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="re42ff0d3eae3-horizon-ismrm19" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id149">[Horizon_ISMRM19]</a></td><td>Garyfallidis E., M-A. Cote, B.Q. Chandio,
S. Fadnavis, J. Guaje, R. Aggarwal, E. St-Onge, K.S. Juneja,
S. Koudoro, D. Reagan, DIPY Horizon: fast, modular, unified and
adaptive visualization, Proceedings of: International Society of
Magnetic Resonance in Medicine (ISMRM), Montreal, Canada, 2019.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id150">
<h3>load_nifti<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.viz.load_nifti">
<code class="descclassname">dipy.workflows.viz.</code><code class="descname">load_nifti</code><span class="sig-paren">(</span><em>fname</em>, <em>return_img=False</em>, <em>return_voxsize=False</em>, <em>return_coords=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.load_nifti" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="load-tractogram">
<h3>load_tractogram<a class="headerlink" href="#load-tractogram" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.viz.load_tractogram">
<code class="descclassname">dipy.workflows.viz.</code><code class="descname">load_tractogram</code><span class="sig-paren">(</span><em>filename</em>, <em>lazy_load=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.load_tractogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads tractogram files (<a href="#id151"><span class="problematic" id="id152">*</span></a>.tck)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">input trk filename</p>
</dd>
<dt><strong>lazy_load</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{False, True}, optional</span></dt>
<dd><p class="first last">If True, load streamlines in a lazy manner i.e. they will not be kept
in memory and only be loaded when needed.
Otherwise, load all streamlines in memory.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>streamlines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of 2D arrays</span></dt>
<dd><p class="first last">Each 2D array represents a sequence of 3D points (points, 3).</p>
</dd>
<dt><strong>hdr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">header from a trk file</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="pjoin">
<h3>pjoin<a class="headerlink" href="#pjoin" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.viz.pjoin">
<code class="descclassname">dipy.workflows.viz.</code><code class="descname">pjoin</code><span class="sig-paren">(</span><em>a</em>, <em>*p</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.viz.pjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Join two or more pathname components, inserting ‘/’ as needed.
If any component is an absolute path, all previous path components
will be discarded.  An empty last part will result in a path that
ends with a separator.</p>
</dd></dl>

</div>
<div class="section" id="id153">
<h3><a class="reference internal" href="#dipy.workflows.workflow.Workflow" title="dipy.workflows.workflow.Workflow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workflow</span></code></a><a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.workflows.workflow.Workflow">
<em class="property">class </em><code class="descclassname">dipy.workflows.workflow.</code><code class="descname">Workflow</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.workflow.Workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.workflow.Workflow.get_io_iterator" title="dipy.workflows.workflow.Workflow.get_io_iterator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_io_iterator</span></code></a>()</td>
<td>Create an iterator for IO.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.workflow.Workflow.get_short_name" title="dipy.workflows.workflow.Workflow.get_short_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_short_name</span></code></a>()</td>
<td>Return A short name for the workflow used to subdivide.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.workflow.Workflow.get_sub_runs" title="dipy.workflows.workflow.Workflow.get_sub_runs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_sub_runs</span></code></a>()</td>
<td>Return No sub runs since this is a simple workflow.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.workflows.workflow.Workflow.manage_output_overwrite" title="dipy.workflows.workflow.Workflow.manage_output_overwrite"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_output_overwrite</span></code></a>()</td>
<td>Check if a file will be overwritten upon processing the inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.workflows.workflow.Workflow.run" title="dipy.workflows.workflow.Workflow.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*args,&nbsp;**kwargs)</td>
<td>Execute the workflow.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.workflows.workflow.Workflow.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>output_strategy='absolute'</em>, <em>mix_names=False</em>, <em>force=False</em>, <em>skip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.workflow.Workflow.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the basic workflow object.</p>
<p>This object takes care of any workflow operation that is common to all
the workflows. Every new workflow should extend this class.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.workflow.Workflow.get_io_iterator">
<code class="descname">get_io_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.workflow.Workflow.get_io_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an iterator for IO.</p>
<p>Use a couple of inspection tricks to build an IOIterator using the
previous frame (values of local variables and other contextuals) and
the run method’s docstring.</p>
</dd></dl>

<dl class="classmethod">
<dt id="dipy.workflows.workflow.Workflow.get_short_name">
<em class="property">classmethod </em><code class="descname">get_short_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.workflow.Workflow.get_short_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return A short name for the workflow used to subdivide.</p>
<p>The short name is used by CombinedWorkflows and the argparser to
subdivide the commandline parameters avoiding the trouble of having
subworkflows parameters with the same name.</p>
<p>For example, a combined workflow with dti reconstruction and csd
reconstruction might en up with the b0_threshold parameter. Using short
names, we will have dti.b0_threshold and csd.b0_threshold available.</p>
<p>Returns class name by default but it is strongly advised to set it to
something shorter and easier to write on commandline.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.workflow.Workflow.get_sub_runs">
<code class="descname">get_sub_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.workflow.Workflow.get_sub_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return No sub runs since this is a simple workflow.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.workflow.Workflow.manage_output_overwrite">
<code class="descname">manage_output_overwrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.workflow.Workflow.manage_output_overwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file will be overwritten upon processing the inputs.</p>
<p>If it is bound to happen, an action is taken depending on
self._force_overwrite (or –force via command line). A log message is
output independently of the outcome to tell the user something
happened.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.workflows.workflow.Workflow.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.workflow.Workflow.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the workflow.</p>
<p>Since this is an abstract class, raise exception if this code is
reached (not impletemented in child class or literally called on this
class)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id154">
<h3><a href="#id159"><span class="problematic" id="id160">io_iterator_</span></a><a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.workflows.workflow.io_iterator_">
<code class="descclassname">dipy.workflows.workflow.</code><code class="descname">io_iterator_</code><span class="sig-paren">(</span><em>frame</em>, <em>fnc</em>, <em>output_strategy='absolute'</em>, <em>mix_names=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.workflows.workflow.io_iterator_" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an IOIterator using introspection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>frame</strong> <span class="classifier-delimiter">:</span> <span class="classifier">frameobject</span></dt>
<dd><blockquote class="first">
<div><p>Contains the info about the current local variables values.</p>
</div></blockquote>
<dl class="last docutils">
<dt>fnc <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function to inspect</p>
</dd>
<dt>output_strategy <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">Controls the behavior of the IOIterator for output paths.</p>
</dd>
<dt>mix_names <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Whether or not to append a mix of input names at the beginning.</p>
</dd>
</dl>
</dd>
<dt><strong>Returns</strong></dt>
<dd></dd>
<dt><strong>——-</strong></dt>
<dd><p class="first last">Properly instantiated IOIterator object.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dipy.viz.html" title="viz"
             >previous</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >API Reference</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2019, dipy developers &lt;neuroimaging@python.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>